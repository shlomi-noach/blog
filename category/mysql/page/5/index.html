<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	<title>MySQL – Page 5 – code.openark.org</title>
<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//s.w.org">



<link rel="stylesheet" id="wp-block-library-css" href="https://shlomi-noach.github.io/blog/wp-includes/css/dist/block-library/style.min.css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wp-polls-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-css.css" media="all">
<style id="wp-polls-inline-css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="openark-primer-style-css" href="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/style.css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/css/jetpack.css" media="all">
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script>



<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel="dns-prefetch" href="//v0.wordpress.com">


<meta property="og:type" content="website">
<meta property="og:title" content="MySQL – Page 5 – code.openark.org">
<meta property="og:url" content="https://shlomi-noach.github.io/blog/category/mysql">
<meta property="og:description" content="MySQL related posts">
<meta property="og:site_name" content="code.openark.org">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">


<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(242,101,34,.88);}</style></head>

<body class="archive paged category category-mysql category-5 paged-5 category-paged-5 hfeed no-sidebar">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
							<p class="site-title"><a href="https://shlomi-noach.github.io/blog/" rel="home">code.openark.org</a></p>
								<p class="site-description">Blog by Shlomi Noach</p>
			
			<nav id="site-navigation" class="main-navigation">
				<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">primary-menu</button>
				<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-8109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8109"><a href="https://shlomi-noach.github.io/blog/archives">archives</a></li>
<li id="menu-item-8050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8050"><a href="https://shlomi-noach.github.io/blog/presentations">presentations</a></li>
<li id="menu-item-8055" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8055"><a href="https://shlomi-noach.github.io/blog/about">about</a></li>
<li id="menu-item-8071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8071"><a href="https://github.com/shlomi-noach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li>
<li id="menu-item-8074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8074"><a href="https://www.linkedin.com/in/shlominoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li>
<li id="menu-item-8072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8072"><a href="https://twitter.com/ShlomiNoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></li>
<li id="menu-item-8073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8073"><a href="https://shlomi-noach.github.io/blog/feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-12.832 20c-1.197 0-2.168-.969-2.168-2.165s.971-2.165 2.168-2.165 2.167.969 2.167 2.165-.97 2.165-2.167 2.165zm5.18 0c-.041-4.029-3.314-7.298-7.348-7.339v-3.207c5.814.041 10.518 4.739 10.561 10.546h-3.213zm5.441 0c-.021-7.063-5.736-12.761-12.789-12.792v-3.208c8.83.031 15.98 7.179 16 16h-3.211z"></path></svg></a></li>
</ul></div>			</nav>
		</div>
	</header>

	<main id="primary" class="site-main">

		
			<header class="page-header">
				<h1 class="page-title">Category: MySQL</h1><div class="archive-description"><p>MySQL related posts</p>
</div>			</header>

			
<article id="post-7453" class="post-7453 post type-post status-publish format-standard hentry category-mysql tag-failover tag-high-availability tag-orchestrator tag-pseudo-gtid tag-replication">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/state-of-automated-recovery-via-pseudo-gtid-orchestrator-booking-com" rel="bookmark">State of automated recovery via Pseudo-GTID & Orchestrator @ Booking.com</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/failover" rel="tag">Failover</a><a href="https://shlomi-noach.github.io/blog/tag/high-availability" rel="tag">High availability</a><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a><a href="https://shlomi-noach.github.io/blog/tag/pseudo-gtid" rel="tag">Pseudo GTID</a><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/state-of-automated-recovery-via-pseudo-gtid-orchestrator-booking-com" rel="bookmark"><time class="entry-date published updated" datetime="2015-11-20T11:41:13+02:00">November 20, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>This post sums up some of my work on MySQL resilience and high availability at <a href="http://www.booking.com">Booking.com</a> by presenting the current state of automated master and intermediate master recoveries via <a href="https://shlomi-noach.github.io/blog/mysql/refactoring-replication-topology-with-pseudo-gtid">Pseudo-GTID</a> & <strong><a href="https://github.com/outbrain/orchestrator">Orchestrator</a></strong>.</p>
<p>Booking.com uses many different MySQL topologies, of varying vendors, configurations and workloads: Oracle MySQL, MariaDB, statement based replication, row based replication, hybrid, OLTP, OLAP, GTID (few), no GTID (most), Binlog Servers, filters, hybrid of all the above.</p>
<p>Topologies size varies from a single server to many-many-many. Our typical topology has a master in one datacenter, a bunch of slaves in same DC, a slave in another DC acting as an intermediate master to further bunch of slaves in the other DC. Something like this, give or take:</p>
<blockquote><p><a href="https://shlomi-noach.github.io/blog/wp-content/uploads/2015/11/booking-topology-sample.png"><img class="alignnone wp-image-7480 size-medium" src="https://shlomi-noach.github.io/blog/wp-content/uploads/2015/11/booking-topology-sample-300x169.png" alt="booking-topology-sample" width="300" height="169" srcset="https://shlomi-noach.github.io/blog/wp-content/uploads/2015/11/booking-topology-sample-300x169.png 300w,https://shlomi-noach.github.io/blog/wp-content/uploads/2015/11/booking-topology-sample-1024x576.png 1024w,https://shlomi-noach.github.io/blog/wp-content/uploads/2015/11/booking-topology-sample-900x506.png 900w,https://shlomi-noach.github.io/blog/wp-content/uploads/2015/11/booking-topology-sample.png 1600w" sizes="(max-width: 300px) 100vw, 300px"></a></p></blockquote>
<p>However as we are building our third data center (with MySQL deployments mostly completed) the graph turns more complex.</p>
<p>Two high availability questions are:</p>
<ul>
<li>What happens when an intermediate master dies? What of all its slaves?</li>
<li>What happens when the master dies? What of the entire topology?</li>
</ul>
<p>This is not a technical drill down into the solution, but rather on overview of the state. For more, please refer to recent presentations in <a href="https://speakerdeck.com/shlominoach/managing-and-visualizing-your-replication-topologies-with-orchestrator">September</a> and <a href="https://speakerdeck.com/shlominoach/pseudo-gtid-and-easy-mysql-replication-topology-management">April</a>.</p>
<p>At this time we have:</p>
<ul>
<li>Pseudo-GTID deployed on all chains
<ul>
<li>Injected every 5 seconds</li>
<li>Using the <a href="https://shlomi-noach.github.io/blog/mysql/pseudo-gtid-ascending">monotonically ascending</a> variation</li>
</ul>
</li>
<li>Pseudo-GTID based automated failover for intermediate masters on all chains</li>
<li>Pseudo-GTID based automated failover for masters on roughly 30% of the chains.
<ul>
<li>The rest of 70% of chains are set for manual failover using Pseudo-GTID.</li>
</ul>
</li>
</ul>
<p>Pseudo-GTID is in particular used for:</p>
<ul>
<li>Salvaging slaves of a dead intermediate master</li>
<li>Correctly grouping and connecting slaves of a dead master</li>
<li>Routine refactoring of topologies. This includes:
<ul>
<li>Manual repointing of slaves for various operations (e.g. offloading slaves from a busy box)</li>
<li>Automated refactoring (for example, used by our automated upgrading script, which consults with <em>orchestrator</em>, upgrades, shuffles slaves around, updates intermediate master, suffles back…)</li>
</ul>
</li>
<li>(In the works), failing over binlog reader apps that audit our binary logs.</li>
</ul>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/state-of-automated-recovery-via-pseudo-gtid-orchestrator-booking-com#more-7453" class="more-link">Continue reading »<span class="screen-reader-text"> “State of automated recovery via Pseudo-GTID & Orchestrator @ Booking.com”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/state-of-automated-recovery-via-pseudo-gtid-orchestrator-booking-com#respond">Leave a Comment<span class="screen-reader-text"> on State of automated recovery via Pseudo-GTID & Orchestrator @ Booking.com</span></a></span>	</footer>
</article>

<article id="post-7446" class="post-7446 post type-post status-publish format-standard hentry category-mysql tag-failover tag-orchestrator tag-pseudo-gtid tag-replication">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/orchestrator-pseudo-gtid-for-binlog-reader-failover" rel="bookmark">Orchestrator & Pseudo-GTID for binlog reader failover</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/failover" rel="tag">Failover</a><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a><a href="https://shlomi-noach.github.io/blog/tag/pseudo-gtid" rel="tag">Pseudo GTID</a><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/orchestrator-pseudo-gtid-for-binlog-reader-failover" rel="bookmark"><time class="entry-date published updated" datetime="2015-11-19T10:52:16+02:00">November 19, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>One of our internal apps at <strong>Booking.com</strong> audits changes to our tables on various clusters. We used to use <em>tungsten replicator</em>, but have since migrated onto our own solution.</p>
<p>We have a binlog reader (uses <a href="https://github.com/zendesk/open-replicator">open-replicator</a>) running on a slave. It expects Row Based Replication, hence our slave runs with <strong>log-slave-updates</strong>, <strong>binlog-format=’ROW’</strong>, to translate from the master’s Statement Based Replication. The binlog reader reads what it needs to read, audits what it needs to audit, and we’re happy.</p>
<h3>However what happens if that slave dies?</h3>
<p>In such case we need to be able to point our binlog reader to another slave, and it needs to be able to pick up auditing from the same point.</p>
<p>This sounds an awful lot like slave repointing in case of master/intermediate master failure, and indeed the solutions are similar. However our binlog reader is not a real MySQL server and does not understands replication. It does not really replicate, it just parses binary logs.</p>
<p>We’re also not using GTID. But we <em>are</em> using Pseudo-GTID. As it turns out, the failover solution is already built in by <a href="https://github.com/outbrain/orchestrator">orchestrator</a>, and this is how it goes:</p>
<h3>Normal execution</h3>
<p>Our binlog app reads entries from the binary log. Some are of interest for auditing purposes, some are not. An occasional Pseudo-GTID entry is found, and is being stored to ZooKeeper tagged as  “last seen and processed Pseudo-GTID”.</p>
<h3>Upon slave failure</h3>
<p>We recognize the death of a slave; we have other slaves in the pool; we pick another. Now we need to find the coordinates from which to carry on.</p>
<p>We read our “last seen and processed Pseudo-GTID”. Say it reads:</p>
<blockquote>
<pre>drop view if exists `meta`.`_pseudo_gtid_hint__asc:56373F17:00000000012B1C8B:50EC77A1`</pre>
</blockquote>
<p>. We now issue:</p>
<blockquote>
<pre>$ orchestrator <strong>-c find-binlog-entry</strong> <strong>-i new.slave.fqdn.com</strong> --pattern='drop view if exists `meta`.`_pseudo_gtid_hint__asc:56373F17:00000000012B1C8B:50EC77A1`'</pre>
</blockquote>
<p>The output of such command are the binlog coordinates of that same entry as found in the new slave’s binlogs:</p>
<blockquote>
<pre>binlog.000148:43664433</pre>
</blockquote>
<p>Pseudo-GTID entries are only injected once every few seconds (<strong>5</strong> in our case). Either: <a href="https://shlomi-noach.github.io/blog/mysql/orchestrator-pseudo-gtid-for-binlog-reader-failover#more-7446" class="more-link">Continue reading »<span class="screen-reader-text"> “Orchestrator & Pseudo-GTID for binlog reader failover”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/orchestrator-pseudo-gtid-for-binlog-reader-failover#respond">Leave a Comment<span class="screen-reader-text"> on Orchestrator & Pseudo-GTID for binlog reader failover</span></a></span>	</footer>
</article>

<article id="post-7439" class="post-7439 post type-post status-publish format-standard hentry category-mysql tag-failover tag-high-availability tag-maxscale tag-opinions tag-orchestrator">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-maxscale-automated-failover-and-orchestrator" rel="bookmark">Thoughts on MaxScale automated failover (and Orchestrator)</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/failover" rel="tag">Failover</a><a href="https://shlomi-noach.github.io/blog/tag/high-availability" rel="tag">High availability</a><a href="https://shlomi-noach.github.io/blog/tag/maxscale" rel="tag">MaxScale</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-maxscale-automated-failover-and-orchestrator" rel="bookmark"><time class="entry-date published" datetime="2015-11-18T11:17:48+02:00">November 18, 2015</time><time class="updated" datetime="2015-11-18T21:31:36+02:00">November 18, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Having attended a talk (as part of the <a href="https://blog.mariadb.org/2015-developers-meeting-amsterdam/">MariaDB Developer Meeting in Amsterdam</a>) about recent developments of <a href="https://mariadb.com/products/mariadb-maxscale">MaxScale</a> in executing automated failovers, here are some (late) observations of mine.</p>
<p>I will begin by noting that the project is stated to be pre-production, and so of course none of the below are complaints, but rather food for thought, points for action and otherwise recommendations.</p>
<p>Some functionality of the MaxScale failover is also implemented by <strong><a href="https://github.com/outbrain/orchestrator">orchestrator</a></strong>, which I author. <em>Orchestrator</em> was built in production environments by and for operational people. In this respect it has gained many insights and had to cope with many real-world cases, special cases & Murphy’s law cases. This post compares logic, feature set and capabilities of the two where relevant. To some extent the below will read as “hey, I’ve already implemented this; shame to re-implement the same”, and indeed I think that way; but it wouldn’t be the first time a code of mine would just be re-implemented by someone else and I’ve done the same, myself.</p>
<p>I’m describing the solution the way I understood it from the talk. If I’m wrong on any account I’m happy to be corrected via comments below. <strong>Edit:</strong> <em>please see comment by</em> <a class="url" href="http://www.mariadb.com/" rel="external nofollow">Dipti Joshi</a></p>
<h3>General overview</h3>
<p>The idea is that MaxScale operates as a proxy to your topology. You do not connect to your master directly, but rather through MaxScale. Thus, MaxScale acts as a proxy to your master.</p>
<p>The next phase is that MaxScale would also auto-detect master failure, fix the topology for you, promote a new master, and will have your application unaware of all the complexity and without the app having to change setup/DNS/whatever. Of course some write downtime is implied.</p>
<p>Now for some breakdown.</p>
<h3>Detection</h3>
<p>The detection of a dead master, the check by which a failover is initiated, is based on MaxScale not being able to query the master. This calls for some points for consideration:</p>
<ul>
<li>Typically, I would see “I can’t connect to the master therefore failover” as too hysterical, and the basis for a lot of false positives.</li>
<li>However, since in the discussed configuration MaxScale is <em>the only access point</em> to the master, the fact MaxScale cannot connect to the master means the master is inaccessible <em>de-facto</em>.</li>
<li>In light of the above, the decision makes sense – but I still hold that it would make false positives.</li>
<li>I’m unsure (I <em>think</em> not; can anyone comment?) if MaxScale would make multiple attempts over time and only reach the conclusion after X successive failures. This would reduce the false positives.</li>
<li>I’m having a growing dislike to a “check for 4 successive times then alert/failover” Nagios-style behavior. <em>Orchestrator</em> takes a different approach where it recognizes a master’s death by not being able to connect to the master <em>as well as</em> being able to connect to 1st tier slaves, check their status and observe that <em>they’re unable to connect to the master as well</em>. See <a title="Permanent Link to What makes a MySQL server failure/recovery case?" href="https://shlomi-noach.github.io/blog/mysql/what-makes-a-mysql-server-failurerecovery-case" rel="bookmark">What makes a MySQL server failure/recovery case?</a>. This approach still calls for further refinement (what if the master is temporarily deadlocked? Is this a failover or not?).</li>
</ul>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-maxscale-automated-failover-and-orchestrator#more-7439" class="more-link">Continue reading »<span class="screen-reader-text"> “Thoughts on MaxScale automated failover (and Orchestrator)”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-maxscale-automated-failover-and-orchestrator#comments">6 Comments<span class="screen-reader-text"> on Thoughts on MaxScale automated failover (and Orchestrator)</span></a></span>	</footer>
</article>

<article id="post-7451" class="post-7451 post type-post status-publish format-standard hentry category-mysql tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/sql-mini-hack-of-the-day-inverted-in-clause" rel="bookmark">SQL mini hack of the day, inverted IN clause</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/sql-mini-hack-of-the-day-inverted-in-clause" rel="bookmark"><time class="entry-date published updated" datetime="2015-11-13T17:28:09+02:00">November 13, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>We are used to issue queries with an <strong>IN</strong> clause of the form:</p>
<blockquote>
<pre class="brush: sql; title: ; notranslate" title="">... where state in ('started', 'completed', 'failed') ...</pre>
</blockquote>
<p>However I’ve had a few cases where I used an inverted format. Here’s one use case followed by an inverted <strong>IN</strong> clause.</p>
<h3>Dynamic query building</h3>
<p>Say we have this function:</p>
<blockquote>
<p>GetLaggingSlaves(clusterName string)</p>
</blockquote>
<p>Which, based on whether given <strong>clusterName</strong> is empty or not, would return list of all lagging slaves, or only those in the given cluster, respectively: <a href="https://shlomi-noach.github.io/blog/mysql/sql-mini-hack-of-the-day-inverted-in-clause#more-7451" class="more-link">Continue reading »<span class="screen-reader-text"> “SQL mini hack of the day, inverted IN clause”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/sql-mini-hack-of-the-day-inverted-in-clause#comments">2 Comments<span class="screen-reader-text"> on SQL mini hack of the day, inverted IN clause</span></a></span>	</footer>
</article>

<article id="post-7384" class="post-7384 post type-post status-publish format-standard hentry category-mysql tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/leader-election-using-mysql" rel="bookmark">Leader election using MySQL</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/leader-election-using-mysql" rel="bookmark"><time class="entry-date published" datetime="2015-10-14T07:52:21+02:00">October 14, 2015</time><time class="updated" datetime="2019-03-25T12:48:45+02:00">March 25, 2019</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Being a stateful, centralized datastore, MySQL can serve in negotiating leadership: a mechanism to elect a single service out of multiple services; moreover, a mechanism to promote a new leader should the existing leader cease to function.</p>
<h3>What of Zookeeper?</h3>
<p>Zookeeper makes for an excellent leader election mechanism. This is one of the most recognized uses for Zookeeper. It has HA via multiple nodes & quorum,  ephemeral nodes, all you need. To achieve similar benefits with MySQL you’d need to use Galera or NDB Cluster; so why not use Zk? The use case at hand is</p>
<p><strong><a href="https://github.com/outbrain/orchestrator">orchestrator</a></strong>, a multi-node, mostly stateless service that happens to use MySQL as backend datastore. Ir relies on MySQL to exist in backend. It already <em>expects it to be there</em>. If the MySQL server is down, so is the service, effectively. In such case it doesn’t hurt adding another dependency on MySQL; this does not reduce HA. You need to take care of MySQL HA anyhow so there’s no additional cost. In fact, going to Zookeeper makes the additional cost as you introduce a new component to the system that can be avoided.</p>
<h3>Terms of the solution</h3>
<p>Our proposed solution offers:</p>
<ul>
<li>Single leader election out of multiple nodes</li>
<li>Leader actively reaffirms its leadership periodically</li>
<li>Timeout based re-election: decision to re-elect new leader based on the fact current leader has not reaffirmed its leadership over X seconds</li>
<li>A way to forcibly assume leadership for a specific node</li>
<li>A way to forcibly call for re-elections by demoting existing leader</li>
<li>A node/service can easily tell whether it’s the leader or not</li>
<li>Anyone can tell who the leader is</li>
</ul>
<h3>SQL solution</h3>
<p>The solution is composed of a single table and a set of queries which implement the above offers. We assume a service can uniquely identify itself; this is easy to achieve:</p>
<ul>
<li>If services are running from different hosts (as should be the case, this is service HA), use hostname for ID
<ul>
<li>But what if the service restarts? Are you good with calling this “the same service” or is this now a new service running on the same host?</li>
</ul>
</li>
<li>In such case use combination of hostname & OS process ID
<ul>
<li>Or generate a random token upon startup</li>
<li>Or use startup timestamp Whichever solution you pick, make sure it is human readable, such that it is easy to tell </li>
</ul>
</li>
</ul>
<p><em>which service is the leader</em>. This helps operations. We note this as <strong>service_id</strong></p>
<h4>Table</h4>
<p>The following table will have a single row; the</p>
<p><strong>service_id</strong> in that row is the active leader.</p>
<pre><code class="sql">CREATE TABLE service_election ( 
  anchor tinyint(3) unsigned NOT NULL, 
  service_id varchar(128) NOT NULL, 
  last_seen_active timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, 
  PRIMARY KEY (anchor) 
) ENGINE=InnoDB 
</code></pre>
<h4>Attempt election</h4>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/leader-election-using-mysql#more-7384" class="more-link">Continue reading »<span class="screen-reader-text"> “Leader election using MySQL”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/leader-election-using-mysql#comments">3 Comments<span class="screen-reader-text"> on Leader election using MySQL</span></a></span>	</footer>
</article>

<article id="post-7407" class="post-7407 post type-post status-publish format-standard hentry category-mysql tag-opinions">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/new-statements-id-like-to-see-in-mysql-5-8" rel="bookmark">New statements I’d like to see in MySQL 5.8</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/new-statements-id-like-to-see-in-mysql-5-8" rel="bookmark"><time class="entry-date published updated" datetime="2015-10-08T09:44:50+02:00">October 8, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Following up on <a title="Link to New features I'd like to see in MySQL 5.8" href="https://shlomi-noach.github.io/blog/mysql/new-features-id-like-to-see-in-mysql-5-8" rel="bookmark">New features I’d like to see in MySQL 5.8</a>, here are <em>statements</em> I would like to see in MySQL 5.8:</p>
<ul>
<li><strong>ENABLE EVENTS;</strong><br>
When promoting a slave to master, I want to be able to enable all those events that are in <strong>SLAVESIDE_DISABLED</strong> state. Today I script an iteration over the events an constructing the <strong>ALTER EVENT…ENABLE</strong> statement one by one. Just activate those!</li>
<li><strong>SKIP GTID TRANSACTION;</strong><br>
I have a transaction on slave that I want to skip, and there’s GTID. The sequence of
<blockquote>
<pre>STOP SLAVE;
SET GTID_NEXT="...";
BEGIN;
COMMIT;
SET GTID_NEXT="AUTOMATIC";
START SLAVE;</pre>
</blockquote>
<p>is just something I don’t want to do. To compute the <strong>GTID_NEXT</strong>; to open a transaction; to use session variables; this may seem straightforward to import the above from a shell script, but calculating the next GTID is not entirely trivial; issuing the above from your programming language makes for a weird <em>“all these have to be in the same session AND you’re going to do a transaction meanwhile”</em>. With golang it’s actually a problem.<br>
Make it simple for me. I’m willing to do the <strong>STOP/START SLAVE</strong>.</p></li>
<li><strong>BINLOG ENTRY ‘<arbitrary text>’;</strong><br>
Very selfishly, I want to be able to inject a comment into the binary log, of arbitrary text. I want this comment to appear in SBR format, as if it were a DDL.<br>
My selfish reason: injection of Pseudo-GTID. But I can see various other use cases, such as application level injection of app-logic checkpointing; chef/glu injection of <em>“code deployed at this time”</em>; application injection of <em>“daily audit done to this point”</em>. This is too cool and too easy to skip.</li>
<li><strong>SHOW RELAY LOGS;</strong><br>
Similar to <strong>SHOW BINARY LOGS;</strong></li>
<li><strong>PURGE RELAY LOGS TO ‘…’;</strong><br>
Similar to <strong>PURGE BINARY LOGS TO ‘…’;</strong><br>
It’s time relay logs stopped being 2nd class citizens.</li>
<li><strong>SHOW NONBLOCKING [GLOBAL|SESSION] STATUS;</strong><br>
Issue a SHOW GLOBAL|SESSION STATUS query that only shows those variables for which it does not need to block. i.e. this is a safe, fast <em>“show me everything you’ve got that I won’t need to pay for”</em>.</li>
</ul>
<p>Yes, yes, <em>statements</em> are also features, I know.</p>
<p> </p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/new-statements-id-like-to-see-in-mysql-5-8#comments">1 Comment<span class="screen-reader-text"> on New statements I’d like to see in MySQL 5.8</span></a></span>	</footer>
</article>

<article id="post-7417" class="post-7417 post type-post status-publish format-standard hentry category-mysql tag-operations tag-opinions tag-replication">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/new-features-id-like-to-see-in-mysql-5-8" rel="bookmark">New features I’d like to see in MySQL 5.8</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/operations" rel="tag">operations</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/new-features-id-like-to-see-in-mysql-5-8" rel="bookmark"><time class="entry-date published updated" datetime="2015-10-07T10:02:16+02:00">October 7, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Following up on Morgan Tocker’s <a href="http://www.tocker.ca/2015/09/14/what-would-you-like-to-see-in-mysql-5-8.html">What would you like to see in MySQL 5.8?</a>, having attended and participated at the <a href="https://www.percona.com/live/europe-amsterdam-2015/sessions/mysql-58-dreaming-and-brainstorming">brainstorming at Percona Live Amsterdam</a>, and publishing this post while failing to comply with any of Morgan’s suggested media, these are the features I would like to see in MySQL <strong>5.8</strong>:</p>
<ul>
<li>Dynamicly enable/disable <strong>log-bin</strong> and <strong>log-slave-updates</strong><br>
Today, when changing chef/puppet role of a server from a simple slave to an intermediate master and vice versa, a MySQL restart is required. This is a very big pain which makes replication automation complex, not to mention warmup times.</li>
<li>“<strong><a href="http://man7.org/linux/man-pages/man1/nice.1.html">nice</a></strong>“.<br>
I want to be able to execute a query that is <em>nice, i.e</em> has lower priority; will not consume all resources; will stall/throttle so as to allow other queries to complete. Luis asked and I said this could be on a per statement basis, e.g. add a <strong>SQL_NICE</strong> query hint. But I’m unsure that would be the correct behavior. It also makes sense to do so on a per connection basis (perhaps provide connection attributed to hint <em>niceness</em>?).</li>
<li>Online-<em>ier</em> <strong>ALTER TABLE</strong>. I would in particular want it to apply the <em>nice</em> feature, above. Otherwise throttle by user defined metrics.</li>
<li>Online-<em>ier</em> <strong>ALTER TABLE</strong> in replication stream.  Can the slaves run the <strong>ALTER</strong> statement in parallel?</li>
<li><strong>Re-Group Commit</strong>: in MTS, and when intermediate masters involved, copy+paste the group commit as applied on master as working downstream. I suspect this is easily achievable. The result: same parallelism for replicating slaves in all levels, whether they replicate directly from master or from 2nd, 3rd tier intermediate masters. Today parallelism decreases as we go downstream.</li>
<li>Global user-defined-variables. I want to be able to define arbitrary (global) variables that I can later query via <strong>SELECT @@global.arbitrary</strong>. This would be similar to HTML <strong>5</strong>‘s <strong>“data-*”</strong> attributes. I often wish I could tell & ask MySQL my puppet role; or the server status (is it live? Is it offline? Does it belong to a specific pool? etc.). Similar to <strong>“loose-*”</strong> syntax, this could be a <strong>“data-*”</strong> or <strong>“user-*”</strong> name prefix system.</li>
</ul>
<p>I will follow up on new <em>statements</em> I would like to see in MySQL <strong>5.8</strong>.</p>
<p>The brainstorming session at PerconaLive, I should note, was pure joy, and apart from getting two nice furry dolphins I enjoyed the engagement, the diversity of ideas, and the fact Oracle engineers (Mark in particular) were very busy taking notes or otherwise openly discussing the viability of some requested features.</p>
<p> </p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/new-features-id-like-to-see-in-mysql-5-8#comments">5 Comments<span class="screen-reader-text"> on New features I’d like to see in MySQL 5.8</span></a></span>	</footer>
</article>

<article id="post-7409" class="post-7409 post type-post status-publish format-standard hentry category-mysql tag-community tag-perconalive">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-amsterdam-community-dinner-last-updates" rel="bookmark">Percona Live Amsterdam: Community Dinner, last updates</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/community" rel="tag">community</a><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-amsterdam-community-dinner-last-updates" rel="bookmark"><time class="entry-date published" datetime="2015-09-18T14:14:58+02:00">September 18, 2015</time><time class="updated" datetime="2015-09-18T15:10:12+02:00">September 18, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Registration for the Percona Live Amsterdam conference <a href="https://www.eventbrite.com/e/community-dinner-bookingcom-tickets-17901675393">community dinner at Booking.com</a> is ongoing. Please note the following:</p>
<ul>
<li>By Monday noon the kitchen will make the necessary purchasing. At this time we will have to give them a number, which we will not exceed.</li>
<li>The number we will give them is <strong>$(number of registrants Monday 12:00) + X</strong>, <strong>X</strong> being a constant</li>
<li>Those <strong>X</strong> tickets will be available until <strong>Tuesday 12:00</strong></li>
<li>After which the registration is closed. We wish to avoid throwing away food, on one hand, as well as respect those who have reserved place and avoid running out of food, on the other.</li>
</ul>
<p>Entry to the <a href="https://goo.gl/maps/06oOA">Booking.com building</a> will be made available via Security personnel to those people who will be listed by the eventbrite registration. We will not be able to have last moment registrants; we will not collect money at the entrance; no credit cards accepted at the doorway.</p>
<p>If you’d like to attend the community dinner, please <a href="https://www.eventbrite.com/e/community-dinner-bookingcom-tickets-17901675393">register</a> now!</p>
<p>FYI Percona has arranged for boats to make the travel from the conference venue to Booking.com (no registration required, but room limited on those boats as well).</p>
<p>Now ain’t I being dramatic here. <em>So happy</em> to see everyone here in Amsterdam in a few days!</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-amsterdam-community-dinner-last-updates#respond">Leave a Comment<span class="screen-reader-text"> on Percona Live Amsterdam: Community Dinner, last updates</span></a></span>	</footer>
</article>

<article id="post-7396" class="post-7396 post type-post status-publish format-standard hentry category-mysql tag-orchestrator tag-perconalive">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-percona-live-amsterdam-orchestrator" rel="bookmark">Speaking at Percona Live Amsterdam: Orchestrator</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-percona-live-amsterdam-orchestrator" rel="bookmark"><time class="entry-date published" datetime="2015-09-15T09:27:38+02:00">September 15, 2015</time><time class="updated" datetime="2015-09-26T21:42:43+02:00">September 26, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>In a week’s time I’ll be speaking at <a href="https://www.percona.com/live/europe-amsterdam-2015/">Percona Live Amsterdam</a>. I will be presenting:</p>
<blockquote><p><a href="https://www.percona.com/live/europe-amsterdam-2015/sessions/managing-and-visualizing-your-replication-topologies-orchestrator">Managing and Visualizing your replication topologies with Orchestrator<br>
</a>23 September 4:20PM<a href="https://www.percona.com/live/europe-amsterdam-2015/sessions/managing-and-visualizing-your-replication-topologies-orchestrator"><br>
</a></p></blockquote>
<p>This talk will present <strong><a href="https://github.com/outbrain/orchestrator">orchestrator</a></strong>, on which I’ve been working for the last year and a half, originally at <a href="http://www.outbrain.com">Outbrain</a> and now at <a href="https://workingatbooking.com/">Booking.com</a>.</p>
<p>I will show off what <em>orchestrator</em> can do to manage your replication topologies. From visualization, through topology refactoring to automated crash recoveries, <em>orchestrator</em> today plays a key role at Booking.com infrastructure, at scale (oh I love using these words).</p>
<p>You can expect an outrageous demo, a visual walkthrough, some command line examples, and a lot on the logic and mechanisms behind <em>orchestrator</em>. I will present the difficult problems <em>orchestrator</em> covers.</p>
<p><em>orchestrator</em> is free and open source, and is built to be as generic as possible; it is known to be used by multiple well known companies these days, so please join the party.</p>
<p>With that, I conclude with the almighty motto: <a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-percona-live-amsterdam-orchestrator#more-7396" class="more-link">Continue reading »<span class="screen-reader-text"> “Speaking at Percona Live Amsterdam: Orchestrator”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-percona-live-amsterdam-orchestrator#comments">6 Comments<span class="screen-reader-text"> on Speaking at Percona Live Amsterdam: Orchestrator</span></a></span>	</footer>
</article>

<article id="post-7392" class="post-7392 post type-post status-publish format-standard hentry category-mysql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-2015" rel="bookmark">Three wishes for a new year</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-2015" rel="bookmark"><time class="entry-date published updated" datetime="2015-09-14T08:43:20+02:00">September 14, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<div>
<p>Another new year by Jewish calendar. What do I wish for the following year?</p>
<ol>
<li>World peace</li>
<li>Good health to all</li>
<li>Decent, operations friendly built in online table refactoring</li>
</ol>
<p>The existing online ALTER TABLE solution is still not there. It does not take into consideration the load on the server. In replication stream it’s serialized just as any other statement. It’s not easy to stop/revert in case of problem.</p>
<p>The existing online-schema-change scripts are still based on <a href="https://shlomi-noach.github.io/blog/mysql/online-alter-table-now-available-in-openark-kit">my 6-year old original solution</a>, I’m proud to say, but the technology used, i.e. triggers, hasn’t really evolved since then. We are still fighting deadlocks induced by the use of triggers and/or concurrent copying of data. There are still limitations on use of foreign keys.</p>
<p>None of my wishes in previous years [<a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year">2010</a>], [<a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-2">2011</a>], [<a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-201">2012</a>], [<a href="https://shlomi-noach.github.io/blog/mysql/three-wished-for-a-new-year-2013">2013</a>], <a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-3">[2014]</a> came true (and mostly gone worse). I’m still willing to settle for two out of three.</p>
</div>
<div class="sharedaddy sd-sharing-enabled"></div>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-2015#comments">1 Comment<span class="screen-reader-text"> on Three wishes for a new year</span></a></span>	</footer>
</article>

	<nav class="navigation posts-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/6">Older posts</a></div><div class="nav-next"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/4">Newer posts</a></div></div>
	</nav>
	</main>


	<footer id="colophon" class="site-footer">
		<div class="site-info">
			<a href="https://wordpress.org/">
				Powered by WordPress			</a>
			<span class="sep"> | </span>
				Theme: <a href="http://openark.org">openark-primer</a> by <a href="http://underscores.me/">Underscores.me</a>.		</div>
	</footer>
</div>

	<div style="display:none">
	</div>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSql.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://shlomi-noach.github.io/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = "https://shlomi-noach.github.io/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeEclipse.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = true;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script>
var pollsL10n = {"ajax_url":"https:\/\/shlomi-noach.github.io\/blog\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-js.js"></script>
<script src="https://secure.gravatar.com/js/gprofiles.js?ver=2020Junaa"></script>
<script>
var WPGroHo = {"my_hash":""};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/modules/wpgroho.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/navigation.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202024.js" async="async" defer></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.2.1',blog:'32412571',post:'0',tz:'2',srv:'code.openark.org'} ]);
	_stq.push([ 'clickTrackerInit', '32412571', '0' ]);
</script>

</body>
</html>
