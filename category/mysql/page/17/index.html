<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	<title>MySQL – Page 17 – code.openark.org</title>
<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//s.w.org">



<link rel="stylesheet" id="wp-block-library-css" href="https://shlomi-noach.github.io/blog/wp-includes/css/dist/block-library/style.min.css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wp-polls-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-css.css" media="all">
<style id="wp-polls-inline-css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="openark-primer-style-css" href="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/style.css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/css/jetpack.css" media="all">
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script>



<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel="dns-prefetch" href="//v0.wordpress.com">


<meta property="og:type" content="website">
<meta property="og:title" content="MySQL – Page 17 – code.openark.org">
<meta property="og:url" content="https://shlomi-noach.github.io/blog/category/mysql">
<meta property="og:description" content="MySQL related posts">
<meta property="og:site_name" content="code.openark.org">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">


<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(242,101,34,.88);}</style></head>

<body class="archive paged category category-mysql category-5 paged-17 category-paged-17 hfeed no-sidebar">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
							<p class="site-title"><a href="https://shlomi-noach.github.io/blog/" rel="home">code.openark.org</a></p>
								<p class="site-description">Blog by Shlomi Noach</p>
			
			<nav id="site-navigation" class="main-navigation">
				<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">primary-menu</button>
				<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-8109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8109"><a href="https://shlomi-noach.github.io/blog/archives">archives</a></li>
<li id="menu-item-8050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8050"><a href="https://shlomi-noach.github.io/blog/presentations">presentations</a></li>
<li id="menu-item-8055" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8055"><a href="https://shlomi-noach.github.io/blog/about">about</a></li>
<li id="menu-item-8071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8071"><a href="https://github.com/shlomi-noach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li>
<li id="menu-item-8074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8074"><a href="https://www.linkedin.com/in/shlominoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li>
<li id="menu-item-8072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8072"><a href="https://twitter.com/ShlomiNoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></li>
<li id="menu-item-8073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8073"><a href="https://shlomi-noach.github.io/blog/feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-12.832 20c-1.197 0-2.168-.969-2.168-2.165s.971-2.165 2.168-2.165 2.167.969 2.167 2.165-.97 2.165-2.167 2.165zm5.18 0c-.041-4.029-3.314-7.298-7.348-7.339v-3.207c5.814.041 10.518 4.739 10.561 10.546h-3.213zm5.441 0c-.021-7.063-5.736-12.761-12.789-12.792v-3.208c8.83.031 15.98 7.179 16 16h-3.211z"></path></svg></a></li>
</ul></div>			</nav>
		</div>
	</header>

	<main id="primary" class="site-main">

		
			<header class="page-header">
				<h1 class="page-title">Category: MySQL</h1><div class="archive-description"><p>MySQL related posts</p>
</div>			</header>

			
<article id="post-5157" class="post-5157 post type-post status-publish format-standard hentry category-mysql tag-bulk-operations tag-common_schema tag-indexing tag-queryscript tag-scripts">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/purging-old-rows-with-queryscript-three-use-cases" rel="bookmark">Purging old rows with QueryScript: three use cases</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/bulk-operations" rel="tag">Bulk operations</a><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/indexing" rel="tag">Indexing</a><a href="https://shlomi-noach.github.io/blog/tag/queryscript" rel="tag">QueryScript</a><a href="https://shlomi-noach.github.io/blog/tag/scripts" rel="tag">scripts</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/purging-old-rows-with-queryscript-three-use-cases" rel="bookmark"><time class="entry-date published" datetime="2012-11-14T11:15:35+02:00">November 14, 2012</time><time class="updated" datetime="2012-11-14T11:20:08+02:00">November 14, 2012</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Problem: you need to purge old rows from a table. This may be your weekly/monthly cleanup task. The table is large, the amount of rows to be deleted is large, and doing so in one big <strong>DELETE</strong> is too heavy.</p>
<p>You can use <a href="http://openarkkit.googlecode.com/svn/trunk/openarkkit/doc/html/oak-chunk-update.html">oak-chunk-update</a> or <a href="http://www.percona.com/doc/percona-toolkit/2.1/pt-archiver.html">pt-archiver</a> to accomplish the task. You can also use server side scripting with <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/query_script.html">QueryScript</a>, offering a very simple syntax with no external scripting, dependencies and command line options.</p>
<p>I wish to present three cases of row deletion, with three different solutions. In all cases we assume some <strong>TIMESTAMP</strong> column exists in table, by which we choose to purge the row. In all cases we assume we wish to purge rows older than <strong>1</strong> month.</p>
<p>We assume the naive query is this:</p>
<blockquote>
<pre>DELETE FROM my_schema.my_table WHERE row_timestamp < CURDATE() - INTERVAL 1 MONTH</pre>
</blockquote>
<h4>Case 1: TIMESTAMP column is indexed</h4>
<p>I almost always index a timestamp column, if only for being able to quickly purge data (but usually also to slice data by date). In this case where the column is indexed, it’s very easy to figure out which rows are older than <strong>1</strong> month.</p>
<p>We break the naive query into smaller parts, and execute these in sequence: <a href="https://shlomi-noach.github.io/blog/mysql/purging-old-rows-with-queryscript-three-use-cases#more-5157" class="more-link">Continue reading »<span class="screen-reader-text"> “Purging old rows with QueryScript: three use cases”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/purging-old-rows-with-queryscript-three-use-cases#respond">Leave a Comment<span class="screen-reader-text"> on Purging old rows with QueryScript: three use cases</span></a></span>	</footer>
</article>

<article id="post-5539" class="post-5539 post type-post status-publish format-standard hentry category-mysql tag-common_schema tag-open-source tag-partitioning tag-queryscript tag-security">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/common_schema-1-2-security-partition-management-processes-queryscript-goodies" rel="bookmark">common_schema 1.2: security, partition management, processes, QueryScript goodies</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/partitioning" rel="tag">partitioning</a><a href="https://shlomi-noach.github.io/blog/tag/queryscript" rel="tag">QueryScript</a><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/common_schema-1-2-security-partition-management-processes-queryscript-goodies" rel="bookmark"><time class="entry-date published updated" datetime="2012-11-13T14:25:38+02:00">November 13, 2012</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p><a href="http://code.google.com/p/common-schema">common_schema</a> <strong>1.2</strong> is released! This version comes shortly after <strong>1.1</strong>, yet contains quite a few interesting goodies:</p>
<ul>
<li>Account blocking</li>
<li>Security audit</li>
<li>RANGE partition management</li>
<li>Slave status</li>
<li>Better blocking and idle transaction management</li>
<li><em>QueryScript </em>goodies:
<ul>
<li>echo, report</li>
<li>while-otherwise statement; foreach-otherwise statement</li>
<li>Better variable scope handling</li>
<li>Complete support for variable expansion</li>
<li>Transaction support within QueryScript</li>
</ul>
</li>
<li>More summary info and SQL statements in processlist-related views</li>
</ul>
<p>A closer look at these follows:</p>
<h4>Account blocking</h4>
<p>A new view called <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/sql_accounts.html"><strong>sql_accounts</strong></a>, inspired by <a href="http://openarkkit.googlecode.com/svn/trunk/openarkkit/doc/html/oak-block-account.html">oak-block-account</a> (also see <a href="https://shlomi-noach.github.io/blog/mysql/blocking-user-accounts">here</a> and <a href="https://shlomi-noach.github.io/blog/mysql/pop-quiz-what-is-the-most-basic-privilege-an-account-can-be-assigned-with">here</a>) provides with the means of blocking use accounts (and releasing them, of course) without revoking their privileges. It offers the SQL statements to block an account (by modifying its password in a symmetric way) and to release an account (by modifying its password back to normal). It really works like a charm. Together with <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/killall.html">killall()</a> and <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/sql_grants.html">sql_accounts</a> this gives the administrator great control over accounts.</p>
<h4>Security audit</h4>
<p>Imported from <a href="http://openarkkit.googlecode.com/svn/trunk/openarkkit/doc/html/oak-security-audit.html">openark kit</a>, and implemented via <em>QueryScript</em>, the <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/security_audit.html"><strong>security_audit()</strong></a> procedure will audit your accounts, passwords and general settings to find problems, pitfalls and security hazards. I will write more on this later.</p>
<h4>RANGE partition management</h4>
<p>The <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/sql_range_partitions.html"><strong>sql_range_partitions</strong></a> view manages your <strong>RANGE</strong> and <strong>RANGE COLUMNS</strong> partitioned tables by providing with the SQL statements to drop oldest partitions and to create the next (in sequence) partitions. See my <a href="https://shlomi-noach.github.io/blog/mysql/your-magical-range-partitioning-maintenance-query">earlier post</a>. <a href="https://shlomi-noach.github.io/blog/mysql/common_schema-1-2-security-partition-management-processes-queryscript-goodies#more-5539" class="more-link">Continue reading »<span class="screen-reader-text"> “common_schema 1.2: security, partition management, processes, QueryScript goodies”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/common_schema-1-2-security-partition-management-processes-queryscript-goodies#comments">2 Comments<span class="screen-reader-text"> on common_schema 1.2: security, partition management, processes, QueryScript goodies</span></a></span>	</footer>
</article>

<article id="post-5735" class="post-5735 post type-post status-publish format-standard hentry category-mysql tag-bugs tag-opinions">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/my-take-on-privatized-mysql-security-bugs" rel="bookmark">My take on privatized MySQL security bugs</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/bugs" rel="tag">Bugs</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/my-take-on-privatized-mysql-security-bugs" rel="bookmark"><time class="entry-date published" datetime="2012-11-08T08:31:16+02:00">November 8, 2012</time><time class="updated" datetime="2012-11-08T08:31:35+02:00">November 8, 2012</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>A couple weeks ago I submitted <a href="http://bugs.mysql.com/bug.php?id=67315">Bug #67315: Crashing server by stored function referencing user defined variable in query</a>. If you press that link, you can’t see the bug (though I can as I submitted it).</p>
<p>This is due to Oracle’s policy for security-related bugs. Tomas Ulin, Vice President MySQL Development at Oracle , was kind enough to discuss Oracle’s policy with me, and these are the key points as I understand them:</p>
<p>Oracle’s basic approach is to protect its customers. By publicizing security-bugs, Oracle’s customers are vulnerable to black hatters attacks. Therefore Oracle takes measures and privatizes security bugs (crashing bugs can be treated as security bugs since a crash is a form of Denial of Service).</p>
<p>But what of a bug reported in a RC version, as was in my case? There is no strict policy there, according to Ulin. However with a version this close to GA, it is uncertain that a specific bug would be fixed in time. It may happen, then, that a bug would find itself well into GA releases, thereby exposing customers to attacks.</p>
<p>Moreover, GA bugs that are already fixed may remain private, as customers will not necessarily haste to upgrade their working servers for every bug fix.</p>
<h4>My take</h4>
<p>Bug privatization has disadvantages, as well: <a href="https://shlomi-noach.github.io/blog/mysql/my-take-on-privatized-mysql-security-bugs#more-5735" class="more-link">Continue reading »<span class="screen-reader-text"> “My take on privatized MySQL security bugs”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/my-take-on-privatized-mysql-security-bugs#comments">2 Comments<span class="screen-reader-text"> on My take on privatized MySQL security bugs</span></a></span>	</footer>
</article>

<article id="post-5445" class="post-5445 post type-post status-publish format-standard hentry category-mysql tag-sql tag-syntax">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/pop-quiz-funny-syntax" rel="bookmark">Pop quiz: funny syntax</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a><a href="https://shlomi-noach.github.io/blog/tag/syntax" rel="tag">Syntax</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/pop-quiz-funny-syntax" rel="bookmark"><time class="entry-date published updated" datetime="2012-11-05T20:22:15+02:00">November 5, 2012</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>The following questions are of little importance, yet I find them entertaining. I stumbled upon these while developing QueryScript.</p>
<p>Can you guess the results of the following statements?</p>
<h4>Pop quiz 1</h4>
<blockquote>
<pre>SET @x := 7;
SELECT ++@x;</pre>
</blockquote>
<p>What is the computation result? What will be the value of <strong>@x</strong>?</p>
<h4>Pop quiz 2</h4>
<blockquote>
<pre>SET @ := 4;
SELECT @ + @'' + @``</pre>
</blockquote>
<p>What is the computation result?</p>
<h4>Pop quiz 3</h4>
<blockquote>
<pre>SET @a := 2;
SELECT @a = @'a' = @`a`</pre>
</blockquote>
<p>Do we get <strong>TRUE</strong> or <strong>FALSE</strong>? When? <a href="https://shlomi-noach.github.io/blog/mysql/pop-quiz-funny-syntax#more-5445" class="more-link">Continue reading »<span class="screen-reader-text"> “Pop quiz: funny syntax”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/pop-quiz-funny-syntax#comments">1 Comment<span class="screen-reader-text"> on Pop quiz: funny syntax</span></a></span>	</footer>
</article>

<article id="post-5710" class="post-5710 post type-post status-publish format-standard hentry category-mysql tag-new-features tag-opinions">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/further-experiments-with-mysql-5-6-7-rc-submit-your-bugs" rel="bookmark">Further experiments with MySQL 5.6.7-RC: submit your bugs</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/new-features" rel="tag">New Features</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/further-experiments-with-mysql-5-6-7-rc-submit-your-bugs" rel="bookmark"><time class="entry-date published updated" datetime="2012-10-22T07:52:40+02:00">October 22, 2012</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Here’s the background: I’m testing many features of MySQL <strong>5.6.7-RC</strong> due to two reasons:</p>
<ul>
<li>I’m verifying my <a href="http://code.google.com/p/common-schema">common_schema</a> installs and works properly on <strong>5.6</strong></li>
<li>I promised I would present a <strong>45</strong> minute <em>“what’s new in MySQL 5.6”</em> seminar in the upcoming <a href="http://www.oracleweek.com/">OracleWeek (Israel)</a></li>
</ul>
<p>In the case of <em>common_schema</em>, I have managed to find one <a href="http://bugs.mysql.com/67313">weird bug</a> (a behavior regression from <strong>5.5</strong>) and one <a href="http://bugs.mysql.com/67315">server-crashing bug</a>, by merely running the project’s<strong></strong> tests, known to pass on <strong>5.1</strong> and <strong>5.5</strong> (and not utilizing any <strong>5.6</strong> features).</p>
<p>In the case of my presentation, I’m getting acquainted with new syntax and functionality, and am getting <a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features">unexpected results</a>. I’ve hit replication issues and <a href="https://shlomi-noach.github.io/blog/mysql/innodb-ddl-kudos-to-quick-responders-on-bugs-mysql-com">locking issues</a> in online DDL.</p>
<p>If I am able to find these bugs within a few hours of experimenting & testing, then it is safe to assume we can extrapolate to many more bugs. This is not surprising; <strong>5.6</strong> boasts some <strong>120</strong> new features (I didn’t actually count them). Of course they would introduce new bugs.</p>
<p>The moral is this: if you’re interested in <strong>5.6</strong> as I am – and there’s a lot to wait for – please consider experimenting with it, and report as many bugs to <a href="http://bugs.mysql.com/">bugs.mysql.com</a> as possible. Reporting bugs is the user’s authoritative way of improving an open source product and pushing towards a stable release. Provide your feedback today!</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/further-experiments-with-mysql-5-6-7-rc-submit-your-bugs#comments">8 Comments<span class="screen-reader-text"> on Further experiments with MySQL 5.6.7-RC: submit your bugs</span></a></span>	</footer>
</article>

<article id="post-5696" class="post-5696 post type-post status-publish format-standard hentry category-mysql tag-innodb tag-new-features">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/innodb-ddl-kudos-to-quick-responders-on-bugs-mysql-com" rel="bookmark">InnoDB DDL: kudos to quick responders on bugs.mysql.com</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/new-features" rel="tag">New Features</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/innodb-ddl-kudos-to-quick-responders-on-bugs-mysql-com" rel="bookmark"><time class="entry-date published updated" datetime="2012-10-18T18:55:29+02:00">October 18, 2012</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Continuing my <a href="https://shlomi-noach.github.io/blog/mysql/experimenting-with-5-6-innodb-online-ddl-bugs-included">experiments with 5.6 InnoDB online DDL</a>, a bug which I’ve opened, and another which I commented on were quickly answered and explained by the Oracle/MySQL team.</p>
<p>On both accounts I’m happy to acknowledge the issue is resolved; in both cases I failed to produce a real bug scenario. Good lesson. <em>Kudos for quick and informative responses!</em></p>
<p>What’s left of my experiment, then? Still a lot to check.</p>
<p>I am mainly still confused with which operations exactly can use <strong>LOCK=NONE</strong> (allowing for updated to table while <strong>ALTER</strong>ing). So far I am only able to produce <strong>ALTER</strong>s with <strong>LOCK=SHARED</strong>, meaning table is readable, but cannot be updated.</p>
<p>I will want to test speeds. I’ve so far been content with slow response times for queries over altered tables. How well will that endure under heavy load?</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/innodb-ddl-kudos-to-quick-responders-on-bugs-mysql-com#comments">5 Comments<span class="screen-reader-text"> on InnoDB DDL: kudos to quick responders on bugs.mysql.com</span></a></span>	</footer>
</article>

<article id="post-5673" class="post-5673 post type-post status-publish format-standard hentry category-mysql tag-innodb tag-new-features tag-openark-kit tag-opinions tag-scripts">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/experimenting-with-5-6-innodb-online-ddl-bugs-included" rel="bookmark">Experimenting with 5.6 InnoDB Online DDL (bugs included)</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/new-features" rel="tag">New Features</a><a href="https://shlomi-noach.github.io/blog/tag/openark-kit" rel="tag">openark kit</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/scripts" rel="tag">scripts</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/experimenting-with-5-6-innodb-online-ddl-bugs-included" rel="bookmark"><time class="entry-date published" datetime="2012-10-18T14:41:46+02:00">October 18, 2012</time><time class="updated" datetime="2012-10-18T18:56:08+02:00">October 18, 2012</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>MySQL <strong>5.6</strong> offers the groundbreaking online DDL operations for InnoDB. Most common use cases will enjoy this feature, and the need for <a href="http://openarkkit.googlecode.com/svn/trunk/openarkkit/doc/html/oak-online-alter-table.html">online alter table</a> scripts will decrease. This is a killer feature!</p>
<p>I’ve put this new feature to the usability test. How did it go? Not too well, I’m afraid.</p>
<p>[Updates to this text inline], also see <a href="https://shlomi-noach.github.io/blog/mysql/innodb-ddl-kudos-to-quick-responders-on-bugs-mysql-com">this followup</a>.</p>
<h4>sakila & DDL</h4>
<p><a href="http://dev.mysql.com/doc/sakila/en/index.html">sakila</a> is still a very useful database. I say “still” because it is not very large, and computing power is getting stronger; yet on my laptop some operations can still take many seconds to complete, which is just fine for my tests.</p>
<p>Sakila tables are mostly InnoDB, and rental being the largest, I do:</p>
<blockquote>
<pre>node1 (sakila) > <strong>alter table sakila.rental engine=InnoDB;</strong>
Query OK, 16044 rows affected (<strong>6.94</strong> sec)
Records: 16044  Duplicates: 0  Warnings: 0</pre>
</blockquote>
<p>So what can be executed during these <strong>6.94</strong> seconds? In a second terminal, I try the following: <a href="https://shlomi-noach.github.io/blog/mysql/experimenting-with-5-6-innodb-online-ddl-bugs-included#more-5673" class="more-link">Continue reading »<span class="screen-reader-text"> “Experimenting with 5.6 InnoDB Online DDL (bugs included)”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/experimenting-with-5-6-innodb-online-ddl-bugs-included#comments">8 Comments<span class="screen-reader-text"> on Experimenting with 5.6 InnoDB Online DDL (bugs included)</span></a></span>	</footer>
</article>

<article id="post-5641" class="post-5641 post type-post status-publish format-standard hentry category-mysql tag-conference tag-perconalive">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-mysql-conference-and-expo-2013-call-for-papers" rel="bookmark">Percona Live MySQL Conference and Expo 2013, Call for Papers</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/conference" rel="tag">conference</a><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-mysql-conference-and-expo-2013-call-for-papers" rel="bookmark"><time class="entry-date published updated" datetime="2012-10-16T14:38:48+02:00">October 16, 2012</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I’m honored to accept the role of conference chairman in the upcoming <a href="http://www.percona.com/live/mysql-conference-2013/">Percona Live MySQL Conference and Expo</a>, April 22th-25th, 2013, Santa Clara, CA. Here are a few administrative announcements:</p>
<h4>Call for Papers</h4>
<p><a href="http://www.percona.com/live/mysql-conference-2013/node/add/session">Call for papers</a> is extended until <strong>Oct 31st</strong>. We’ve already received a good number of submissions, but wish to provide with another chance for latecomers. Now is a good time to submit!</p>
<p>The committee will begin the long reviewing process shortly.</p>
<h4>Committee</h4>
<p>Members of the reviewing committee are:</p>
<ul>
<li>Roland Bouman (Pentaho)</li>
<li>Ronald Bradford (Continuent)</li>
<li>Laine Campbell (PalominoDB)</li>
<li>Colin Charles (MontyProgram)</li>
<li>Jeremey Cole (Twitter)</li>
<li>Patrick Galbraith (HP)</li>
<li>Henrik Ingo (Nokia)</li>
<li>Jay Janssen (Percona)</li>
<li>Giuseppe Maxia (Continuent)</li>
<li>Domas Mituzas (Facebook)</li>
<li>Ivan Zoratti (SkySQL)</li>
</ul>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/percona-live-mysql-conference-and-expo-2013-call-for-papers#more-5641" class="more-link">Continue reading »<span class="screen-reader-text"> “Percona Live MySQL Conference and Expo 2013, Call for Papers”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-mysql-conference-and-expo-2013-call-for-papers#comments">1 Comment<span class="screen-reader-text"> on Percona Live MySQL Conference and Expo 2013, Call for Papers</span></a></span>	</footer>
</article>

<article id="post-5651" class="post-5651 post type-post status-publish format-standard hentry category-mysql tag-configuration tag-innodb tag-new-features tag-opinions tag-replication">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features" rel="bookmark">Thoughts on MySQL 5.6 new replication features</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/configuration" rel="tag">Configuration</a><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/new-features" rel="tag">New Features</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features" rel="bookmark"><time class="entry-date published updated" datetime="2012-10-15T09:50:39+02:00">October 15, 2012</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>After playing a little bit with MySQL <strong>5.6</strong> (RC), and following closely on Giuseppe’s <a href="http://datacharmer.blogspot.co.il/2012/08/mysql-56-replication-gotchas-and-bugs.html">MySQL 5.6 replication gotchas (and bugs)</a>, I was having some thoughts.</p>
<p>These are shared for a few reasons:</p>
<ul>
<li>Maybe I didn’t understand it well, and someone could correct me</li>
<li>Or I understood it well, and my input could be of service to the developers</li>
<li>Or it could be of service to the users</li>
</ul>
<h4>InnoDB tables in mysql schema</h4>
<p>The introduction of InnoDB tables in <strong>mysql</strong> makes for crash-safe replication information: the exact replication position (master log file+pos, relay log file+pos etc.) is updated on InnoDB tables; with <strong>innodb_flush_logs_at_trx_commit=1</strong> this means replication status is durable and consistent with server data. This is great news!</p>
<p>However, the introduction of InnoDB tables to the mysql schema also breaks some common usage on installation and setup of MySQL servers. You can’t just drop your <strong>ib_data1</strong> file upon dump+restore, since it also contains internal data. Giuseppe outlines the workaround for that.</p>
<p>I was thinking: would it be possible to have a completely different tablespace for MySQL’s internal InnoDB tables? That could be a single tablespace file (who cares about file-per-table on a few internal tables). And I’m throwing an idea without being intimate with the internals: you know how it is possible to span the shared tablespace across multiple files, as in: <a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features#more-5651" class="more-link">Continue reading »<span class="screen-reader-text"> “Thoughts on MySQL 5.6 new replication features”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features#comments">12 Comments<span class="screen-reader-text"> on Thoughts on MySQL 5.6 new replication features</span></a></span>	</footer>
</article>

<article id="post-5347" class="post-5347 post type-post status-publish format-standard hentry category-mysql tag-common_schema tag-partitioning">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/your-magical-range-partitioning-maintenance-query" rel="bookmark">Your magical RANGE partitioning maintenance query</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/partitioning" rel="tag">partitioning</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/your-magical-range-partitioning-maintenance-query" rel="bookmark"><time class="entry-date published updated" datetime="2012-10-09T06:44:12+02:00">October 9, 2012</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>If you use <strong>RANGE</strong> (or <strong>RANGE COLUMNS</strong>) partitioning, and in particular when partitioning by date/time, then your are subject to the following questions: how and when do you create the “next” partition? How and when do you drop your older partitions?</p>
<p>Many people use in-house scripting to do that, and Giuseppe Maxia wrote <a href="http://datacharmer.blogspot.co.il/2008/12/partition-helper-improving-usability.html">Partition Helper</a>. But I would like to take you one step forward, and provide with a <em>query</em> (based on views) which automagically understands which new partition you want to create, and provides you with the statement to do so. It looks somewhat like this (a demo follows later on):</p>
<blockquote>
<pre>mysql> SELECT * FROM <strong>sql_range_partitions</strong> \G
*************************** 1. row ***************************
            table_schema: test
              table_name: city
<strong>sql_drop_first_partition</strong>: alter table `test`.`city` drop partition `p3`
  <strong>sql_add_next_partition</strong>: alter table `test`.`city` add partition (partition `p_20160101000000` values less than (736329) /* 2016-01-01 00:00:00 */ )
*************************** 2. row ***************************
            table_schema: test
              table_name: quarterly_report_status
<strong>sql_drop_first_partition</strong>: alter table `test`.`quarterly_report_status` drop partition `p3`
  <strong>sql_add_next_partition</strong>: alter table `test`.`quarterly_report_status` reorganize partition `p_maxvalue` into (partition `p_20110401000000` values less than (1301608800) /* 2011-04-01 00:00:00 */ , partition p_maxvalue values less than MAXVALUE)</pre>
</blockquote>
<h4>A closer look at why this is magic</h4>
<p>This query just gave you the <strong>DROP PARTITION</strong> and <strong>ADD PARTITION</strong> for all tables in your databases that use a <strong>RANGE</strong> partitioning scheme. But, consider: <a href="https://shlomi-noach.github.io/blog/mysql/your-magical-range-partitioning-maintenance-query#more-5347" class="more-link">Continue reading »<span class="screen-reader-text"> “Your magical RANGE partitioning maintenance query”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/your-magical-range-partitioning-maintenance-query#comments">2 Comments<span class="screen-reader-text"> on Your magical RANGE partitioning maintenance query</span></a></span>	</footer>
</article>

	<nav class="navigation posts-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/18">Older posts</a></div><div class="nav-next"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/16">Newer posts</a></div></div>
	</nav>
	</main>


	<footer id="colophon" class="site-footer">
		<div class="site-info">
			<a href="https://wordpress.org/">
				Powered by WordPress			</a>
			<span class="sep"> | </span>
				Theme: <a href="http://openark.org">openark-primer</a> by <a href="http://underscores.me/">Underscores.me</a>.		</div>
	</footer>
</div>

	<div style="display:none">
	</div>
<script>
var pollsL10n = {"ajax_url":"https:\/\/shlomi-noach.github.io\/blog\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-js.js"></script>
<script src="https://secure.gravatar.com/js/gprofiles.js?ver=2020Junaa"></script>
<script>
var WPGroHo = {"my_hash":""};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/modules/wpgroho.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/navigation.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202024.js" async="async" defer></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.2.1',blog:'32412571',post:'0',tz:'2',srv:'code.openark.org'} ]);
	_stq.push([ 'clickTrackerInit', '32412571', '0' ]);
</script>

</body>
</html>
