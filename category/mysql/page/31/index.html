<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	<title>MySQL – Page 31 – code.openark.org</title>
<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//s.w.org">



<link rel="stylesheet" id="wp-block-library-css" href="https://shlomi-noach.github.io/blog/wp-includes/css/dist/block-library/style.min.css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wp-polls-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-css.css" media="all">
<style id="wp-polls-inline-css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="openark-primer-style-css" href="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/style.css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/css/jetpack.css" media="all">
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script>



<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel="dns-prefetch" href="//v0.wordpress.com">


<meta property="og:type" content="website">
<meta property="og:title" content="MySQL – Page 31 – code.openark.org">
<meta property="og:url" content="https://shlomi-noach.github.io/blog/category/mysql">
<meta property="og:description" content="MySQL related posts">
<meta property="og:site_name" content="code.openark.org">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">


<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(242,101,34,.88);}</style></head>

<body class="archive paged category category-mysql category-5 paged-31 category-paged-31 hfeed no-sidebar">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
							<p class="site-title"><a href="https://shlomi-noach.github.io/blog/" rel="home">code.openark.org</a></p>
								<p class="site-description">Blog by Shlomi Noach</p>
			
			<nav id="site-navigation" class="main-navigation">
				<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">primary-menu</button>
				<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-8109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8109"><a href="https://shlomi-noach.github.io/blog/archives">archives</a></li>
<li id="menu-item-8050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8050"><a href="https://shlomi-noach.github.io/blog/presentations">presentations</a></li>
<li id="menu-item-8055" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8055"><a href="https://shlomi-noach.github.io/blog/about">about</a></li>
<li id="menu-item-8071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8071"><a href="https://github.com/shlomi-noach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li>
<li id="menu-item-8074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8074"><a href="https://www.linkedin.com/in/shlominoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li>
<li id="menu-item-8072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8072"><a href="https://twitter.com/ShlomiNoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></li>
<li id="menu-item-8073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8073"><a href="https://shlomi-noach.github.io/blog/feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-12.832 20c-1.197 0-2.168-.969-2.168-2.165s.971-2.165 2.168-2.165 2.167.969 2.167 2.165-.97 2.165-2.167 2.165zm5.18 0c-.041-4.029-3.314-7.298-7.348-7.339v-3.207c5.814.041 10.518 4.739 10.561 10.546h-3.213zm5.441 0c-.021-7.063-5.736-12.761-12.789-12.792v-3.208c8.83.031 15.98 7.179 16 16h-3.211z"></path></svg></a></li>
</ul></div>			</nav>
		</div>
	</header>

	<main id="primary" class="site-main">

		
			<header class="page-header">
				<h1 class="page-title">Category: MySQL</h1><div class="archive-description"><p>MySQL related posts</p>
</div>			</header>

			
<article id="post-1269" class="post-1269 post type-post status-publish format-standard hentry category-mysql tag-indexing tag-innodb tag-performance">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/reducing-locks-by-narrowing-primary-key" rel="bookmark">Reducing locks by narrowing primary key</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/indexing" rel="tag">Indexing</a><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/performance" rel="tag">Performance</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/reducing-locks-by-narrowing-primary-key" rel="bookmark"><time class="entry-date published" datetime="2010-05-04T08:46:01+02:00">May 4, 2010</time><time class="updated" datetime="2010-05-04T10:35:12+02:00">May 4, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>In a period of two weeks, I had two cases with the exact same symptoms.</p>
<p>Database users were experiencing low responsiveness. DBAs were seeing locks occurring on seemingly normal tables. In particular, looking at Innotop, it seemed that <strong>INSERT</strong>s were causing the locks.</p>
<p>In both cases, tables were InnoDB. In both cases, there was a <strong>PRIMARY KEY</strong> on the combination of all <strong>5</strong> columns. And in both cases, there was no clear explanation as for why the <strong>PRIMARY KEY</strong> was chosen as such.</p>
<h4>Choosing a proper PRIMARY KEY</h4>
<p>Especially with InnoDB, which uses clustered index structure, the <strong>PRIMARY KEY</strong> is of particular importance. Besides the fact that a bloated <strong>PRIMARY KEY</strong> bloats the entire clustered index and secondary keys (see: <a href="https://shlomi-noach.github.io/blog/mysql/the-depth-of-an-index-primer">The depth of an index: primer</a>), it is also a source for locks. It’s true that any <strong>UNIQUE KEY</strong> can serve as a <strong>PRIMARY KEY</strong>. But not all such keys are good candidates. <a href="https://shlomi-noach.github.io/blog/mysql/reducing-locks-by-narrowing-primary-key#more-1269" class="more-link">Continue reading »<span class="screen-reader-text"> “Reducing locks by narrowing primary key”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/reducing-locks-by-narrowing-primary-key#comments">7 Comments<span class="screen-reader-text"> on Reducing locks by narrowing primary key</span></a></span>	</footer>
</article>

<article id="post-2215" class="post-2215 post type-post status-publish format-standard hentry category-development category-mysql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/database-schema-under-version-control" rel="bookmark">Database schema under version control</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/development" rel="category tag">Development</a> <a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/database-schema-under-version-control" rel="bookmark"><time class="entry-date published updated" datetime="2010-04-22T09:04:04+02:00">April 22, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>How many organization use version control for development? Probably almost every single one.</p>
<p>How many store the database schema under version control? Alas, not as many.</p>
<p>Coupling one’s application with table schema is essential. Organization who actively support multiple versions of the product understand that well. Smaller organizations not always have this realization.</p>
<p>How is it done?</p>
<h4>Ideally</h4>
<p>Ideally one would have:</p>
<ul>
<li>The schema, generated by hand</li>
<li>Essential data (<strong>INSERT INTO</strong> statements for those lookup tables without which you cannot have an application)</li>
<li>Sample data: sufficient real-life data on which to act. This would include customers data, logs, etc.</li>
</ul>
<p>If you can work this way, then creating a staging environment consists of re-creating the entire schema from out schema code, and filling in the essential & sample data.</p>
<p>The thing with this method is that one does not (usually?) apply it on one’s live system. Say we were to add a column. On our live servers we would issue an <strong>ALTER TABLE t ADD COLUMN</strong>.</p>
<p>But this means we’re using different methods on our staging server and on our production server.</p>
<h4>Incremental</h4>
<p>Another kind of solution would be to hold:</p>
<ul>
<li>The static schema, as before</li>
<li>Essential data, as before</li>
<li>Sample data, as before</li>
<li>A migration script, which is the concatenation of all ALTERs, CREATEs etc. as of the static schema.</li>
</ul>
<p>Once in a while one can do a “reset”, and update the static schema with the existing design.</p>
<h4>As you go along</h4>
<p>This solution simply means “we apply the changes on staging; test + version them; then apply on production”.</p>
<p>A side effect of this solution is that the database generates the schema, but the schema does not generate the database as in previous cases. This makes for an uglier solution, where you first apply the changes to the database, and then, based on what the database report, enter data into the version control.</p>
<p>How to do that? Easiest would be to use <strong>mysqldump –routines –no-data</strong>. Some further parsing should be done to strip out the <strong>AUTO_INCREMENT</strong> values, which tend to change, as well as the surrounding variables settings (strip out the character set settings etc.).</p>
<h4>Summary</h4>
<p>However you do it, make sure you have some kind of version control on your schema. It pays off just as with doing version control for your code. You get to compare, understand the incremental changes, understand the change in design, etc.</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/database-schema-under-version-control#comments">3 Comments<span class="screen-reader-text"> on Database schema under version control</span></a></span>	</footer>
</article>

<article id="post-2330" class="post-2330 post type-post status-publish format-standard hentry category-mysql tag-humor tag-nosql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/tales-of-the-trade-3-mysql-vs-nosql" rel="bookmark">Tales of the Trade #3: MySQL vs. NoSQL</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/humor" rel="tag">Humor</a><a href="https://shlomi-noach.github.io/blog/tag/nosql" rel="tag">NoSQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/tales-of-the-trade-3-mysql-vs-nosql" rel="bookmark"><time class="entry-date published" datetime="2010-04-19T19:30:53+02:00">April 19, 2010</time><time class="updated" datetime="2010-04-21T06:51:57+02:00">April 21, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Apparently the message from the comic below was not well conceived.</p>
<p>Following the strip I’ve added some spoiler notes.<br>
<a href="https://shlomi-noach.github.io/blog/wp-content/uploads/2010/04/tales-of-the-trade-mysql-vs-nosql.png"><img class="alignnone size-full wp-image-2335" title="tales-of-the-trade-mysql-vs-nosql" src="https://shlomi-noach.github.io/blog/wp-content/uploads/2010/04/tales-of-the-trade-mysql-vs-nosql.png" alt="" width="580" height="2224" srcset="https://shlomi-noach.github.io/blog/wp-content/uploads/2010/04/tales-of-the-trade-mysql-vs-nosql.png 580w,https://shlomi-noach.github.io/blog/wp-content/uploads/2010/04/tales-of-the-trade-mysql-vs-nosql-78x300.png 78w,https://shlomi-noach.github.io/blog/wp-content/uploads/2010/04/tales-of-the-trade-mysql-vs-nosql-267x1024.png 267w" sizes="(max-width: 580px) 100vw, 580px"></a></p>
<p>This is not about bashing NoSQL. Apparently some people feel this way.</p>
<p>This is about:</p>
<ul>
<li>Trying to judge/analyze NoSQL as if it were a single entity, thereby asking “should I use MySQL or NoSQL”?</li>
<li>The fact Wikipedia defines NoSQL as a “movement” (who’s the leader?)</li>
<li>The fact that people are still arguing on how “MySQL” should be pronounced.</li>
</ul>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/tales-of-the-trade-3-mysql-vs-nosql#comments">9 Comments<span class="screen-reader-text"> on Tales of the Trade #3: MySQL vs. NoSQL</span></a></span>	</footer>
</article>

<article id="post-2313" class="post-2313 post type-post status-publish format-standard hentry category-mysql tag-open-source tag-opinions">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/poll-what-minor-versions-of-mysql-should-be-supported-by-an-open-source-mysql-related-project" rel="bookmark">Poll: what (minor) versions of MySQL should be supported by an open source MySQL related project?</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/poll-what-minor-versions-of-mysql-should-be-supported-by-an-open-source-mysql-related-project" rel="bookmark"><time class="entry-date published" datetime="2010-04-02T09:30:06+02:00">April 2, 2010</time><time class="updated" datetime="2010-04-09T09:13:29+02:00">April 9, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I would like to get the community’s opinion about supporting older (minor) versions of MySQL in open source projects.</p>
<p>If I were to develop some open source project, and a bug report came which only applied to MySQL <strong>5.0.51</strong> (but more recent versions worked fine), would I need to fix the code so as to support this older version?</p>
<p>How about supporting <strong>5.0.22</strong> (released almost 4 years ago, with almost 70 revisions since)? Would you expect an open source project to support this MySQL version because, say, this is the <a href="https://shlomi-noach.github.io/blog/mysql/to-not-yum-or-to-not-apt-get">default version in your yum repository</a>?</p>
<p>I would like to concentrate on the currently stable MySQL versions: <strong>5.0</strong> and <strong>5.1</strong>. Versions <strong>4.x</strong> are out of the question for me, and <strong>5.5</strong> is not yet GA.</p>
<p>Sure, it would be great to support <em>everything</em>. But also time and effort consuming. So, I would greatly appreciate <em>your feedback</em>!<br>
 <a href="https://shlomi-noach.github.io/blog/mysql/poll-what-minor-versions-of-mysql-should-be-supported-by-an-open-source-mysql-related-project#more-2313" class="more-link">Continue reading »<span class="screen-reader-text"> “Poll: what (minor) versions of MySQL should be supported by an open source MySQL related project?”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/poll-what-minor-versions-of-mysql-should-be-supported-by-an-open-source-mysql-related-project#comments">8 Comments<span class="screen-reader-text"> on Poll: what (minor) versions of MySQL should be supported by an open source MySQL related project?</span></a></span>	</footer>
</article>

<article id="post-2221" class="post-2221 post type-post status-publish format-standard hentry category-mysql tag-monitoring tag-mycheckpoint tag-python">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/mycheckpoint-rev-118-alerts-email-notifications-and-more" rel="bookmark">mycheckpoint (Rev. 118): alerts, email notifications and more</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/monitoring" rel="tag">Monitoring</a><a href="https://shlomi-noach.github.io/blog/tag/mycheckpoint" rel="tag">mycheckpoint</a><a href="https://shlomi-noach.github.io/blog/tag/python" rel="tag">python</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/mycheckpoint-rev-118-alerts-email-notifications-and-more" rel="bookmark"><time class="entry-date published" datetime="2010-03-25T08:26:34+02:00">March 25, 2010</time><time class="updated" datetime="2010-05-21T15:28:03+02:00">May 21, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Revision <strong>118</strong> of <a href="http://code.openark.org/forge/mycheckpoint">mycheckpoint</a> has been released. New and updated in this revision:</p>
<ul>
<li>Conditional alerts</li>
<li>Email notifications</li>
<li>Revised HTML reports, including 24/7 reports.</li>
<li>Updated documentation</li>
</ul>
<p>With this new revision mycheckpoint turns into a <em>monitoring solution</em> for MySQL. One can now:</p>
<ul>
<li>Store measure metrics</li>
<li>Query for raw, aggregated or digested metrics</li>
<li>Generate charts for selected metrics</li>
<li>View HTML reports for selecetd metrics</li>
<li>Define alerts conditions, query for pending alerts</li>
<li>Be notified via <em>email</em> on <em>raised</em> or <em>resolved</em> alerts.</li>
</ul>
<h4>Conditional alerts</h4>
<p><em>mycheckpoint</em> is <em>SQL oriented</em>. As such, it allows for creation of alert conditions, which are nothing more than SQL conditions.</p>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/mycheckpoint-rev-118-alerts-email-notifications-and-more#more-2221" class="more-link">Continue reading »<span class="screen-reader-text"> “mycheckpoint (Rev. 118): alerts, email notifications and more”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/mycheckpoint-rev-118-alerts-email-notifications-and-more#comments">4 Comments<span class="screen-reader-text"> on mycheckpoint (Rev. 118): alerts, email notifications and more</span></a></span>	</footer>
</article>

<article id="post-2253" class="post-2253 post type-post status-publish format-standard hentry category-mysql tag-logs tag-openark-kit tag-python tag-scripts">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/oak-hook-general-log-streaming-general-log" rel="bookmark">oak-hook-general-log: streaming general log</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/logs" rel="tag">logs</a><a href="https://shlomi-noach.github.io/blog/tag/openark-kit" rel="tag">openark kit</a><a href="https://shlomi-noach.github.io/blog/tag/python" rel="tag">python</a><a href="https://shlomi-noach.github.io/blog/tag/scripts" rel="tag">scripts</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/oak-hook-general-log-streaming-general-log" rel="bookmark"><time class="entry-date published" datetime="2010-03-21T10:45:58+02:00">March 21, 2010</time><time class="updated" datetime="2010-03-21T10:57:35+02:00">March 21, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I’m seeking input on a new <a href="http://code.openark.org/forge/openark-kit">openark kit</a> utility I’ve started to implement.</p>
<p>The tool, <strong>oak-hook-general-log</strong>, will hook up to a MySQL (>= 5.1) server, and stream the general log into standard output. It looks like this:</p>
<blockquote>
<pre>bash$ python src/oak/oak-hook-general-log.py --socket=/tmp/mysql.sock --user=root
2010-03-21 10:18:42     root[root] @ localhost []       79      1       Query   SELECT COUNT(*) FROM City
2010-03-21 10:18:48     root[root] @ localhost []       79      1       Query   DELETE FROM City WHERE id=1000
2010-03-21 10:18:54     root[root] @ localhost []       79      1       Query   SHOW PROCESSLIST
2010-03-21 10:19:06     root[root] @ localhost []       79      1       Quit
2010-03-21 10:19:07     root[root] @ localhost []       93      1       Connect root@localhost on
2010-03-21 10:19:07     root[root] @ localhost []       93      1       Query   select @@version_comment limit 1
2010-03-21 10:22:33     root[root] @ localhost []       93      1       Query   SELECT City.Name, Country.Name FROM Country JOIN City ON Country.Capit
2010-03-21 10:22:58     root[root] @ localhost []       93      1       Quit
</pre>
</blockquote>
<p>Since output is written to <strong>stdout</strong>, one can further:</p>
<blockquote>
<pre>bash$ python src/oak/oak-hook-general-log.py --socket=/tmp/mysql.sock --user=root | grep Connect
bash$ python src/oak/oak-hook-general-log.py --socket=/tmp/mysql.sock --user=root | grep webuser@webhost</pre>
</blockquote>
<p>What the tool does is to enable table logs, and periodically rotate the <strong>mysql.general_log</strong> table, read and dump its content.</p>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/oak-hook-general-log-streaming-general-log#more-2253" class="more-link">Continue reading »<span class="screen-reader-text"> “oak-hook-general-log: streaming general log”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/oak-hook-general-log-streaming-general-log#comments">9 Comments<span class="screen-reader-text"> on oak-hook-general-log: streaming general log</span></a></span>	</footer>
</article>

<article id="post-2005" class="post-2005 post type-post status-publish format-standard hentry category-mysql tag-configuration tag-data-types tag-sql_mode tag-syntax">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/but-i-do-want-mysql-to-say-error" rel="bookmark">But I DO want MySQL to say “ERROR”!</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/configuration" rel="tag">Configuration</a><a href="https://shlomi-noach.github.io/blog/tag/data-types" rel="tag">Data Types</a><a href="https://shlomi-noach.github.io/blog/tag/sql_mode" rel="tag">sql_mode</a><a href="https://shlomi-noach.github.io/blog/tag/syntax" rel="tag">Syntax</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/but-i-do-want-mysql-to-say-error" rel="bookmark"><time class="entry-date published" datetime="2010-03-12T06:53:28+02:00">March 12, 2010</time><time class="updated" datetime="2010-03-12T15:27:07+02:00">March 12, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>MySQL is known for its willingness to accept invalid queries, data values. It can silently commit your transaction, truncate your data.</p>
<ul>
<li>Using <strong>GROUP_CONCAT</strong> with a small <strong>group_concat_max_len</strong> setting? Your result will be silently truncated (make sure to check the warnings though).</li>
<li>Calling <strong>CREATE <span style="text-decoration: line-through;">TEMPORARY</span> TABLE</strong>? You get <a href="http://www.joinfu.com/2010/03/a-follow-up-on-the-sql-puzzle/">silent commit</a>.</li>
<li>Issuing a <strong>ROLLBACK</strong> on non-transactional involved engines? Have a warning; no error.</li>
<li>Using <strong>LOCK IN SHARE MODE</strong> on non transactional tables? Not a problem. Nothing reported.</li>
<li>Adding a <strong>FOREIGN KEY</strong> on a MyISAM table? Good for you; no action actually taken.</li>
<li>Inserting <strong>300</strong> to a <strong>TINYINT</strong> column in a relaxed <strong>sql_mode</strong>? Give me <strong>255</strong>, I’ll silently drop the remaining <strong>45</strong>. I owe you.</li>
</ul>
<h4>Warnings and errors</h4>
<p>It would be nice to: <a href="https://shlomi-noach.github.io/blog/mysql/but-i-do-want-mysql-to-say-error#more-2005" class="more-link">Continue reading »<span class="screen-reader-text"> “But I DO want MySQL to say “ERROR”!”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/but-i-do-want-mysql-to-say-error#comments">18 Comments<span class="screen-reader-text"> on But I DO want MySQL to say “ERROR”!</span></a></span>	</footer>
</article>

<article id="post-2156" class="post-2156 post type-post status-publish format-standard hentry category-mysql tag-java tag-opinions tag-python tag-sql tag-syntax">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/proper-sql-table-alias-use-conventions" rel="bookmark">Proper SQL table alias use conventions</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/java" rel="tag">Java</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/python" rel="tag">python</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a><a href="https://shlomi-noach.github.io/blog/tag/syntax" rel="tag">Syntax</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/proper-sql-table-alias-use-conventions" rel="bookmark"><time class="entry-date published" datetime="2010-03-11T09:10:09+02:00">March 11, 2010</time><time class="updated" datetime="2010-03-11T14:13:51+02:00">March 11, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>After seeing quite some SQL statements over the years, something is bugging me: there is no consistent convention as for how to write an SQL query.</p>
<p>I’m going to leave formatting, upper/lower-case issues aside, and discuss a small part of the SQL syntax: table aliases. Looking at three different queries, I will describe what I find to be problematic table alias use.</p>
<p>Using the <a href="http://dev.mysql.com/doc/sakila/en/sakila.html">sakila</a> database, take a look at the following queries: <a href="https://shlomi-noach.github.io/blog/mysql/proper-sql-table-alias-use-conventions#more-2156" class="more-link">Continue reading »<span class="screen-reader-text"> “Proper SQL table alias use conventions”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/proper-sql-table-alias-use-conventions#comments">9 Comments<span class="screen-reader-text"> on Proper SQL table alias use conventions</span></a></span>	</footer>
</article>

<article id="post-2144" class="post-2144 post type-post status-publish format-standard hentry category-mysql tag-openark-kit tag-schema tag-scripts">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/mk-schema-change-check-out-ideas-from-oak-online-alter-table" rel="bookmark">mk-schema-change? Check out ideas from oak-online-alter-table</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/openark-kit" rel="tag">openark kit</a><a href="https://shlomi-noach.github.io/blog/tag/schema" rel="tag">Schema</a><a href="https://shlomi-noach.github.io/blog/tag/scripts" rel="tag">scripts</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/mk-schema-change-check-out-ideas-from-oak-online-alter-table" rel="bookmark"><time class="entry-date published updated" datetime="2010-03-10T20:28:29+02:00">March 10, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>In response to Mark Callaghan’s post <a href="http://www.facebook.com/note.php?note_id=356997370932">mk-schema-change</a>.</p>
<p>I apologize for not commenting on the post itself, I do not hold a Facebook account. Anyway this is a long write, so it may as well deserve a post of its own.</p>
<p>Some of the work Mark is describing already exists under <a href="http://code.openark.org/forge/openark-kit">openark kit</a>‘s <a href="http://code.openark.org/forge/openark-kit/oak-online-alter-table">oak-online-alter-table</a>. Allow me to explain what I have gained there, and how the issue can be further pursued. There is relevance to Mark’s suggestion.</p>
<p><em>oak-online-alter-table</em> uses a combination of locks, chunks and triggers to achieve an almost non-blocking <strong>ALTER TABLE</strong> effect. I had a very short opportunity to speak with Mark on last year’s conference, in between bites. Mark stated that anything involving triggers was irrelevant in his case.</p>
<p>The triggers are a pain, but I believe a few other insights from <em>oak-online-alter-table</em> can be of interest. <a href="https://shlomi-noach.github.io/blog/mysql/mk-schema-change-check-out-ideas-from-oak-online-alter-table#more-2144" class="more-link">Continue reading »<span class="screen-reader-text"> “mk-schema-change? Check out ideas from oak-online-alter-table”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/mk-schema-change-check-out-ideas-from-oak-online-alter-table#comments">11 Comments<span class="screen-reader-text"> on mk-schema-change? Check out ideas from oak-online-alter-table</span></a></span>	</footer>
</article>

<article id="post-2008" class="post-2008 post type-post status-publish format-standard hentry category-mysql tag-execution-plan tag-monitoring tag-mycheckpoint">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/things-to-monitor-on-mysql-the-users-perspective" rel="bookmark">Things to monitor on MySQL, the user’s perspective</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/execution-plan" rel="tag">Execution plan</a><a href="https://shlomi-noach.github.io/blog/tag/monitoring" rel="tag">Monitoring</a><a href="https://shlomi-noach.github.io/blog/tag/mycheckpoint" rel="tag">mycheckpoint</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/things-to-monitor-on-mysql-the-users-perspective" rel="bookmark"><time class="entry-date published updated" datetime="2010-03-10T11:12:24+02:00">March 10, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Working on <em>mycheckpoint</em>, I have the intention of adding custom monitoring. That is, letting the user define things to monitor. I have my own thoughts, I would be grateful to get more input!</p>
<h4>What would the user want to monitor?</h4>
<p>Monitoring for the number of SELECT statements per second, InnoDB locks, slave replication lag etc. is very important, and monitoring utilities provide with this information. But what does that tell the end user? Not much.</p>
<p>The experienced DBA may gain a lot. The user would be more interested in completely other kind of information. In between, some information is relevant to both.</p>
<p>Say we were managing an on-line store. We want to monitor the health of the database. But the health of the database is inseparable from the health of the application. I mean, having little to no disk usage is fine, unless… something is wrong with the application, which leads to no new purchases.</p>
<p>And so a user would be interested in monitoring the number of purchases per hour, or the time passed since last successful purchase. This kind of data can only be generated by a user’s specific query. Looking at the charts, the user would then feel safer and confident in the wellness of his store app.</p>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/things-to-monitor-on-mysql-the-users-perspective#more-2008" class="more-link">Continue reading »<span class="screen-reader-text"> “Things to monitor on MySQL, the user’s perspective”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/things-to-monitor-on-mysql-the-users-perspective#comments">2 Comments<span class="screen-reader-text"> on Things to monitor on MySQL, the user’s perspective</span></a></span>	</footer>
</article>

	<nav class="navigation posts-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/32">Older posts</a></div><div class="nav-next"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/30">Newer posts</a></div></div>
	</nav>
	</main>


	<footer id="colophon" class="site-footer">
		<div class="site-info">
			<a href="https://wordpress.org/">
				Powered by WordPress			</a>
			<span class="sep"> | </span>
				Theme: <a href="http://openark.org">openark-primer</a> by <a href="http://underscores.me/">Underscores.me</a>.		</div>
	</footer>
</div>

	<div style="display:none">
	</div>
<script>
var pollsL10n = {"ajax_url":"https:\/\/shlomi-noach.github.io\/blog\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-js.js"></script>
<script src="https://secure.gravatar.com/js/gprofiles.js?ver=2020Junaa"></script>
<script>
var WPGroHo = {"my_hash":""};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/modules/wpgroho.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/navigation.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202024.js" async="async" defer></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.2.1',blog:'32412571',post:'0',tz:'2',srv:'code.openark.org'} ]);
	_stq.push([ 'clickTrackerInit', '32412571', '0' ]);
</script>

</body>
</html>
