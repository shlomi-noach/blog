<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	<title>MySQL ‚Äì Page 10 ‚Äì code.openark.org</title>
<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//s.w.org">



<link rel="stylesheet" id="wp-block-library-css" href="https://shlomi-noach.github.io/blog/wp-includes/css/dist/block-library/style.min.css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wp-polls-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-css.css" media="all">
<style id="wp-polls-inline-css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="openark-primer-style-css" href="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/style.css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/css/jetpack.css" media="all">
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script>



<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel="dns-prefetch" href="//v0.wordpress.com">


<meta property="og:type" content="website">
<meta property="og:title" content="MySQL ‚Äì Page 10 ‚Äì code.openark.org">
<meta property="og:url" content="https://shlomi-noach.github.io/blog/category/mysql">
<meta property="og:description" content="MySQL related posts">
<meta property="og:site_name" content="code.openark.org">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">


<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(242,101,34,.88);}</style></head>

<body class="archive paged category category-mysql category-5 paged-10 category-paged-10 hfeed no-sidebar">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
							<p class="site-title"><a href="https://shlomi-noach.github.io/blog/" rel="home">code.openark.org</a></p>
								<p class="site-description">Blog by Shlomi Noach</p>
			
			<nav id="site-navigation" class="main-navigation">
				<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">primary-menu</button>
				<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-8109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8109"><a href="https://shlomi-noach.github.io/blog/archives">archives</a></li>
<li id="menu-item-8050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8050"><a href="https://shlomi-noach.github.io/blog/presentations">presentations</a></li>
<li id="menu-item-8055" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8055"><a href="https://shlomi-noach.github.io/blog/about">about</a></li>
<li id="menu-item-8071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8071"><a href="https://github.com/shlomi-noach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li>
<li id="menu-item-8074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8074"><a href="https://www.linkedin.com/in/shlominoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li>
<li id="menu-item-8072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8072"><a href="https://twitter.com/ShlomiNoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></li>
<li id="menu-item-8073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8073"><a href="https://shlomi-noach.github.io/blog/feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-12.832 20c-1.197 0-2.168-.969-2.168-2.165s.971-2.165 2.168-2.165 2.167.969 2.167 2.165-.97 2.165-2.167 2.165zm5.18 0c-.041-4.029-3.314-7.298-7.348-7.339v-3.207c5.814.041 10.518 4.739 10.561 10.546h-3.213zm5.441 0c-.021-7.063-5.736-12.761-12.789-12.792v-3.208c8.83.031 15.98 7.179 16 16h-3.211z"></path></svg></a></li>
</ul></div>			</nav>
		</div>
	</header>

	<main id="primary" class="site-main">

		
			<header class="page-header">
				<h1 class="page-title">Category: MySQL</h1><div class="archive-description"><p>MySQL related posts</p>
</div>			</header>

			
<article id="post-6814" class="post-6814 post type-post status-publish format-standard hentry category-mysql tag-opinions tag-perconalive">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/some-anecdotes-i-learned-at-percona-live" rel="bookmark">Some anecdotes I learned at Percona Live</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/some-anecdotes-i-learned-at-percona-live" rel="bookmark"><time class="entry-date published updated" datetime="2014-04-08T04:06:20+02:00">April 8, 2014</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>While on the plane back home I wrote down all my impressions from Percona Live 2014. Have lots of TODOs and great ideas to implement. Among all my impressions, there were a few anecdotes worth noting.</p>
<ul>
<li>5.6 GTID is still unfriendly. It will require complete shutdown & reconfiguration of your entire replication topology; and some companies present hacks around this. Notable, Facebook recoded GTID related code (slave agrees to replicate with GTID even though its master still uses binlog coordinates). Booking.com have their own hack around slowly migrating their topologies. And in a great lightning talk we were shown how to patch MySQL such that the relay logs turn into a¬† consistent GTID-like coordinate system.</li>
<li>Galera replication has been implemented for TokuDB (only active-passive mode, not active-active). This came as a surprise to Tokutek ; apparently Codership did this within a few hours of work. The rest is up for Tokutek!</li>
<li>WebScaleSQL is a cool initiative that aims to assist in pushing commonly desired featured back upstream. It is Web Scale. It is also not a productio0n distribution and I do not expect it to be, It is not a fork that is meant for the common DBA to download and deploy.</li>
<li>Tungsten replicator has MySQL to Hadoop replication using staging tables ‚Äì an auditing of changes that are group-deployed on Hadoop.</li>
<li>Still so many people unfamiliar with MySQLSandbox. It‚Äôs such a basic tool, especially for testing and local installations.</li>
<li>Still misconceptions about common_schema. Yes, I do use it on production.</li>
<li>Everyone has the same problems üôÇ</li>
<li>Replication is still queen of MySQL‚Äôs featureset. We‚Äôre still all about failing over, promoting, scaling via replication.</li>
<li>Linux rules. Where two MacBooks failed to connect to the projector, my Lenovo/Ubuntu Linux did the job just fine and saved the day.</li>
</ul>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/some-anecdotes-i-learned-at-percona-live#respond">Leave a Comment<span class="screen-reader-text"> on Some anecdotes I learned at Percona Live</span></a></span>	</footer>
</article>

<article id="post-6792" class="post-6792 post type-post status-publish format-standard hentry category-mysql tag-community">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-community-awards-2014-the-winners" rel="bookmark">MySQL Community Awards 2014: the Winners</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/community" rel="tag">community</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-community-awards-2014-the-winners" rel="bookmark"><time class="entry-date published" datetime="2014-04-04T19:17:29+02:00">April 4, 2014</time><time class="updated" datetime="2014-04-07T06:35:41+02:00">April 7, 2014</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>The MySQL Community Awards initiative is an effort to acknowledge and thank individuals and corporates for their contributions to the MySQL ecosystem. It is a from-the-community, by-the-community and for-the-community effort. The committee is composed of an independent group of community members of different orientation and opinion, themselves past winners or known contributors to the community.</p>
<p>The 2014 community awards were presented on April 3rd, 2014, during the community event at the Percona Live conference. The winners are:</p>
<h4>MySQL Community Awards: Community Contributor of the year 2014</h4>
<ul>
<li><strong>Colin Charles</strong><br>
Colin‚Äôs list of service to the MySQL Community goes back almost 10 years. He was a community engineer starting in 2005, chaired some of the O‚ÄôReilly MySQL conferences, ran the MySQL projects for Google Summer of Code. As a partner and Chief Evangelist for Monty program, he continues to promote and grow the MySQL ecosystem. Though it‚Äôs his job, he goes above and beyond, driven by his passion for open source and MySQL.</li>
<li><strong>Fr√©d√©ric Descamps</strong><br>
Frederic organizes the MySQL & Friends Devroom at FOSDEM every year. He worked towards making a true community driven event participated by all key players. in 2014 the MySQL & Friends devroom also presented a shared booth/stand regrouping Oracle, MariaDB/SkySQL and Percona engineers and developers.</li>
<li><strong>Geoffrey Anderson</strong><br>
Geoffrey is organizor & moderator at DBHangops: a bi-weekly community hangout discussing all things MySQL. The hangouts are free to join, and are streamed live and stored for later playback via YouTube.<br>
Geoffrey works to provide with content, and leads the hangouts with good spirit. DBHangOps makes for a good knowledge sharing media.</li>
</ul>
<h4>MySQL Community Awards: Application of the year 2014</h4>
<ul>
<li><strong>Galera</strong><br>
Galera provides MySQL with synchronous replication, offering a long time sought for High Availability solution for MySQL. It is fast becoming one of the main product/technology everyone is building next-gen businesses around. It is an important part of the renaissance of what‚Äôs next for the ‚Äúecosystem‚Äù.</li>
<li><strong>Random Query Generator</strong><br>
Random Query Generator has found hundreds of problems with its random generation of queries, because often the most serious bugs are outside of developers‚Äô expectations and their test cases. Engineers who work on MySQL and its derivatives have been able to vastly improve the quality of the database because of it. Random Query Generator has positively effected every single user in the MySQL ecosystem, mostly without them even knowing it.<br>
RQG was originally created by Philip Stoev, and has attracted further contributors over the years.</li>
</ul>
<h4>MySQL Community Awards: Corporate Contributor of the year 2014</h4>
<ul>
<li><strong>Oracle</strong><br>
Oracle has continued to show its commitment to MySQL with the 5.6 release and work in progress on 5.7. MySQL 5.6 might be the best release ever with significant improvements for InnoDB and replication (performance, GTIDs, parallel apply) including significant changes from the community. The 5.7 release has equally high goals for making replication better (enhanced semi-sync) and making InnoDB faster on big multi-core servers. We also appreciate the continued involvement, excellence and passion of the support and community teams.</li>
<li><strong>BinLogic</strong><br>
BinLogic has been a great steward of the MySQL Community in one of the fastest growing technology hubs, Latin America. BinLogic created the MySQL, NoSQL and Cloud Solutions day in 2012 and repeated the event in 2013, drawing in notable speakers from the community.</li>
</ul>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/mysql-community-awards-2014-the-winners#more-6792" class="more-link">Continue reading ¬ª<span class="screen-reader-text"> ‚ÄúMySQL Community Awards 2014: the Winners‚Äù</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-community-awards-2014-the-winners#comments">3 Comments<span class="screen-reader-text"> on MySQL Community Awards 2014: the Winners</span></a></span>	</footer>
</article>

<article id="post-6750" class="post-6750 post type-post status-publish format-standard hentry category-mysql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/introducing-propagator-multi-everything-deployment-made-easy" rel="bookmark">Introducing Propagator: multi-everything deployment made easy</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/introducing-propagator-multi-everything-deployment-made-easy" rel="bookmark"><time class="entry-date published" datetime="2014-03-11T08:09:23+02:00">March 11, 2014</time><time class="updated" datetime="2014-03-11T08:33:27+02:00">March 11, 2014</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I‚Äôm happy to release Outbrain‚Äôs <a href="https://github.com/outbrain/propagator">Propagator</a> as open source. <em>Propagator</em> is a schema & data deployment tool which makes it easy to deploy, review, audit & fix deployments to your database servers.</p>
<p>What does multi-everything mean? It is:</p>
<ul>
<li>Multi-server: push your schema & data changes to multiple instances in parallel</li>
<li>Multi-role: different servers have different schemas</li>
<li>Multi-environment: recognizes the differences between development, QA, build & production servers</li>
<li>Multi-technology: supports MySQL, Hive (Cassandra on the TODO list)</li>
<li>Multi-user: allows users authenticated and audited access</li>
<li>Multi-planetary: TODO</li>
</ul>
<p>With dozens of database servers in our company (and these are master database servers), from development machines to testing machines, through build machines to production servers, and with a growing team of over <strong>70</strong> engineers, we faced the growing problem of controlling our database schema evolution. Controlling creation of tables, columns, keys, foreign keys; controlling creation of data that must be consistent across all servers became an infeasible task. Some changes were lost; some servers forgotten along the way, and inconsistencies blocked our development & deployments again and again.</p>
<p>We have reviewed schema-versioning tools (e.g. FlywayDB and Liquibase) only to conclude they solve a fraction of the problem. We looked at some GUI tools that promise to deliver the solution, but frankly any Windows Desktop GUI application is by definition the wrong tool for the job, and not (only) because of the ‚ÄúWindows‚Äù part.</p>
<p>Not all deployments are the same. Not all servers are the same. You don‚Äôt ALTER a big table on production. You may be using different schema names on different servers. You may have multiple schemas on a single server with identical structure. You may wish to only deploy to some development servers, possibly to a test server, but not to all, and yet be able to pick up on where you left a few days later on to complete your deployment. Some deployments fail, and for various reasons (e.g. John created that table manually on this particular test server, so obviously you can‚Äôt CREATE it again), and you want to be able to skip it, or mark it as ‚ÄúOK‚Äù, or put some comments, or hint that you need assistance from a DBA. You want to be able to quickly add new servers to your deployment group.</p>
<p>Above all, you want every single deployment to be fully audit-able. You want to know exactly who did what and when. If their deployment failed, you want to know that. You want to know why it failed. You want to be able to pick up and try it again, after your DBA found the problem. You want to be able to review yesterday‚Äôs deployments, and be able to contact Jane and say ‚Äúhey, I see you hit a problem here; I know what the problem is; you should do this and that, then please try to deploy again‚Äù.</p>
<p>There‚Äôs so much more, but I‚Äôll stop telling you what you want to have, since there‚Äôs a good <a href="https://github.com/outbrain/propagator/blob/master/MANUAL.md">manual</a> available. <a href="https://shlomi-noach.github.io/blog/mysql/introducing-propagator-multi-everything-deployment-made-easy#more-6750" class="more-link">Continue reading ¬ª<span class="screen-reader-text"> ‚ÄúIntroducing Propagator: multi-everything deployment made easy‚Äù</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/introducing-propagator-multi-everything-deployment-made-easy#comments">6 Comments<span class="screen-reader-text"> on Introducing Propagator: multi-everything deployment made easy</span></a></span>	</footer>
</article>

<article id="post-6769" class="post-6769 post type-post status-publish format-standard hentry category-mysql tag-common_schema tag-development tag-devops tag-open-source tag-perconalive tag-speaking">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-perconalive-common_schema-mysql-devops" rel="bookmark">Speaking at Percona Live: common_schema, MySQL DevOps</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/development" rel="tag">Development</a><a href="https://shlomi-noach.github.io/blog/tag/devops" rel="tag">DevOps</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a><a href="https://shlomi-noach.github.io/blog/tag/speaking" rel="tag">Speaking</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-perconalive-common_schema-mysql-devops" rel="bookmark"><time class="entry-date published" datetime="2014-03-10T10:27:42+02:00">March 10, 2014</time><time class="updated" datetime="2014-04-04T16:15:22+02:00">April 4, 2014</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>In less than a month I‚Äôll be giving these two talks at <a href="https://www.percona.com/live/mysql-conference-2014/">Percona Live</a>:</p>
<ul>
<li><a href="https://www.percona.com/live/mysql-conference-2014/sessions/commonschema-dbas-framework-mysql">common_schema: DBA‚Äôs framework for MySQL</a></li>
</ul>
<p>If you are still unfamiliar with <a href="http://code.google.com/p/common-schema/">common_schema,</a> this will make for a good introduction. I‚Äôll give you multiple reasons why you would want to use it, and how it would come to <em>immediate</em> use at your company. I do mean <em>immediate</em>, as in previous <em>common_schema</em> presentations I happened to get feedback emails from attendees within the same or next day letting me know how <em>common_schema</em> solved an insistent problem of theirs or how it exposed an unknown status.</p>
<p>I‚Äôll review some useful views & routines, and discuss the ease and power of QueryScript. <em>common_schema</em> is a Swiss-knife of solutions, and all from within your MySQL server.</p>
<p>I am using <em>common_schema</em> in production on a regular basis, and it happened to be hero of the day in multiple occasions. I‚Äôll present a couple such cases.</p>
<p><iframe title="common_schema 2.2: DBA's framework for MySQL (April 2014)" src="https://www.slideshare.net/slideshow/embed_code/key/izgbQzup8tu7jN" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> </p>
<div style="margin-bottom:5px"> <strong> <a href="https://www.slideshare.net/shlominoach/commonschema-22-dbas-framework-for-mysql" title="common_schema 2.2: DBA's framework for MySQL (April 2014)" target="_blank">common_schema 2.2: DBA's framework for MySQL (April 2014)</a> </strong> from <strong><a href="https://www.slideshare.net/shlominoach" target="_blank">Shlomi Noach</a></strong> </div>
<ul>
<li><a href="https://www.percona.com/live/mysql-conference-2014/sessions/mysql-devops-outbrain">MySQL DevOps @ Outbrain</a></li>
</ul>
<p>This is a technical talk touching at some cultural issues.</p>
<p>At <a href="http://www.outbrain.com/about/what-is-outbrain">Outbrain</a>, where I work, we have two blessings: a large group of engineers and a large dataset. We at the infrastructure team, together with the ops team, are responsible for the availability of the data. What we really like is technology which lets the owners of a problem be able to recognize it and take care of it. We want ops guys to do ops, and engineers to do engineering. And we want them to be able to talk to each other and <em>understand</em> each other.</p>
<p>What tools can you use to increase visibility? To allow sharing of data between the teams? I‚Äôll share some tools and techniques that allow us to automate deployments, detect a malfunctioning/abusing service, deploy schema changes across dozens of hosts, control data retention, monitor connections, and more.</p>
<p>We like open source. The tools discussed are mostly open source, or open sourced by Outbrain.</p>
<p>I‚Äôll explain why these tools matter, and how they serve the purpose of removing friction between teams, allowing for quick analysis of problems and overall visibility on all things that happen.</p>
<p><iframe title="MySQL DevOps at Outbrain" src="https://www.slideshare.net/slideshow/embed_code/key/ys7e82mMyh669C" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> </p>
<div style="margin-bottom:5px"> <strong> <a href="https://www.slideshare.net/shlominoach/mysql-devops-at-outbrain" title="MySQL DevOps at Outbrain" target="_blank">MySQL DevOps at Outbrain</a> </strong> from <strong><a href="https://www.slideshare.net/shlominoach" target="_blank">Shlomi Noach</a></strong> </div>
<h4>Do come by!</h4>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-perconalive-common_schema-mysql-devops#respond">Leave a Comment<span class="screen-reader-text"> on Speaking at Percona Live: common_schema, MySQL DevOps</span></a></span>	</footer>
</article>

<article id="post-6778" class="post-6778 post type-post status-publish format-standard hentry category-mysql tag-perconalive tag-speaking">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-call-for-hall-of-shame-talks" rel="bookmark">Percona Live ‚Äì call for ‚ÄúHall of Shame‚Äù talks</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a><a href="https://shlomi-noach.github.io/blog/tag/speaking" rel="tag">Speaking</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-call-for-hall-of-shame-talks" rel="bookmark"><time class="entry-date published" datetime="2014-03-08T15:02:49+02:00">March 8, 2014</time><time class="updated" datetime="2014-03-08T19:17:21+02:00">March 8, 2014</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>We‚Äôve got some spare time on Percona Live during the lightning talks session, and are spontaneously calling for ‚ÄúHall of Shame‚Äù submissions.</p>
<h4>What is this about?</h4>
<p>We just had a wonderful <a href="http://summit2014.reversim.com/agenda">Reversim Summit</a> a couple weeks back, where we held the ‚ÄúHall of Shame‚Äù session. We are used to hear talks about success stories and great new technologies. Well, this session is your chance to come up and say: ‚ÄúI messed up, and I‚Äôm proud of it!‚Äù</p>
<p>You will have 3-4 minutes to tell us about how you once accidentally dropped your database; corrupted your data; brought your company‚Äôs service down. The greater the damage, the greater the appeal! But we‚Äôre looking for the funny edge ‚Äì not for a tragedy. There are no slides. Just a ‚ÄúHall of Shame‚Äù screen behind you.</p>
<p>The response we got on <em>Reversim Summit</em>? It was amazing. The audience was literally in tears; there were such hilarious stories that we could hardly keep up. People were spontaneously offering their stories and the organizers had to hold them back.</p>
<p>And yet, you <em>will</em> be telling about your mess up ‚Äì so please make sure you feel OK about this. For what it‚Äôs worth, I will contribute my own shameful, shameful story.</p>
<p>So, this is new & experimental for the Percona Live conference, and we don‚Äôt have many slots. If no one submits ‚Äì that‚Äôs OK. If too many submit, we‚Äôll have to cut most. As conferences go, we may end up with a last moment open timeslot, so if you‚Äôre spontaneous that could be your chance.</p>
<h4>Ready to submit?</h4>
<p>Please send an email to <a>mysql.hall<wbr></wbr>ofshame<em><strong>@</strong></em>gmail.com<wbr></wbr></a> with a brief description of what you want to share. I‚Äôll be reviewing these submissions and either approve, reject or hold you on a waiting list. I assume this will go by First Come First Served. The deadline for submissions is <strong>Friday, Mar 14th</strong>.</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-call-for-hall-of-shame-talks#respond">Leave a Comment<span class="screen-reader-text"> on Percona Live ‚Äì call for ‚ÄúHall of Shame‚Äù talks</span></a></span>	</footer>
</article>

<article id="post-6745" class="post-6745 post type-post status-publish format-standard hentry category-mysql tag-monitoring tag-mycheckpoint">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/mycheckpoint-discontinued" rel="bookmark">mycheckpoint, discontinued</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/monitoring" rel="tag">Monitoring</a><a href="https://shlomi-noach.github.io/blog/tag/mycheckpoint" rel="tag">mycheckpoint</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/mycheckpoint-discontinued" rel="bookmark"><time class="entry-date published updated" datetime="2014-03-06T12:27:28+02:00">March 6, 2014</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Time to admit to myself: <a href="http://code.openark.org/forge/mycheckpoint">mycheckpoint</a> has to be discontinued.</p>
<p>I started <em>mycheckpoint</em> back in <strong>2009</strong>, as a free & open source lightweight monitoring tool for MySQL. Over some years it evolved and became an actual (lightweight) monitoring solution, used by many. It has a unique and original design, which, alas, is also its bane.</p>
<p><em>mycheckpoint</em> uses the relational model & SQL to store and query monitored metrics. This leads to quite a sophisticated service, which can make practically anything visible to the user. The raw data is just numbers. but with some SQL-Fu one can <a href="https://shlomi-noach.github.io/blog/mysql/generating-google-line-charts-with-sql-part-ii">generate charts out of it</a>,¬† (<a href="http://mycheckpoint.googlecode.com/svn/trunk/doc/html/sample/http/mcp_sql00/sv_report_html_brief">interactive</a> ones as well), human readable <a href="http://mycheckpoint.googlecode.com/svn/trunk/doc/html/sample/http/mcp_sql00/sv_report_html_brief">reports</a> and full blown email messages. It is still the only common solution I‚Äôm aware of that <a href="http://code.openark.org/forge/mycheckpoint/documentation/detecting-parameters-change">keeps track of variable changes</a> and provides with clear ‚Äúwhat changed, when, from value & to_value‚Äù. I caught many deployment bugs by just observing this. It‚Äôs a single file that provides with full blown HTTP service, alerting, mail notifications, multi-database monitoring, custom monitoring queries, query execution time monitoring, OS metrics, ‚Ä¶</p>
<p>While developing <em>mycheckpoint</em> I learned a lot on MySQL status & configuration, complex SQL queries, Python, linux, packaging and more. I got a lot of feedback from users, as I still do (thank you!). Didn‚Äôt always manage to fix all bugs or answer all questions.</p>
<p>The design of <em>mycheckpoint</em> does not meet today‚Äôs reality. Heck, today there are more counters & variables than possible table columns. The schema-per-monitored-instance design makes for simplicity, but does not fare well with dozens or hundreds of servers to monitor. There is no cross-instance aggregation or visualization of data. The per-<strong>10</strong> minute aggregation is too rough. <em>There isn‚Äôt a test suite</em>.</p>
<p>Some of the above issues can be fixed, and if you like, the source code is still <a href="http://code.google.com/p/mycheckpoint/source/checkout">freely available</a>. I‚Äôll even migrate the entire SVN to GitHub at some stage. But I believe the current state might only be good for small scale deployments;¬† not something you would consider to scale up with.</p>
<p>For me, there‚Äôs nothing more motivating in code development than knowing the code will go public. The efforts in making the code look as best it can, as easily deployable as possibly can, with good documentation, makes for a lot of effort ‚Äì but very satisfying. Open Source FTW!!!1</p>
<p>¬†</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/mycheckpoint-discontinued#comments">1 Comment<span class="screen-reader-text"> on mycheckpoint, discontinued</span></a></span>	</footer>
</article>

<article id="post-6732" class="post-6732 post type-post status-publish format-standard hentry category-mysql tag-replication">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/the-once-and-for-all-show-slave-status-log-files-positions-explained" rel="bookmark">The ‚Äúonce and for all‚Äù SHOW SLAVE STATUS log files & positions explained</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/the-once-and-for-all-show-slave-status-log-files-positions-explained" rel="bookmark"><time class="entry-date published" datetime="2014-03-06T11:12:49+02:00">March 6, 2014</time><time class="updated" datetime="2014-03-06T11:38:44+02:00">March 6, 2014</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>True, GTID is upon us whether via MySQL 5.6 or Tungsten Replicator (and wasn‚Äôt it in Google Patches since 2009?).</p>
<p>But some of us are still using standard replication with MySQL 5.5, and the ‚Äúwhat‚Äôs with all these binary log files and positions‚Äù question is ever erupting. The output of <strong>SHOW SLAVE STATUS</strong> confuses people new to it. It confuses me time and again.</p>
<p>So here‚Äôs the semi visual guide to interpreting the <strong>SHOW SLAVE STATUS</strong>.</p>
<h4>About binary logs and relay logs</h4>
<p>A master writes binary logs. These are typically and conventionally called <strong>mysql-bin.#####</strong> or <strong>mysqld-bin.#####</strong> (replace ##### with digits).</p>
<p>A slave connects to its master, and reads entries from the master‚Äôs binary logs. The slave writes those entries into its own relay logs. These are typically and conventionally called <strong>mysql-relay.#####</strong> or <strong>mysqld-relay.#####</strong> (replace ##### with digits).</p>
<p>There is nothing at all that connects the name or number of a slave‚Äôs relay log with the master‚Äôs binary log. There is nothing at all that connects the position within the relay log with the position within the master binary log. Files are flushed/rotated; have different size configuration; are re-created. However the slave does keep track on the current relay-log entry: it knows what‚Äôs the matching entry on the master‚Äôs binary logs. This is an important piece of information.</p>
<p>While the slave fetches entries and writes them into the relay log (via the <strong>IO_THREAD</strong>), it also reads the relay log to replay those entries (via the <strong>SQL_THREAD</strong>).</p>
<p>And so at each point in time we are interested in the following ‚Äúcoordinates‚Äù:</p>
<ul>
<li>What are we fetching from the master? Which file are we fetching and from which position?</li>
<li>Where are we writing this to? (This is implicitly the latest relay log file and its size)</li>
<li>What‚Äôs the position of currently executing slave query, in relay-log coordinates? As the slave lags these coordinates are farther (smaller) than the written-to position.</li>
<li>What‚Äôs the position of currently executing slave query, in master binary-log coordinates? This information really tells us how far apart we are from the master. <a href="https://shlomi-noach.github.io/blog/mysql/the-once-and-for-all-show-slave-status-log-files-positions-explained#more-6732" class="more-link">Continue reading ¬ª<span class="screen-reader-text"> ‚ÄúThe ‚Äúonce and for all‚Äù SHOW SLAVE STATUS log files & positions explained‚Äù</span></a></li>
</ul>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/the-once-and-for-all-show-slave-status-log-files-positions-explained#comments">8 Comments<span class="screen-reader-text"> on The ‚Äúonce and for all‚Äù SHOW SLAVE STATUS log files & positions explained</span></a></span>	</footer>
</article>

<article id="post-6721" class="post-6721 post type-post status-publish format-standard hentry category-mysql tag-community tag-perconalive">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-community-awards-2014-call-for-nominations" rel="bookmark">MySQL Community Awards 2014: Call for Nominations!</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/community" rel="tag">community</a><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-community-awards-2014-call-for-nominations" rel="bookmark"><time class="entry-date published" datetime="2014-02-09T08:00:34+02:00">February 9, 2014</time><time class="updated" datetime="2014-02-10T08:23:45+02:00">February 10, 2014</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>The <strong>2014</strong> MySQL Community Awards event will take place, as usual, in Santa Clara, April 2014, during the Percona Live MySQL Conference & Expo (currently scheduled at <a href="http://www.percona.com/live/mysql-conference-2014/program/schedule/sessions-day-2">Thursday, April 3rd 2014</a>).</p>
<p>The MySQL Community Awards is a community based initiative. The idea is to publicly recognize contributors to the MySQL ecosystem. The entire process of discussing, voting and awarding is controlled by an independent group of community members, typically based of past winners or their representatives, as well as known contributors.</p>
<p>It is a self-appointed, self-declared, self-making-up-the-rules-as-it-goes committee. It is also very aware of the importance of the community; a no-nonsense, non-political, adhering to tradition, self criticizing committee.</p>
<p>The Call for Nominations is open. We are seeking the community‚Äôs assistance in nominating candidates in the following categories:</p>
<h4>MySQL Community Awards: Community Contributor of the year 2014</h4>
<p>This is a personal award; a winner would a person who has made contribution to the MySQL ecosystem. This could be via development, advocating, blogging, speaking, supporting, etc. All things go.</p>
<h4>MySQL Community Awards: Application of the year 2014</h4>
<p>An application, project, product etc. which supports the MySQL ecosystem by either contributing code, complementing its behaviour, supporting its use, etc. This could range from a one man open source project to a large scale social service.</p>
<h4>MySQL Community Awards: Corporate Contributor of the year 2013</h4>
<p>A company who made contribution to the MySQL ecosystem. This might be a corporate which released major open source code; one that advocates for MySQL; one that help out community members by‚Ä¶ anything.</p>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/mysql-community-awards-2014-call-for-nominations#more-6721" class="more-link">Continue reading ¬ª<span class="screen-reader-text"> ‚ÄúMySQL Community Awards 2014: Call for Nominations!‚Äù</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-community-awards-2014-call-for-nominations#comments">1 Comment<span class="screen-reader-text"> on MySQL Community Awards 2014: Call for Nominations!</span></a></span>	</footer>
</article>

<article id="post-6713" class="post-6713 post type-post status-publish format-standard hentry category-mysql tag-common_schema tag-development tag-opinions tag-queryscript tag-stored-routines">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/why-delegating-code-to-mysql-stored-routines-is-poor-engineering-practice" rel="bookmark">Why delegating code to MySQL Stored Routines is poor engineering practice</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/development" rel="tag">Development</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/queryscript" rel="tag">QueryScript</a><a href="https://shlomi-noach.github.io/blog/tag/stored-routines" rel="tag">Stored routines</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/why-delegating-code-to-mysql-stored-routines-is-poor-engineering-practice" rel="bookmark"><time class="entry-date published" datetime="2014-02-06T10:32:17+02:00">February 6, 2014</time><time class="updated" datetime="2016-12-27T18:45:41+02:00">December 27, 2016</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I happen to use stored routines with MySQL. In fact, my open source project <a href="http://code.google.com/p/common-schema/">common_schema</a> heavily utilizes them. DBA-wise, I think they provide with a lot of power (alas, the ANSI:SQL 2003 syntax feels more like COBOL than a sane programming language, which is why I use <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/query_script.html">QueryScript</a> instead).</p>
<p>However I wish to discuss the use of stored routines as integral part of your application code, which I discourage.</p>
<p>The common discussion on whether to use or not use stored routines typically revolves around data transfer (with stored routines you transfer less data since it‚Äôs being processed on server side), security (with stored routines you can obfuscate/hide internal datasets, and provide with limited and expected API) and performance (with MySQL this is not what you would expect, as routines are interpreted & their queries re-evaluated, as opposed to other RDBMS you may be used to).</p>
<p>But I wish to discuss the use of stored routines from an engineering standpoint. The first couple of points I raise are cultural/behavioural.</p>
<h4>2nd grade citizens</h4>
<p>Your stored routines are not likely to integrate well with your IDE. While your Java/Scala/PHP/Ruby/whatnot code comfortably lies within your home directory, the stored routines live in their own space: a database container. They‚Äôre not as visible to you as your standard code. Your IDE is unaware of their existence and is unlikely to have the necessary plugin/state of mind to be able to view these.</p>
<p>This leads to difficulty in maintaining the code. People typically resort to using some SQL-oriented GUI tool such as MySQL Workbench, SequelPro or other, commercial tools. But these tools, while make it easy to edit your routine code, do not integrate (well?) with your source control. I can‚Äôt say I‚Äôve used all GUI tools; but how many of them will have Git/SVN/Mercurial connectors? How many of them will keep local history changes once you edit a routine? I‚Äôm happy to get introduced to such a tool.</p>
<p>Even with such integration, you‚Äôre split between two IDEs. And if you‚Äôre the command line enthusiast, well, you can‚Äôt just <strong>svn ci -m ‚Äúfixed my stored procedure bug‚Äù</strong>. Your code is simply not in your trunk directory.</p>
<p>It <em>can</em> be done. You <em>could</em> maintain the entire routine code from within your source tree, and hats off to all those who do it. Most will not. See later on about deployments for more on this. <a href="https://shlomi-noach.github.io/blog/mysql/why-delegating-code-to-mysql-stored-routines-is-poor-engineering-practice#more-6713" class="more-link">Continue reading ¬ª<span class="screen-reader-text"> ‚ÄúWhy delegating code to MySQL Stored Routines is poor engineering practice‚Äù</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/why-delegating-code-to-mysql-stored-routines-is-poor-engineering-practice#comments">11 Comments<span class="screen-reader-text"> on Why delegating code to MySQL Stored Routines is poor engineering practice</span></a></span>	</footer>
</article>

<article id="post-6589" class="post-6589 post type-post status-publish format-standard hentry category-mysql tag-monitoring tag-replication">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/seconds_behind_master-vs-absolute-slave-lag" rel="bookmark">Seconds_behind_master vs. Absolute slave lag</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/monitoring" rel="tag">Monitoring</a><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/seconds_behind_master-vs-absolute-slave-lag" rel="bookmark"><time class="entry-date published updated" datetime="2014-01-24T15:41:18+02:00">January 24, 2014</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I am unable to bring myself to trust the <strong>Seconds_behind_master</strong> value on <strong>SHOW SLAVE STATUS</strong>. Even with MySQL <strong>5.5</strong>‚Äòs <strong>CHANGE MASTER TO ‚Ä¶ MASTER_HEARTBEAT_PERIOD</strong> (good thing, applied when no traffic goes from master to slave) it‚Äôs easy and common to find fluctuations in¬†<strong>Seconds_behind_master</strong> value.</p>
<p>And, when sampled by your favourite monitoring tool, this often leads to <em>many</em> false negatives.</p>
<p>At Outbrain we use HAProxy as proxy to our slaves, on multiple clusters. More about that in a future post. What‚Äôs important here is that our decision whether a slave enters or leaves a certain pool (i.e. gets UP or DOWN status in HAProxy) is based on replication lag. Taking slaves out when they are actually replicating well is bad, since this reduces the amount of serving instances. Putting slaves in the pool when they are actually lagging too much is bad as they contain invalid, irrelevant data.</p>
<p>To top it all, even when correct, the¬†<strong>Seconds_behind_master</strong> value is practically irrelevant on <strong>2nd</strong> level slaves. In a <em>Master -> Slave1 -> Slave2</em> setup, what does it mean that <em>Slave2</em> has <strong>Seconds_behind_master = 0</strong>? Nothing much to the application: <em>Slave1</em> might be lagging an hour behind the master, or may not be replicating at all. <em>Slave2</em> might have an hour‚Äôs data missing even though it says its own replication is fine.</p>
<p>None of the above is news, and yet many fall in this pitfall. The solution is quite old as well; it is also very simple: do your own heartbeat mechanism, at your favourite time resolution, and measure slave lag by timestamp you yourself updated on the master.</p>
<p><strong>Maatkit</strong>/<strong>percona-toolkit</strong> did this long time ago with <strong>mk-heartbeat</strong>/<strong><a href="http://www.percona.com/doc/percona-toolkit/2.2/pt-heartbeat.html">pt-heartbeat</a></strong>. We‚Äôre doing it in a very similar manner. The benefit is obvious. Consider the following two graphs; the first shows <strong>Seconds_behind_master</strong>, the seconds shows our own <strong>Absolute_slave_lag</strong> measurement. <a href="https://shlomi-noach.github.io/blog/mysql/seconds_behind_master-vs-absolute-slave-lag#more-6589" class="more-link">Continue reading ¬ª<span class="screen-reader-text"> ‚ÄúSeconds_behind_master vs. Absolute slave lag‚Äù</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/seconds_behind_master-vs-absolute-slave-lag#comments">1 Comment<span class="screen-reader-text"> on Seconds_behind_master vs. Absolute slave lag</span></a></span>	</footer>
</article>

	<nav class="navigation posts-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/11">Older posts</a></div><div class="nav-next"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/9">Newer posts</a></div></div>
	</nav>
	</main>


	<footer id="colophon" class="site-footer">
		<div class="site-info">
			<a href="https://wordpress.org/">
				Powered by WordPress			</a>
			<span class="sep"> | </span>
				Theme: <a href="http://openark.org">openark-primer</a> by <a href="http://underscores.me/">Underscores.me</a>.		</div>
	</footer>
</div>

	<div style="display:none">
	</div>
<script>
var pollsL10n = {"ajax_url":"https:\/\/shlomi-noach.github.io\/blog\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-js.js"></script>
<script src="https://secure.gravatar.com/js/gprofiles.js?ver=2020Junaa"></script>
<script>
var WPGroHo = {"my_hash":""};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/modules/wpgroho.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/navigation.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202024.js" async="async" defer></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.2.1',blog:'32412571',post:'0',tz:'2',srv:'code.openark.org'} ]);
	_stq.push([ 'clickTrackerInit', '32412571', '0' ]);
</script>

</body>
</html>
