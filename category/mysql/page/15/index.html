<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	<title>MySQL – Page 15 – code.openark.org</title>
<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//s.w.org">



<link rel="stylesheet" id="wp-block-library-css" href="https://shlomi-noach.github.io/blog/wp-includes/css/dist/block-library/style.min.css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wp-polls-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-css.css" media="all">
<style id="wp-polls-inline-css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="openark-primer-style-css" href="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/style.css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/css/jetpack.css" media="all">
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script>



<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel="dns-prefetch" href="//v0.wordpress.com">


<meta property="og:type" content="website">
<meta property="og:title" content="MySQL – Page 15 – code.openark.org">
<meta property="og:url" content="https://shlomi-noach.github.io/blog/category/mysql">
<meta property="og:description" content="MySQL related posts">
<meta property="og:site_name" content="code.openark.org">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">


<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(242,101,34,.88);}</style></head>

<body class="archive paged category category-mysql category-5 paged-15 category-paged-15 hfeed no-sidebar">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
							<p class="site-title"><a href="https://shlomi-noach.github.io/blog/" rel="home">code.openark.org</a></p>
								<p class="site-description">Blog by Shlomi Noach</p>
			
			<nav id="site-navigation" class="main-navigation">
				<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">primary-menu</button>
				<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-8109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8109"><a href="https://shlomi-noach.github.io/blog/archives">archives</a></li>
<li id="menu-item-8050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8050"><a href="https://shlomi-noach.github.io/blog/presentations">presentations</a></li>
<li id="menu-item-8055" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8055"><a href="https://shlomi-noach.github.io/blog/about">about</a></li>
<li id="menu-item-8071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8071"><a href="https://github.com/shlomi-noach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li>
<li id="menu-item-8074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8074"><a href="https://www.linkedin.com/in/shlominoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li>
<li id="menu-item-8072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8072"><a href="https://twitter.com/ShlomiNoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></li>
<li id="menu-item-8073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8073"><a href="https://shlomi-noach.github.io/blog/feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-12.832 20c-1.197 0-2.168-.969-2.168-2.165s.971-2.165 2.168-2.165 2.167.969 2.167 2.165-.97 2.165-2.167 2.165zm5.18 0c-.041-4.029-3.314-7.298-7.348-7.339v-3.207c5.814.041 10.518 4.739 10.561 10.546h-3.213zm5.441 0c-.021-7.063-5.736-12.761-12.789-12.792v-3.208c8.83.031 15.98 7.179 16 16h-3.211z"></path></svg></a></li>
</ul></div>			</nav>
		</div>
	</header>

	<main id="primary" class="site-main">

		
			<header class="page-header">
				<h1 class="page-title">Category: MySQL</h1><div class="archive-description"><p>MySQL related posts</p>
</div>			</header>

			
<article id="post-6120" class="post-6120 post type-post status-publish format-standard hentry category-mysql tag-sql tag-syntax">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/merging-tables-with-insert-on-duplicate-key-update" rel="bookmark">Merging tables with INSERT…ON DUPLICATE KEY UPDATE</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a><a href="https://shlomi-noach.github.io/blog/tag/syntax" rel="tag">Syntax</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/merging-tables-with-insert-on-duplicate-key-update" rel="bookmark"><time class="entry-date published updated" datetime="2013-02-21T14:12:48+02:00">February 21, 2013</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Had a case recently where I had to merge data from two identically structured tables containing nearly identical data.</p>
<p>“Nearly identical” meaning most table data is identical in both; sometimes a row is missing from one of the tables; sometimes same row (according to PK) appears in both, but some columns are NULL is one tables (while others can be NULL in the second).</p>
<p>Otherwise no contradicting data: it was not possible for some data to be “3” in one table and “4” in the other.</p>
<h4>How do you create a merge of the tables, such that all missing rows are completed, and NULLs replaced by actual values when possible?</h4>
<p><a href="http://www.percona.com/doc/percona-toolkit/2.1/pt-table-sync.html">pt-table-sync</a> comes to mind: one can do a bidirectional syncing of two tables, and actually stating how to resolve ambiguities (like “greater value wins”). Very powerful! An example would be:</p>
<blockquote>
<pre>pt-table-sync --bidirectional --conflict-column=a --conflict-comparison=greatest --tables ...</pre>
</blockquote>
<p>However I didn’t actually have any problem with the tables themselves. The two tables were just fine as they were; missing or NULL data does not indicate an error on their part. I wanted to get their merge. <em>pt-table-sync</em> is still up for the job: we can duplicate them, merge on the copy… But I prefer a query over an external script when possible.</p>
<h4>INSERT…ON DUPLICATE KEY UPDATE</h4>
<p>This <a href="http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html">MySQL-specific syntax</a> is actually quite powerful. It basically says “if the insert fails due to unique constraint, you get a chance to update the row causing the failure”. But it also allows for smart setting of the column via the <strong>VALUES()</strong> clause. Let’s present some sample data and then see the solution. <a href="https://shlomi-noach.github.io/blog/mysql/merging-tables-with-insert-on-duplicate-key-update#more-6120" class="more-link">Continue reading »<span class="screen-reader-text"> “Merging tables with INSERT…ON DUPLICATE KEY UPDATE”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/merging-tables-with-insert-on-duplicate-key-update#comments">3 Comments<span class="screen-reader-text"> on Merging tables with INSERT…ON DUPLICATE KEY UPDATE</span></a></span>	</footer>
</article>

<article id="post-6086" class="post-6086 post type-post status-publish format-standard hentry category-mysql tag-common_schema tag-debug tag-stored-routines tag-video">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-stored-routines-debugger-debugging-api-sneak-preview-video" rel="bookmark">MySQL Stored Routines Debugger & Debugging API: sneak preview video</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/debug" rel="tag">debug</a><a href="https://shlomi-noach.github.io/blog/tag/stored-routines" rel="tag">Stored routines</a><a href="https://shlomi-noach.github.io/blog/tag/video" rel="tag">video</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-stored-routines-debugger-debugging-api-sneak-preview-video" rel="bookmark"><time class="entry-date published updated" datetime="2013-02-19T11:32:27+02:00">February 19, 2013</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>This is a sneak peek video introduction/preview of an in-development free and open source server side debugger & debugging API for MySQL stored routines.</p>
<p>MySQL does not provide server side debugging capabilities for stored routines. Some tools exist, including MySQL’s own, that assist in stored routine debugging. These are all GUI based and, to the best of my knowledge, MS Windows based. There is one solution in alpha stage that is developed for Java/eclipse; I did not look at the code. See discussion <a href="http://www.xaprb.com/blog/2012/11/01/stored-procedure-debugging-in-mysql/">here</a> and <a href="http://blog.webyog.com/2011/12/06/debugging-stored-programs-in-mysql/">here</a>.</p>
<p>An ideal solution would be to have debugging API in the server itself – independently of your client, programming language or operating system. To the best of my knowledge, nothing like that is being developed.</p>
<p>I’m now presenting a <strong>rdebug</strong>: a stored routines server-side debugger, Pure-SQL, based on stored routines. <em>rdebug</em> is developed as part of <a href="http://code.google.com/p/common-schema">common_schema,</a> and actually relies on some of its power.</p>
<p>Like some other tools, it uses code injection and manipulation: it injects debugging info into your stored routine. You need to “compile” your routine with debugging info.</p>
<p>Unlike some other tools, it actually runs your stored routines. It does not mimic or simulate them on client side. It does not break them into smaller routines, attempting to assemble the original behavior from lego bricks.</p>
<p><strong>The quick technical overview</strong> is that you use two processes (MySQL threads): the worker process running the routine (your natural <strong>call my_routine()</strong>), and the debugger process. The debugger process attaches itself to the worker process; it controls the worker by commands like <em>“step over”</em>; it gets data from the worker: what’s the current stack trace? What variables are now available and what are their values?; it manipulates the worker’s data: it can utilize breakpoints to modify worker’s local & session variables. <a href="https://shlomi-noach.github.io/blog/mysql/mysql-stored-routines-debugger-debugging-api-sneak-preview-video#more-6086" class="more-link">Continue reading »<span class="screen-reader-text"> “MySQL Stored Routines Debugger & Debugging API: sneak preview video”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-stored-routines-debugger-debugging-api-sneak-preview-video#comments">3 Comments<span class="screen-reader-text"> on MySQL Stored Routines Debugger & Debugging API: sneak preview video</span></a></span>	</footer>
</article>

<article id="post-6069" class="post-6069 post type-post status-publish format-standard hentry category-mysql tag-perconalive">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/win-a-free-percona-live-2013-pass-unveiling-riddle-hints" rel="bookmark">Win a free Percona Live 2013 pass — unveiling riddle hints</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/win-a-free-percona-live-2013-pass-unveiling-riddle-hints" rel="bookmark"><time class="entry-date published" datetime="2013-02-11T09:00:00+02:00">February 11, 2013</time><time class="updated" datetime="2013-02-12T07:46:27+02:00">February 12, 2013</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Apparently <a href="https://shlomi-noach.github.io/blog/mysql/sessions-of-interest-in-percona-live-2013">my first attempt at rhyming</a> proved to be unsuccessful: only two courageous men attempted solving the riddle. As I’m pretty sure a free pass would appeal to many, and I do have a few readers for my blog, I must conclude my riddle was just too hard. Obscure, perhaps.</p>
<p>Hope I didn’t scare anyone off. Without further ado I present some hints. This post will update with more hints as the day progresses — please refresh to see changes. I start with two hints.</p>
<p>But first, recap of the riddle:</p>
<blockquote><p><em>Who will open your present,</em></p>
<p><em>Make you play pleasant,</em></p>
<p><em>Tidy your mess,</em></p>
<p><em>Do the same for all else?</em></p></blockquote>
<p>It has something to do with the MySQL world. <a href="https://shlomi-noach.github.io/blog/mysql/win-a-free-percona-live-2013-pass-unveiling-riddle-hints#more-6069" class="more-link">Continue reading »<span class="screen-reader-text"> “Win a free Percona Live 2013 pass — unveiling riddle hints”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/win-a-free-percona-live-2013-pass-unveiling-riddle-hints#comments">8 Comments<span class="screen-reader-text"> on Win a free Percona Live 2013 pass — unveiling riddle hints</span></a></span>	</footer>
</article>

<article id="post-5913" class="post-5913 post type-post status-publish format-standard hentry category-mysql tag-opinions tag-perconalive">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/sessions-of-interest-in-percona-live-2013" rel="bookmark">Sessions of interest in Percona Live 2013</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/sessions-of-interest-in-percona-live-2013" rel="bookmark"><time class="entry-date published" datetime="2013-02-05T09:03:52+02:00">February 5, 2013</time><time class="updated" datetime="2013-02-05T10:12:19+02:00">February 5, 2013</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p><a href="http://www.percona.com/live/mysql-conference-2013/">Percona Live 2013</a> is shortly upon us, and it might be a good idea to watch for what’s ahead of us.</p>
<h4>Talks of interest</h4>
<p>There is no way I can do justice to all. I wish to point out a <em>small</em> number of sessions I am personally interested in attending. I will not be able to attend them all, since there are too many sessions of interest and too few instances of myself (merely one).</p>
<p>I’ve tried to list some talks which are not absolutely obvious (when Peter Zaitsev speaks of MySQL performance, or Monty speaks about MariaDB, or Robert Hodges or Domas speak about replication — well — you’re certain to have the ins and outs, right?). I can also expect Galera or Percona XtraDB Cluster talks to attract a lot of attention. There is a lot of good content for each.</p>
<p>But I was happy to find some very special talks this year, which are not the “every conference has got to have one talk about this” type. Here’s a hybrid collection of both types.</p>
<p>After constructing the list I’ve intentionally dropped two random sessions. If you are speaking, and not mentioned here, your talk must be one of those two! <a href="https://shlomi-noach.github.io/blog/mysql/sessions-of-interest-in-percona-live-2013#more-5913" class="more-link">Continue reading »<span class="screen-reader-text"> “Sessions of interest in Percona Live 2013”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/sessions-of-interest-in-percona-live-2013#comments">8 Comments<span class="screen-reader-text"> on Sessions of interest in Percona Live 2013</span></a></span>	</footer>
</article>

<article id="post-6034" class="post-6034 post type-post status-publish format-standard hentry category-mysql tag-hack">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/looking-for-a-hack-share-data-between-mysql-sessions" rel="bookmark">Looking for a hack: share data between MySQL sessions</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/hack" rel="tag">Hack</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/looking-for-a-hack-share-data-between-mysql-sessions" rel="bookmark"><time class="entry-date published updated" datetime="2013-01-28T15:27:58+02:00">January 28, 2013</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I’m looking for a way to share data between two MySQL connections/sessions. Obviously tables are the trivial answer, but for reasons of security (possibly insufficient privileges) I wish to avoid that.</p>
<p>The type of data to be passed can vary. Ideally I would be able to pass multiple pieces of information (dates, texts, integers, etc.) around. If impossible, I would do with texts only, and if impossible yet, I could do with a single text (but reasonably long).</p>
<p>There is a way to do so: by writing to the file system (<strong>SELECT INTO OUTFILE</strong> + <strong>LOAD_FILE()</strong>). However I wish to avoid it, since writing to files from within MySQL requires creation of a new file each time; no overwrite and no purging; this litters the file system.</p>
<p>So: any other tricks? Is there some way to pass data via <strong>GET_LOCK()</strong>/<strong>RELEASE_LOCK()</strong> (none that I can see other than Morse code)?</p>
<p>Is there some global variable that is unused, can be changed dynamically, and has enough space? (I couldn’t find one)</p>
<p>I appreciate any input.</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/looking-for-a-hack-share-data-between-mysql-sessions#comments">20 Comments<span class="screen-reader-text"> on Looking for a hack: share data between MySQL sessions</span></a></span>	</footer>
</article>

<article id="post-6028" class="post-6028 post type-post status-publish format-standard hentry category-mysql tag-data-types tag-open-source tag-percona-toolkit">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/re-mysql-5-1-vs-mysql-5-5-floats-doubles-and-scientific-notation" rel="bookmark">Re: MySQL 5.1 vs. MySQL 5.5: Floats, Doubles, and Scientific Notation</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/data-types" rel="tag">Data Types</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/percona-toolkit" rel="tag">Percona Toolkit</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/re-mysql-5-1-vs-mysql-5-5-floats-doubles-and-scientific-notation" rel="bookmark"><time class="entry-date published updated" datetime="2013-01-24T10:08:40+02:00">January 24, 2013</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Reading Sheeri’s <a href="http://blog.mozilla.org/it/2013/01/17/mysql-5-1-vs-mysql-5-5-floats-doubles-and-scientific-notation/">MySQL 5.1 vs. MySQL 5.5: Floats, Doubles, and Scientific Notation</a>, I was baffled at this change of floating point number notation.</p>
<p>However, I was also concerned about the final action taken: using <strong>“–ignore-columns”</strong> to avoid comparing the <strong>FLOAT</strong>/<strong>DOUBLE</strong> types.</p>
<p>The <a href="http://www.percona.com/doc/percona-toolkit/2.0/pt-table-checksum.html#cmdoption-pt-table-checksum--float-precision">–float-precision</a> option for <em>pt-table-checksum</em> currently only uses <strong>ROUND()</strong> so as to disregard minor rounding issues. But it can very easily extend to handle the difference in floating point notation. Consider again the problem:</p>
<blockquote>
<pre>mysql> create table tf(f float);
Query OK, 0 rows affected (0.11 sec)

mysql> insert into tf values(0.0000958084);
Query OK, 1 row affected (0.04 sec)

mysql-<strong>5.1</strong>> select * from tf;
+-------------+
| f           |
+-------------+
| 9.58084e-05 |
+-------------+

mysql-<strong>5.5</strong>> select * from tf;
+--------------+
| f            |
+--------------+
| 0.0000958084 |
+--------------+</pre>
</blockquote>
<p>How can we normalize the notation?</p>
<p>Easily: <strong>CAST</strong> it as <strong>DECIMAL</strong>. Consider: <a href="https://shlomi-noach.github.io/blog/mysql/re-mysql-5-1-vs-mysql-5-5-floats-doubles-and-scientific-notation#more-6028" class="more-link">Continue reading »<span class="screen-reader-text"> “Re: MySQL 5.1 vs. MySQL 5.5: Floats, Doubles, and Scientific Notation”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/re-mysql-5-1-vs-mysql-5-5-floats-doubles-and-scientific-notation#comments">10 Comments<span class="screen-reader-text"> on Re: MySQL 5.1 vs. MySQL 5.5: Floats, Doubles, and Scientific Notation</span></a></span>	</footer>
</article>

<article id="post-5792" class="post-5792 post type-post status-publish format-standard hentry category-mysql tag-common_schema tag-security">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-security-tasks-easily-solved-with-common_schema" rel="bookmark">MySQL security tasks easily solved with common_schema</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-security-tasks-easily-solved-with-common_schema" rel="bookmark"><time class="entry-date published" datetime="2013-01-17T10:09:56+02:00">January 17, 2013</time><time class="updated" datetime="2013-01-17T10:19:35+02:00">January 17, 2013</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Here are three security tasks I handled, which I’m happy to say were easily solved with <em>common_schema</em>‘s views and routines (with no prior planning). Two are so easy, that I actually now integrated them into <a href="http://code.google.com/p/common-schema">common_schema 1.3</a>:</p>
<ul>
<li>Duplicate a user (create new user with same privileges as another’s)</li>
<li>Find users with identical set of grants (same roles)</li>
<li>Finding redundant users (users who only have privileges on non-existing objects); I was approached on this by <a href="http://sheeri.com/">Sheeri K. Cabral</a> from Mozilla.</li>
</ul>
<h4>Duplicate user</h4>
<p>How would you duplicate a grantee? That’s easy! Just get the SHOW GRANTS output, then do text search and replace: replace the existing account (e.g. <strong>‘existing’@’localhost’</strong>) with the new account (e.g. <strong>‘newcomer’@’localhost’</strong>).</p>
<p>Ahem. And how would you get the output of <strong>SHOW GRANTS</strong>? That’s right: you can’t do this from within the server. You have to go outside the server, incoke mysql client, <em>sed</em> your way into it, then connect to MySQL again to invoke the GRANT query… Or you can do this by hand, of course, or you can use the new <a href="http://dev.mysql.com/doc/workbench/en/mysqluserclone.html">mysqluserclone</a> tool from MySQL utilities. Bottom line: you have to go outside the server. You can’t directly do this with your favorite GUI tool unless it has this function integrated.</p>
<p>But to have a truly automated, scriptable, server-side user-duplication you don’t need to go far, since the <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/sql_show_grants.html">sql_show_grants</a> view simulates a <strong>SHOW GRANTS</strong> output, but using plain old SQL. It produces the <strong>GRANT</strong> statement as SQL output. Which means you can <strong>REPLACE()</strong> the grantee. It’s actually a one liner, but is such a common operation that I created the <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/duplicate_grantee.html">duplicate_grantee()</a> function for convenience. Just: <a href="https://shlomi-noach.github.io/blog/mysql/mysql-security-tasks-easily-solved-with-common_schema#more-5792" class="more-link">Continue reading »<span class="screen-reader-text"> “MySQL security tasks easily solved with common_schema”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-security-tasks-easily-solved-with-common_schema#comments">7 Comments<span class="screen-reader-text"> on MySQL security tasks easily solved with common_schema</span></a></span>	</footer>
</article>

<article id="post-5941" class="post-5941 post type-post status-publish format-standard hentry category-mysql tag-common_schema tag-development tag-new-features tag-open-source tag-queryscript tag-scripts tag-security">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/common_schema-1-3-security-goodies-parameterized-split-json-to-xml-query-checksum" rel="bookmark">common_schema: 1.3: security goodies, parameterized split(), json-to-xml, query checksum</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/development" rel="tag">Development</a><a href="https://shlomi-noach.github.io/blog/tag/new-features" rel="tag">New Features</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/queryscript" rel="tag">QueryScript</a><a href="https://shlomi-noach.github.io/blog/tag/scripts" rel="tag">scripts</a><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/common_schema-1-3-security-goodies-parameterized-split-json-to-xml-query-checksum" rel="bookmark"><time class="entry-date published" datetime="2013-01-14T08:25:07+02:00">January 14, 2013</time><time class="updated" datetime="2013-01-14T08:51:05+02:00">January 14, 2013</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>common_schema <strong>1.3</strong> is released and is <a href="http://code.google.com/p/common-schema">available for download</a>. New and noteworthy in this version:</p>
<ul>
<li>Parameterized <strong><a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/query_script_split.html">split()</a></strong>: take further control over huge transactions by breaking them down into smaller chunks, now manually tunable if needed</li>
<li><a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/duplicate_grantee.html"><strong>duplicate_grantee()</strong></a>: copy+paste existing accounts along with their full set of privileges</li>
<li><a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/similar_grants.html"><strong>similar_grants</strong></a>: find which accounts share the exact same set of privileges (i.e. have the same <em>role</em>)</li>
<li><a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/json_to_xml.html"><strong>json_to_xml()</strong></a>: translate any valid JSON object into its equivalent XML form</li>
<li><a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/extract_json_value.html"><strong>extract_json_value()</strong></a>: use XPath notation to extract info from JSON data, just as you would from XML</li>
<li><a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/query_checksum.html"><strong>query_checksum()</strong></a>: given a query, calculate a checksum on the result set</li>
<li><a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/random_hash.html"><strong>random_hash()</strong></a>: get a 40 hexadecimal digits random hash, using a reasonably large changing input</li>
</ul>
<p>Let’s take a closer look at the above:</p>
<h4>Parameterized split()</h4>
<p><a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/query_script_split.html"><strong>split</strong></a> takes your bulk query and automagically breaks it down into smaller pieces. So instead of one huge <strong>UPDATE</strong> or <strong>DELETE</strong> or <strong>INSERT..SELECT</strong> transaction, you get many smaller transactions, each with smaller impact on I/O, locks, CPU.</p>
<p>As of <strong>1.3</strong>, <em>split()</em> gets more exposed: you can have some control on its execution, and you also get a lot of very interesting info during operation.</p>
<p>Here’s an example of <em>split()</em> control:</p>
<blockquote>
<pre>set @script := "
  <strong>split</strong>({<em>start</em>:7015, <em>step</em>:2000} : <span style="color: #3366ff;">UPDATE sakila.rental SET return_date = return_date + INTERVAL 1 DAY</span>) 
    <strong>throttle</strong> 1;
";
call common_schema.run(@script);</pre>
</blockquote>
<p>In the above we choose a split size of 2,000 rows at a time; but we also choose to only start with <strong>7015</strong>, skipping all rows prior to that value. Just what is that value? It depends on the splitting key (and see next example for just that); but in this table we can safely assume this is the <strong>rental_id</strong> <strong>PRIMARY KEY</strong> of the table.</p>
<p>You don’t <em>have to</em> use these control <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/query_script_split.html#parameters">parameters</a>. But they can save you some time and effort. <a href="https://shlomi-noach.github.io/blog/mysql/common_schema-1-3-security-goodies-parameterized-split-json-to-xml-query-checksum#more-5941" class="more-link">Continue reading »<span class="screen-reader-text"> “common_schema: 1.3: security goodies, parameterized split(), json-to-xml, query checksum”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/common_schema-1-3-security-goodies-parameterized-split-json-to-xml-query-checksum#respond">Leave a Comment<span class="screen-reader-text"> on common_schema: 1.3: security goodies, parameterized split(), json-to-xml, query checksum</span></a></span>	</footer>
</article>

<article id="post-5311" class="post-5311 post type-post status-publish format-standard hentry category-mysql tag-information_schema tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/hierarchical-data-in-information_schema-and-derivatives" rel="bookmark">Hierarchical data in INFORMATION_SCHEMA and derivatives</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/information_schema" rel="tag">INFORMATION_SCHEMA</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/hierarchical-data-in-information_schema-and-derivatives" rel="bookmark"><time class="entry-date published updated" datetime="2013-01-08T13:19:56+02:00">January 8, 2013</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Just how often do you encounter hierarchical data? Consider a table with some parent-child relation, like the this classic <strong>employee</strong> table:</p>
<blockquote>
<pre>CREATE TABLE employee (
  employee_id INT UNSIGNED PRIMARY KEY,
  employee_name VARCHAR(100),
  manager_id INT UNSIGNED,
  CONSTRAINT `employee_manager_fk` FOREIGN KEY (manager_id) REFERENCES employee (employee_id)
) engine=innodb
;
+-------------+---------------+------------+
| employee_id | employee_name | manager_id |
+-------------+---------------+------------+
|           1 | Rachel        |       NULL |
|           2 | John          |          1 |
|           3 | Stan          |          1 |
|           4 | Naomi         |          2 |
+-------------+---------------+------------+</pre>
</blockquote>
<p>Questions like <em>“What is the (nested) list of employees managed by Rachel?”</em> or <em>“Get Naomi’s managers chain of command”</em> are classical questions. There are sometimes dependencies: if John leaves, does that mean Naomi loses her job, or does she get promoted, or something else? If John and Stan are on sick leave, does Rachel have any reason to come to work?</p>
<p>Hierarchical data is not limited to a single-table structure. Sometimes it takes a combination of a few tables (it’s just a <strong>JOIN</strong>) to make out the parent-child relation.</p>
<p>Hierarchical data is difficult to manage with SQL. This is especially true for MySQL, which does not support the <strong>WITH</strong> recursive query syntax.</p>
<h4>Where can you find hierarchical data?</h4>
<p>Even if you do not provide it by yourself, MySQL’s <strong>INFORMATION_SCHEMA</strong> has some for you. Partly obvious, partly implicit, here are some examples: <a href="https://shlomi-noach.github.io/blog/mysql/hierarchical-data-in-information_schema-and-derivatives#more-5311" class="more-link">Continue reading »<span class="screen-reader-text"> “Hierarchical data in INFORMATION_SCHEMA and derivatives”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/hierarchical-data-in-information_schema-and-derivatives#comments">2 Comments<span class="screen-reader-text"> on Hierarchical data in INFORMATION_SCHEMA and derivatives</span></a></span>	</footer>
</article>

<article id="post-5896" class="post-5896 post type-post status-publish format-standard hentry category-mysql tag-community tag-conference tag-perconalive">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-2013-schedule-released" rel="bookmark">Percona Live 2013 schedule released!</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/community" rel="tag">community</a><a href="https://shlomi-noach.github.io/blog/tag/conference" rel="tag">conference</a><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-2013-schedule-released" rel="bookmark"><time class="entry-date published updated" datetime="2012-12-20T16:33:25+02:00">December 20, 2012</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I’m happy to report the <a href="http://www.percona.com/live/mysql-conference-2013/program/schedule/sessions-day-1">release of the program schedule</a> for the next Percona Live event, April <strong>2013</strong>.</p>
<p>While you can see there are still some “TODO”s, and minor scheduling changes still to go, the overall reviewing process is complete, and the schedule is sound.</p>
<p>The <a href="http://www.percona.com/live/mysql-conference-2013/conference-committee">committee</a> has reviewed over <strong>250</strong> submissions in total, sessions and tutorials. It took two months to review the sessions and finalize the schedule. There were very good submissions, and it wasn’t till I started building the schedule that I realized just how many.</p>
<p>You know the feeling: you’re at a conference, and there’s this time slot where you just can’t make up your mind which session to attend. As it turns out, anyway I look at it, I get this at each and every single time slot in this schedule. Hopefully all attendees should feel similarly.</p>
<h4>What can you expect to find in the Santa Clara, April conference?</h4>
<p>As always, we get variety of topics. First day is tutorials, which I already <a href="https://shlomi-noach.github.io/blog/mysql/percona-live-2013-tutorials-schedule-released">mentioned</a>, followed by three days of sessions and keynotes.</p>
<ul>
<li>Some topics you can guess: always place for good backup practice, performance optimizations for your InnoDB deployment, good indexing strategies and more.</li>
<li>Open source and emerging technologies are well covered: from Tungsten, Galera/Percona XtraDB Cluster, NDB Cluster to MHA, HAProxy, Hadoop, Percona Toolkit and more.</li>
<li>MariaDB has good coverage, as well as Percona Server.</li>
<li>Scale topics such as sharding, building large deployments,Big Data.</li>
<li>Cloud is well represented, too. Deployments on Amazon, Google Cloud, OpenStack, SkySQL Cloud Data Suite; interesting content on virtualization.</li>
<li>Optimizer, better queries, query evaluation plans.</li>
<li>Replication, of course, is as always a hot topic, this year in particular due to anticipated 5.6 release</li>
<li>Speaking of 5.6, a lot of content on that, too. PERFORMANCE_SCHEMA, InnoDB, partitions, GIS and more…</li>
<li>Case studies: can you do without them? Get to hear how big companies used product/project X, what it took to make it work, how it helped them grow.</li>
<li>Chance to get up to speed on third party solutions: Akiban, Tokutek, ScaleDB…</li>
<li>Hardware: SSDs are all the rage. How do you nest choose and configure your hardware and deployment?</li>
<li>Best practices, security, monitoring, NoSQL…</li>
<li>And, I can’t list everything, but a LOT of good, unique content!</li>
</ul>
<p>I will write some more on specific sessions I find that are of unique interest.</p>
<p>Finally, this is my first time acting as committee chairman, and so much of this work was new to me, and I got to learn it on the fly. Thankfully, the committee is composed of experienced conference veterans, not to mention experts, who gave good advice. I was happy to ask for their advice and happy to accept. I wish to thank the committee members for their kindness and openness! (That doesn’t mean I’m buying you all your beer though!)</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-2013-schedule-released#comments">1 Comment<span class="screen-reader-text"> on Percona Live 2013 schedule released!</span></a></span>	</footer>
</article>

	<nav class="navigation posts-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/16">Older posts</a></div><div class="nav-next"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/14">Newer posts</a></div></div>
	</nav>
	</main>


	<footer id="colophon" class="site-footer">
		<div class="site-info">
			<a href="https://wordpress.org/">
				Powered by WordPress			</a>
			<span class="sep"> | </span>
				Theme: <a href="http://openark.org">openark-primer</a> by <a href="http://underscores.me/">Underscores.me</a>.		</div>
	</footer>
</div>

	<div style="display:none">
	</div>
<script>
var pollsL10n = {"ajax_url":"https:\/\/shlomi-noach.github.io\/blog\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-js.js"></script>
<script src="https://secure.gravatar.com/js/gprofiles.js?ver=2020Junaa"></script>
<script>
var WPGroHo = {"my_hash":""};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/modules/wpgroho.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/navigation.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202024.js" async="async" defer></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.2.1',blog:'32412571',post:'0',tz:'2',srv:'code.openark.org'} ]);
	_stq.push([ 'clickTrackerInit', '32412571', '0' ]);
</script>

</body>
</html>
