<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	<title>MySQL – Page 38 – code.openark.org</title>
<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//s.w.org">



<link rel="stylesheet" id="wp-block-library-css" href="https://shlomi-noach.github.io/blog/wp-includes/css/dist/block-library/style.min.css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wp-polls-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-css.css" media="all">
<style id="wp-polls-inline-css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="openark-primer-style-css" href="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/style.css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/css/jetpack.css" media="all">
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script>



<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel="dns-prefetch" href="//v0.wordpress.com">


<meta property="og:type" content="website">
<meta property="og:title" content="MySQL – Page 38 – code.openark.org">
<meta property="og:url" content="https://shlomi-noach.github.io/blog/category/mysql">
<meta property="og:description" content="MySQL related posts">
<meta property="og:site_name" content="code.openark.org">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">


<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(242,101,34,.88);}</style></head>

<body class="archive paged category category-mysql category-5 paged-38 category-paged-38 hfeed no-sidebar">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
							<p class="site-title"><a href="https://shlomi-noach.github.io/blog/" rel="home">code.openark.org</a></p>
								<p class="site-description">Blog by Shlomi Noach</p>
			
			<nav id="site-navigation" class="main-navigation">
				<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">primary-menu</button>
				<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-8109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8109"><a href="https://shlomi-noach.github.io/blog/archives">archives</a></li>
<li id="menu-item-8050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8050"><a href="https://shlomi-noach.github.io/blog/presentations">presentations</a></li>
<li id="menu-item-8055" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8055"><a href="https://shlomi-noach.github.io/blog/about">about</a></li>
<li id="menu-item-8071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8071"><a href="https://github.com/shlomi-noach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li>
<li id="menu-item-8074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8074"><a href="https://www.linkedin.com/in/shlominoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li>
<li id="menu-item-8072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8072"><a href="https://twitter.com/ShlomiNoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></li>
<li id="menu-item-8073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8073"><a href="https://shlomi-noach.github.io/blog/feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-12.832 20c-1.197 0-2.168-.969-2.168-2.165s.971-2.165 2.168-2.165 2.167.969 2.167 2.165-.97 2.165-2.167 2.165zm5.18 0c-.041-4.029-3.314-7.298-7.348-7.339v-3.207c5.814.041 10.518 4.739 10.561 10.546h-3.213zm5.441 0c-.021-7.063-5.736-12.761-12.789-12.792v-3.208c8.83.031 15.98 7.179 16 16h-3.211z"></path></svg></a></li>
</ul></div>			</nav>
		</div>
	</header>

	<main id="primary" class="site-main">

		
			<header class="page-header">
				<h1 class="page-title">Category: MySQL</h1><div class="archive-description"><p>MySQL related posts</p>
</div>			</header>

			
<article id="post-720" class="post-720 post type-post status-publish format-standard hentry category-mysql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/why-of-the-week" rel="bookmark">“Why?” of the week</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/why-of-the-week" rel="bookmark"><time class="entry-date published" datetime="2009-04-13T20:05:42+02:00">April 13, 2009</time><time class="updated" datetime="2009-04-13T20:06:51+02:00">April 13, 2009</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>As progress on <a title="oak-online-alter-table" href="http://code.openark.org/forge/openark-kit/oak-online-alter-table">oak-online-alter-table</a> goes on, I’m encountering more and more limitations, for which I must find workarounds. Here’s two:</p>
<h4>CREATE TABLE … LIKE …</h4>
<p>It works well, but it doesn’t copy any foreign key constraints. So, if the original table is this:</p>
<blockquote>
<pre>CREATE TABLE `dept_emp` (
  `emp_no` int(11) NOT NULL,
  `dept_no` char(4) NOT NULL,
  `from_date` date NOT NULL,
  `to_date` date NOT NULL,
  PRIMARY KEY  (`emp_no`,`dept_no`),
  KEY `emp_no` (`emp_no`),
  KEY `dept_no` (`dept_no`),
  CONSTRAINT `dept_emp_ibfk_1` FOREIGN KEY (`emp_no`) REFERENCES `employees` (`emp_no`) ON DELETE CASCADE,
  CONSTRAINT `dept_emp_ibfk_2` FOREIGN KEY (`dept_no`) REFERENCES `departments` (`dept_no`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1</pre>
</blockquote>
<p>Then <strong>CREATE TABLE dept_emp_shadow LIKE dept_emp</strong> results with: <a href="https://shlomi-noach.github.io/blog/mysql/why-of-the-week#more-720" class="more-link">Continue reading »<span class="screen-reader-text"> ““Why?” of the week”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/why-of-the-week#comments">3 Comments<span class="screen-reader-text"> on “Why?” of the week</span></a></span>	</footer>
</article>

<article id="post-545" class="post-545 post type-post status-publish format-standard hentry category-mysql tag-data-types tag-indexing tag-innodb tag-myisam">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/the-depth-of-an-index-primer" rel="bookmark">The depth of an index: primer</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/data-types" rel="tag">Data Types</a><a href="https://shlomi-noach.github.io/blog/tag/indexing" rel="tag">Indexing</a><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/myisam" rel="tag">MyISAM</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/the-depth-of-an-index-primer" rel="bookmark"><time class="entry-date published updated" datetime="2009-04-09T05:55:08+02:00">April 9, 2009</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>InnoDB and MyISAM use B+ and B trees for indexes (InnoDB also has internal hash index).</p>
<p>In both these structures, the depth of the index is an important factor. When looking for an indexed row, a search is made on the index, from root to leaves.</p>
<p>Assuming the index is not in memory, the depth of the index represents the minimal cost (in I/O operation) for an index based lookup. Of course, most of the time we expect large portions of the indexes to be cached in memory. Even so, the depth of the index is an important factor. The deeper the index is, the worse it performs: there are simply more lookups on index nodes.</p>
<p>What affects the depth of an index?</p>
<p>There are quite a few structural issues, but it boils down to two important factors:</p>
<ol>
<li>The number of rows in the table: obviously, more rows leads to larger index, larger indexes grow in depth.</li>
<li>The size of the indexed column(s). An index on an INT column can be expected to be shallower than an index on a CHAR(32) column (on a very small number of rows they may have the same depth, so we’ll assume a large number of rows).</li>
</ol>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/the-depth-of-an-index-primer#more-545" class="more-link">Continue reading »<span class="screen-reader-text"> “The depth of an index: primer”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/the-depth-of-an-index-primer#comments">2 Comments<span class="screen-reader-text"> on The depth of an index: primer</span></a></span>	</footer>
</article>

<article id="post-695" class="post-695 post type-post status-publish format-standard hentry category-mysql tag-books tag-execution-plan tag-indexing tag-sql tag-syntax">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/7-ways-to-convince-mysql-to-use-the-right-index" rel="bookmark">7 ways to convince MySQL to use the right index</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/books" rel="tag">Books</a><a href="https://shlomi-noach.github.io/blog/tag/execution-plan" rel="tag">Execution plan</a><a href="https://shlomi-noach.github.io/blog/tag/indexing" rel="tag">Indexing</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a><a href="https://shlomi-noach.github.io/blog/tag/syntax" rel="tag">Syntax</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/7-ways-to-convince-mysql-to-use-the-right-index" rel="bookmark"><time class="entry-date published" datetime="2009-04-02T18:06:32+02:00">April 2, 2009</time><time class="updated" datetime="2009-09-27T14:08:11+02:00">September 27, 2009</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Sometimes MySQL gets it wrong. It doesn’t use the right index.</p>
<p>It happens that MySQL generates a query plan which is really bad (EXPLAIN says it’s going to explore some 10,000,000 rows), when another plan (soon to show how was generated) says: “Sure, I can do that with 100 rows using a key”.</p>
<h4>A true story</h4>
<p>A customer had issues with his database. Queries were taking 15 minutes to complete, and the db in general was not responsive. Looking at the slow query log, I found the criminal query. Allow me to bring you up to speed:</p>
<p>A table is defined like this:</p>
<blockquote>
<pre>CREATE TABLE t (
  id INT UNSIGNED AUTO_INCREMENT,
  type INT UNSIGNED,
  level TINYINT unsigned,
  ...
  PRIMARY KEY(id),
  KEY `type` (type)
) ENGINE=InnoDB;</pre>
</blockquote>
<p>The offending query was this:</p>
<blockquote>
<pre>SELECT id FROM data
WHERE type=12345 AND level > 3
ORDER BY id</pre>
</blockquote>
<p>The facts were:</p>
<ul>
<li>`t` has about 10,000,000 rows.</li>
<li>The index on `type` is selective: about 100 rows per value on average.</li>
<li>The query took a long time to complete.</li>
<li>EXPLAIN has shown that MySQL uses the PRIMARY KEY, hence searches 10,000,000 rows, filtered “using where”.</li>
<li>The <em>other</em> EXPLAIN has shown that by using the `type` key, only 110 rows are expected, to be filtered “using where”, then sorted “using filesort”</li>
</ul>
<p>So MySQL acknowledged it was generating the wrong plan. The <em>other</em> plan was better by its own standards.</p>
<h4>Solving the problem</h4>
<p>Let’s walk through 7 ways to solve the problem, starting with the more aggressive solutions, refining to achieve desired behavior through subtle changes. <a href="https://shlomi-noach.github.io/blog/mysql/7-ways-to-convince-mysql-to-use-the-right-index#more-695" class="more-link">Continue reading »<span class="screen-reader-text"> “7 ways to convince MySQL to use the right index”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/7-ways-to-convince-mysql-to-use-the-right-index#comments">39 Comments<span class="screen-reader-text"> on 7 ways to convince MySQL to use the right index</span></a></span>	</footer>
</article>

<article id="post-629" class="post-629 post type-post status-publish format-standard hentry category-mysql tag-openark-kit">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/online-alter-table-now-available-in-openark-kit" rel="bookmark">Online ALTER TABLE now available in openark kit</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/openark-kit" rel="tag">openark kit</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/online-alter-table-now-available-in-openark-kit" rel="bookmark"><time class="entry-date published" datetime="2009-03-24T18:19:59+02:00">March 24, 2009</time><time class="updated" datetime="2011-06-01T07:28:37+02:00">June 1, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>A new utility in <a title="openark kit home page" href="http://code.openark.org/forge/openark-kit">openark kit</a> allows for online ALTER TABLE operation. That is, the modification of table structure without locking down the entire table for the duration of the operation. The <a title="oak-online-alter-table utility" href="http://openarkkit.googlecode.com/svn/trunk/openarkkit/doc/html/oak-online-alter-table.html">oak-online-alter-table</a> utility works under the following restrictions:</p>
<ul>
<li>The table has at least one single-column UNIQUE KEY <em>[*]</em></li>
<li>Altered table shares a single-column UNIQUE KEY with the original table <em>[*]</em></li>
<li>No ‘AFTER’ triggers are defined on the table (the utility creates its own triggers for the duration of the operation)</li>
<li>The table has no FOREIGN KEYs <em>[*][#]</em></li>
<li>Table name is no longer than 57 characters</li>
</ul>
<p><em>[*]: Restriction is scheduled to be removed or partly removed.</em></p>
<p><em>[#]: ‘Child-side’ foreign keys may actually work, but have not been tested.<br>
</em></p>
<p>Follows is a mini FAQ which attempts to introduce the utility.</p>
<h4>So what exactly does this utility provide?</h4>
<ul>
<li>First and foremost, the ability to perform a non blocking ALTER TABLE. This has long been an issue with MySQL, and complex Master-Master, application aware solutions are currently required in order to perform an ALTER TABLE with minimal downtime. The utility offers a no-downtime solution, albeit there is performance penalty for the duration of its runtime, and some requirements to meet.</li>
<li>It also supports a ‘null’ ALTER. That is, an ALTER TABLE which does not change anything. This effectively means rebuilding of the table. For InnoDB tables with innodb_file_per_table, for example, this could be the means of regaining disk space after removing many rows from the table. Also, while it does not strictly act like OPTIMIZE TABLE, the effect of running this utility should build a better organized table on disk (this as yet unverified).</li>
<li>Another thing this utility supports is the building of a ghost table: a duplicate of a given table, which keeps mirroring the original table via triggers. <em>[May be removed in future versions]</em></li>
</ul>
<h4> <a href="https://shlomi-noach.github.io/blog/mysql/online-alter-table-now-available-in-openark-kit#more-629" class="more-link">Continue reading »<span class="screen-reader-text"> “Online ALTER TABLE now available in openark kit”</span></a></h4>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/online-alter-table-now-available-in-openark-kit#comments">13 Comments<span class="screen-reader-text"> on Online ALTER TABLE now available in openark kit</span></a></span>	</footer>
</article>

<article id="post-658" class="post-658 post type-post status-publish format-standard hentry category-mysql tag-myisam">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/lock-tables-in-myisam-is-not-a-poor-mans-tranactions-substitute" rel="bookmark">LOCK TABLES in MyISAM is NOT a poor man’s tranactions substitute</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/myisam" rel="tag">MyISAM</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/lock-tables-in-myisam-is-not-a-poor-mans-tranactions-substitute" rel="bookmark"><time class="entry-date published" datetime="2009-03-18T09:37:56+02:00">March 18, 2009</time><time class="updated" datetime="2009-03-18T09:41:41+02:00">March 18, 2009</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I get to hear that a lot: that LOCK TABLES with MyISAM is some sort of replacement for transactions; some model we can work with which gives us ‘transactional flavor’.</p>
<p>It isn’t, and here’s why.</p>
<p>When we speak of a transactional database/engine, we check out its ACID compliance. Let’s break out the ACID and see what LOCK TABLES provides us with:</p>
<ul>
<li><strong>A</strong>: Atomicity. MyISAM does not provide atomicity.  If we have LOCK TABLES followed by two statements, then closed by UNLOCK TABLES, then it follows that a crash between the two statements will have the first one applied, the second one not not applied. No mechanism ensures an “all or nothing” behavior.</li>
<li><strong>C</strong>: Consistency. An error in a statement would roll back the entire transaction in a transactional database. This won’t work on MyISAM: every statement is “committed” immediately.</li>
<li><strong>I</strong>: Isolation. Without LCOK TABLES, working with MyISAM resembles using the <strong>read uncommitted</strong>, or <strong>dirty read</strong> isolation level. With LOCK TABLES – it depends. If you were to use LOCK TABLES … WRITE on all tables in all statements, you would get the <strong>serializable</strong> isolation level. Actually it would be more than <strong>serializable</strong>. It would be <em>truely serial</em>.</li>
<li><strong>D</strong>: Durability. Did the INSERT succeed? And did the power went down just after? MyISAM provides not guarantees that the data will be there.</li>
</ul>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/lock-tables-in-myisam-is-not-a-poor-mans-tranactions-substitute#more-658" class="more-link">Continue reading »<span class="screen-reader-text"> “LOCK TABLES in MyISAM is NOT a poor man’s tranactions substitute”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/lock-tables-in-myisam-is-not-a-poor-mans-tranactions-substitute#comments">3 Comments<span class="screen-reader-text"> on LOCK TABLES in MyISAM is NOT a poor man’s tranactions substitute</span></a></span>	</footer>
</article>

<article id="post-434" class="post-434 post type-post status-publish format-standard hentry category-mysql tag-humor">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/tales-of-the-trade-1-a-day-in-the-life-of-a-mysql-instructor" rel="bookmark">Tales of the Trade #1: A day in the life of a MySQL instructor</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/humor" rel="tag">Humor</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/tales-of-the-trade-1-a-day-in-the-life-of-a-mysql-instructor" rel="bookmark"><time class="entry-date published updated" datetime="2009-03-12T09:56:33+02:00">March 12, 2009</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<div class="mceTemp">
<dl id="attachment_590" class="wp-caption alignnone" style="width: 610px;">
<dt class="wp-caption-dt"><img class="size-full wp-image-590" title="Tales of the Trade 1" src="https://shlomi-noach.github.io/blog/wp-content/uploads/2009/02/tales-of-the-trade-1.png" alt="Tales of the Trade 1" width="600" height="1268" srcset="https://shlomi-noach.github.io/blog/wp-content/uploads/2009/02/tales-of-the-trade-1.png 600w,https://shlomi-noach.github.io/blog/wp-content/uploads/2009/02/tales-of-the-trade-1-484x1024.png 484w" sizes="(max-width: 600px) 100vw, 600px"></dt>
</dl>
</div>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/tales-of-the-trade-1-a-day-in-the-life-of-a-mysql-instructor#comments">6 Comments<span class="screen-reader-text"> on Tales of the Trade #1: A day in the life of a MySQL instructor</span></a></span>	</footer>
</article>

<article id="post-634" class="post-634 post type-post status-publish format-standard hentry category-mysql tag-configuration tag-innodb tag-myisam tag-user-group">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-user-group-meetings-in-israel" rel="bookmark">MySQL User Group Meetings in Israel</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/configuration" rel="tag">Configuration</a><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/myisam" rel="tag">MyISAM</a><a href="https://shlomi-noach.github.io/blog/tag/user-group" rel="tag">User Group</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-user-group-meetings-in-israel" rel="bookmark"><time class="entry-date published updated" datetime="2009-03-11T07:42:18+02:00">March 11, 2009</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>This is a short note that the MySQL User Group Meetings in Israel are established (well, re-established after a very long period).</p>
<p>Thanks to Eddy Resnick from Sun Microsystems Israel who has set up the meetings. So far, we’ve had 2 successful meetings, and we intend to have more! First one was in Sun’s offices in Herzlia; second one, held last week, was at <a title="Interbit" href="http://interbit.co.il/">Interbit</a> (a MySQL training center) in Ramat Gan. We hope to hold these meetings on a monthly basis, and the next ones are expected to be held at Interbit.</p>
<p>A new (blessed) law in Israel forbids us from sending invitations for these meetings via email without prior consent of the recepient (this law has passed as means of stopping spam). We do realize there are many users out there who would be interested in these meeting. For those users: please stay tuned to Interbit’s website, where future meetings will be published – or just give them a call!</p>
<p>It was my honor to present a short session, one of three in this last meeting. Other presenters were Erad Deutch, who presented “MySQL Success Stories”, and Moshe Kaplan, who presented “Sharding Solutions”. I have presented “MyISAM & InnoDB Tuning Fundamentals”, where I have layed down the basics behind parameter tuning for these storage engines.</p>
<p>As per audience request, here’s the <a href="https://shlomi-noach.github.io/blog/wp-content/uploads/2009/03/innodb_myisam_tuning_fundamentals_share.pdf">presentation</a> in PDF format:</p>
<p>I intend to give sessions in future meetings, and have already started working on my next one. So please come, it’s a fun way to pass a nice afternoon. See you there!</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-user-group-meetings-in-israel#comments">3 Comments<span class="screen-reader-text"> on MySQL User Group Meetings in Israel</span></a></span>	</footer>
</article>

<article id="post-443" class="post-443 post type-post status-publish format-standard hentry category-mysql tag-openark-kit tag-security">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/blocking-user-accounts" rel="bookmark">Blocking user accounts</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/openark-kit" rel="tag">openark kit</a><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/blocking-user-accounts" rel="bookmark"><time class="entry-date published" datetime="2009-03-05T11:44:40+02:00">March 5, 2009</time><time class="updated" datetime="2011-02-08T10:51:42+02:00">February 8, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>A long time missing feature in MySQL is temporarily blocking accounts: denying a user to log in, without affecting any other of her privileges.</p>
<p>There is no such privilege as ‘LOGIN’ in the grants table, as the ability to log in is the most basic one MySQL allows. This basic privilege is called USAGE.</p>
<p>I’ll present a hack around this, one which <a title="openark kit: oak-block-account" href="http://openarkkit.googlecode.com/svn/trunk/openarkkit/doc/html/oak-block-account.html">oak-block-account</a> implements. Before presenting the hack, lets lay down some requirements:</p>
<ul>
<li>A user can be blocked from logging in to MySQL.</li>
<li>Such a blocked user can later be ‘released’, re-enabling him to log in.</li>
<li>It should be possible to determine if a certain user is currently blocked or not.</li>
</ul>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/blocking-user-accounts#more-443" class="more-link">Continue reading »<span class="screen-reader-text"> “Blocking user accounts”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/blocking-user-accounts#comments">4 Comments<span class="screen-reader-text"> on Blocking user accounts</span></a></span>	</footer>
</article>

<article id="post-596" class="post-596 post type-post status-publish format-standard hentry category-mysql tag-openark-kit tag-python">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/announcing-openark-kit" rel="bookmark">Announcing openark kit</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/openark-kit" rel="tag">openark kit</a><a href="https://shlomi-noach.github.io/blog/tag/python" rel="tag">python</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/announcing-openark-kit" rel="bookmark"><time class="entry-date published" datetime="2009-02-25T13:55:45+02:00">February 25, 2009</time><time class="updated" datetime="2009-03-13T20:33:53+02:00">March 13, 2009</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>It is my great pleasure to announce the availability of the <a title="openark kit project home page" href="http://code.openark.org/forge/openark-kit">openark kit</a>, a set of lightweight utilities for MySQL, which eases every day tasks.</p>
<p>The available tools are:</p>
<ul>
<li><a title="oak-apply-ri" href="http://code.openark.org/forge/openark-kit/oak-apply-ri">oak-apply-ri</a>: apply referential integrity on two columns with parent-child  relationship.</li>
<li><a title="oak-block-account" href="http://code.openark.org/forge/openark-kit/oak-block-account">oak-block-account</a>: block or release MySQL users accounts, disabling them or enabling them to login.</li>
<li><a title="oak-kill-slow-queries" href="http://code.openark.org/forge/openark-kit/oak-kill-slow-queries">oak-kill-slow-queries</a>: terminate long running queries.</li>
<li><a title="oak-modify-charset" href="http://code.openark.org/forge/openark-kit/oak-modify-charset">oak-modify-charset</a>: change the character set (and collation) of a textual column.</li>
<li><a title="oak-purge-master-logs" href="http://code.openark.org/forge/openark-kit/oak-purge-master-logs">oak-purge-master-logs</a>: purge master logs, depending on the state of replicating slaves.</li>
<li><a title="oak-security-audit" href="http://code.openark.org/forge/openark-kit/oak-security-audit">oak-security-audit</a>: audit accounts, passwords, privileges and other security settings.</li>
<li><a title="oak-show-limits" href="http://code.openark.org/forge/openark-kit/oak-show-limits">oak-show-limits</a>: show AUTO_INCREMENT “free space”.</li>
<li><a title="oak-show-replication-status" href="http://code.openark.org/forge/openark-kit/oak-show-replication-status">oak-show-replication-status</a>: show how far behind are replicating slaves on a given master.</li>
</ul>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/announcing-openark-kit#more-596" class="more-link">Continue reading »<span class="screen-reader-text"> “Announcing openark kit”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/announcing-openark-kit#comments">1 Comment<span class="screen-reader-text"> on Announcing openark kit</span></a></span>	</footer>
</article>

<article id="post-531" class="post-531 post type-post status-publish format-standard hentry category-mysql tag-configuration tag-installation tag-linux">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/manually-installing-multiple-mysql-instances-on-linux-howto" rel="bookmark">Manually installing multiple MySQL instances on Linux: HOWTO</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/configuration" rel="tag">Configuration</a><a href="https://shlomi-noach.github.io/blog/tag/installation" rel="tag">Installation</a><a href="https://shlomi-noach.github.io/blog/tag/linux" rel="tag">Linux</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/manually-installing-multiple-mysql-instances-on-linux-howto" rel="bookmark"><time class="entry-date published" datetime="2009-02-19T08:02:00+02:00">February 19, 2009</time><time class="updated" datetime="2010-09-17T09:26:53+02:00">September 17, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Installing a single MySQL instance on a linux machine is a very simple operation. It may be as simple as:</p>
<blockquote>
<pre>apt-get install mysql-server</pre>
</blockquote>
<p>But you cannot use this method to install another MySQL instance. Moreover, if you try to manually install another instance, you may find that some collisions occur.</p>
<p>For example, when trying to install two 5.0 servers, apt-get or yum will just tell me “package is already installed”.</p>
<p>When trying to install a new 5.1 server along with 5.0, an implicit upgrade is performed.</p>
<p>But even if we try forcing the installation, there are collisions:</p>
<ul>
<li>A dpkg or rpm will install my.cnf under <strong>/etc</strong>. Two installations will override one another. With RPM you may get a .rpmsave backup file, but that doesn’t help too much.</li>
<li>The daemon file: <strong>/etc/init.d/mysql(d)</strong> is overwritten.</li>
<li>The default data directory is used for both installations: <strong>/var/lib/mysql</strong></li>
<li>The binaries are overwritten</li>
<li>Both installations will use port 3306.</li>
<li>In both installations, the same socket file (e.g. <strong>/var/run/mysql/mysql.sock</strong>) is used.</li>
</ul>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/manually-installing-multiple-mysql-instances-on-linux-howto#more-531" class="more-link">Continue reading »<span class="screen-reader-text"> “Manually installing multiple MySQL instances on Linux: HOWTO”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/manually-installing-multiple-mysql-instances-on-linux-howto#comments">28 Comments<span class="screen-reader-text"> on Manually installing multiple MySQL instances on Linux: HOWTO</span></a></span>	</footer>
</article>

	<nav class="navigation posts-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/39">Older posts</a></div><div class="nav-next"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/37">Newer posts</a></div></div>
	</nav>
	</main>


	<footer id="colophon" class="site-footer">
		<div class="site-info">
			<a href="https://wordpress.org/">
				Powered by WordPress			</a>
			<span class="sep"> | </span>
				Theme: <a href="http://openark.org">openark-primer</a> by <a href="http://underscores.me/">Underscores.me</a>.		</div>
	</footer>
</div>

	<div style="display:none">
	</div>
<script>
var pollsL10n = {"ajax_url":"https:\/\/shlomi-noach.github.io\/blog\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-js.js"></script>
<script src="https://secure.gravatar.com/js/gprofiles.js?ver=2020Junaa"></script>
<script>
var WPGroHo = {"my_hash":""};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/modules/wpgroho.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/navigation.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202024.js" async="async" defer></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.2.1',blog:'32412571',post:'0',tz:'2',srv:'code.openark.org'} ]);
	_stq.push([ 'clickTrackerInit', '32412571', '0' ]);
</script>

</body>
</html>
