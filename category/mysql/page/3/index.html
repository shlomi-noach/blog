<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	<title>MySQL – Page 3 – code.openark.org</title>
<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//s.w.org">



<link rel="stylesheet" id="wp-block-library-css" href="https://shlomi-noach.github.io/blog/wp-includes/css/dist/block-library/style.min.css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wp-polls-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-css.css" media="all">
<style id="wp-polls-inline-css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="openark-primer-style-css" href="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/style.css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/css/jetpack.css" media="all">
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script>



<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel="dns-prefetch" href="//v0.wordpress.com">


<meta property="og:type" content="website">
<meta property="og:title" content="MySQL – Page 3 – code.openark.org">
<meta property="og:url" content="https://shlomi-noach.github.io/blog/category/mysql">
<meta property="og:description" content="MySQL related posts">
<meta property="og:site_name" content="code.openark.org">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">


<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(242,101,34,.88);}</style></head>

<body class="archive paged category category-mysql category-5 paged-3 category-paged-3 hfeed no-sidebar">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
							<p class="site-title"><a href="https://shlomi-noach.github.io/blog/" rel="home">code.openark.org</a></p>
								<p class="site-description">Blog by Shlomi Noach</p>
			
			<nav id="site-navigation" class="main-navigation">
				<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">primary-menu</button>
				<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-8109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8109"><a href="https://shlomi-noach.github.io/blog/archives">archives</a></li>
<li id="menu-item-8050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8050"><a href="https://shlomi-noach.github.io/blog/presentations">presentations</a></li>
<li id="menu-item-8055" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8055"><a href="https://shlomi-noach.github.io/blog/about">about</a></li>
<li id="menu-item-8071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8071"><a href="https://github.com/shlomi-noach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li>
<li id="menu-item-8074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8074"><a href="https://www.linkedin.com/in/shlominoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li>
<li id="menu-item-8072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8072"><a href="https://twitter.com/ShlomiNoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></li>
<li id="menu-item-8073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8073"><a href="https://shlomi-noach.github.io/blog/feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-12.832 20c-1.197 0-2.168-.969-2.168-2.165s.971-2.165 2.168-2.165 2.167.969 2.167 2.165-.97 2.165-2.167 2.165zm5.18 0c-.041-4.029-3.314-7.298-7.348-7.339v-3.207c5.814.041 10.518 4.739 10.561 10.546h-3.213zm5.441 0c-.021-7.063-5.736-12.761-12.789-12.792v-3.208c8.83.031 15.98 7.179 16 16h-3.211z"></path></svg></a></li>
</ul></div>			</nav>
		</div>
	</header>

	<main id="primary" class="site-main">

		
			<header class="page-header">
				<h1 class="page-title">Category: MySQL</h1><div class="archive-description"><p>MySQL related posts</p>
</div>			</header>

			
<article id="post-7772" class="post-7772 post type-post status-publish format-standard hentry category-mysql tag-gh-ost tag-github tag-open-source tag-orchestrator tag-speaking">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-august-penguin-mysql-track-github-sponsored" rel="bookmark">Speaking at August Penguin, MySQL Track, GitHub sponsored</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/gh-ost" rel="tag">gh-ost</a><a href="https://shlomi-noach.github.io/blog/tag/github" rel="tag">GitHub</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a><a href="https://shlomi-noach.github.io/blog/tag/speaking" rel="tag">Speaking</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-august-penguin-mysql-track-github-sponsored" rel="bookmark"><time class="entry-date published" datetime="2017-09-03T12:42:05+02:00">September 3, 2017</time><time class="updated" datetime="2017-09-03T12:42:53+02:00">September 3, 2017</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>This Thursday I’ll be presenting at <a href="http://ap.hamakor.org.il/2017/en/">August Penguin</a>, conveniently taking place <em>September</em> 7th, 8th, Ramat Gan, Israel.</p>
<p>I will be speaking as part of the MySQL track, 2nd half of Thursday. The (Hebrew) schedule is <a href="http://ap.hamakor.org.il/2017/index.html#schedule">here</a>.</p>
<p>My talk is titled <strong>Reliable failovers, safe schema migrations: open source solutions to MySQL problems</strong>. I will describe some of the open source MySQL infrastructure work we run at GitHub ; how it solves reliability, availability and usability. I’ll describe some of our internal workflows and our use of chat and chatops.</p>
<p>I’m proud to announce <strong><a href="http://github.com/">GitHub</a></strong> sponsors the event. We won’t have a booth, but please do grab me in the hallways or over lunch to chat!</p>
<p>And, yes, octocat stickers will be made available 🙂</p>
<p> </p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-august-penguin-mysql-track-github-sponsored#respond">Leave a Comment<span class="screen-reader-text"> on Speaking at August Penguin, MySQL Track, GitHub sponsored</span></a></span>	</footer>
</article>

<article id="post-7740" class="post-7740 post type-post status-publish format-standard hentry category-mysql tag-failover tag-high-availability tag-open-source tag-orchestrator tag-raft tag-replication">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/orchestratorraft-pre-release-3-0" rel="bookmark">orchestrator/raft: Pre-Release 3.0</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/failover" rel="tag">Failover</a><a href="https://shlomi-noach.github.io/blog/tag/high-availability" rel="tag">High availability</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a><a href="https://shlomi-noach.github.io/blog/tag/raft" rel="tag">raft</a><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/orchestratorraft-pre-release-3-0" rel="bookmark"><time class="entry-date published" datetime="2017-08-03T10:41:11+02:00">August 3, 2017</time><time class="updated" datetime="2017-08-03T15:32:59+02:00">August 3, 2017</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p><code>orchestrator</code> <strong>3.0 Pre-Release</strong> is <a href="https://github.com/github/orchestrator/releases/tag/v3.0.pre-release">now available</a>. Most notable are <strong>Raft</strong> consensus, <strong>SQLite</strong> backend support, <strong>orchestrator-client</strong> no-binary-required client script.</p>
<h3>TL;DR</h3>
<p>You may now set up high availability for <code>orchestrator</code> via <code>raft</code> consensus, without need to set up high availability for <code>orchestrator</code>‘s backend MySQL servers (such as Galera/InnoDB Cluster). In fact, you can run a <code>orchestrator/raft</code> setup using embedded <code>SQLite</code> backend DB. Read on.</p>
<p><code>orchestrator</code> still supports the existing shared backend DB paradigm; nothing dramatic changes if you upgrade to <strong>3.0</strong> and do not configure <code>raft</code>.</p>
<h3>orchestrator/raft</h3>
<p><a href="https://raft.github.io/">Raft</a> is a consensus protocol, supporting leader election and consensus across a distributed system.  In an <code>orchestrator/raft</code> setup <code>orchestrator</code> nodes talk to each other via raft protocol, form consensus and elect a leader. Each <code>orchestrator</code> node has its own <em>dedicated</em> backend database. The backend databases do not speak to each other; only the <code>orchestrator</code> nodes speak to each other.</p>
<p>No MySQL replication setup needed; the backend DBs act as standalone servers. In fact, the backend server doesn’t have to be MySQL, and <code>SQLite</code> is supported. <code>orchestrator</code> now ships with <code>SQLite</code> embedded, no external dependency needed. <a href="https://shlomi-noach.github.io/blog/mysql/orchestratorraft-pre-release-3-0#more-7740" class="more-link">Continue reading »<span class="screen-reader-text"> “orchestrator/raft: Pre-Release 3.0”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/orchestratorraft-pre-release-3-0#comments">4 Comments<span class="screen-reader-text"> on orchestrator/raft: Pre-Release 3.0</span></a></span>	</footer>
</article>

<article id="post-7726" class="post-7726 post type-post status-publish format-standard hentry category-mysql tag-high-availability tag-orchestrator tag-replication">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/whats-so-complicated-about-a-master-failover" rel="bookmark">What’s so complicated about a master failover?</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/high-availability" rel="tag">High availability</a><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/whats-so-complicated-about-a-master-failover" rel="bookmark"><time class="entry-date published updated" datetime="2017-06-29T17:01:58+02:00">June 29, 2017</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>The more work on <a href="https://github.com/github/orchestrator">orchestrator</a>, the more user input and the more production experience, the more insights I get into MySQL master recoveries. I’d like to share the complexities in correctly running general-purpose master failovers; from picking up the right candidates to finalizing the promotion.</p>
<p>The TL;DR is: we’re often unaware of just how things can turn at the time of failover, and the impact of every single decision we make. Different environments have different requirements, and different users wish to have different policies. Understanding the scenarios can help you make the right choice.</p>
<p>The scenarios and considerations below are ones I picked while browsing through the <code>orchestrator</code> code and through Issues and questions. There are more. There are always more scenarios.</p>
<p>I discuss “normal replication” scenarios below; some of these will apply to synchronous replication setups (Galera, XtraDB Cluster, InnoDB Cluster) where using cross DC, where using intermediate masters, where working in an evolving environment.</p>
<p><code>orchestrator</code>-wise, please refer to <a title='Permanent Link to "MySQL High Availability tools" followup, the missing piece: orchestrator' href="https://shlomi-noach.github.io/blog/mysql/mysql-high-availability-tools-followup-the-missing-piece-orchestrator" rel="bookmark">“MySQL High Availability tools” followup, the missing piece: orchestrator</a>, an earlier post. Some notions from that post are re-iterated here.  <a href="https://shlomi-noach.github.io/blog/mysql/whats-so-complicated-about-a-master-failover#more-7726" class="more-link">Continue reading »<span class="screen-reader-text"> “What’s so complicated about a master failover?”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/whats-so-complicated-about-a-master-failover#comments">4 Comments<span class="screen-reader-text"> on What’s so complicated about a master failover?</span></a></span>	</footer>
</article>

<article id="post-7717" class="post-7717 post type-post status-publish format-standard hentry category-development category-mysql tag-freno tag-golang tag-mysql tag-orchestrator tag-raft">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/observations-on-the-hashicorpraft-library-and-notes-on-rdbms" rel="bookmark">Observations on the hashicorp/raft library, and notes on RDBMS</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/development" rel="category tag">Development</a> <a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/freno" rel="tag">freno</a><a href="https://shlomi-noach.github.io/blog/tag/golang" rel="tag">golang</a><a href="https://shlomi-noach.github.io/blog/tag/mysql" rel="tag">MySQL</a><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a><a href="https://shlomi-noach.github.io/blog/tag/raft" rel="tag">raft</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/observations-on-the-hashicorpraft-library-and-notes-on-rdbms" rel="bookmark"><time class="entry-date published updated" datetime="2017-06-20T06:05:39+02:00">June 20, 2017</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>The <a href="https://github.com/hashicorp/raft">hashicorp/raft</a> library is a Go library to provide consensus via Raft protocol implementation. It is the underlying library behind Hashicorp’s <a href="https://github.com/hashicorp/consul">Consul</a>.</p>
<p>I’ve had the opportunity to work with this library a couple projects, namely <a href="https://github.com/github/freno">freno</a> and <a href="https://github.com/github/orchestrator/pull/183/">orchestrator</a>. Here are a few observations on working with this library:</p>
<ul>
<li>TL;DR on Raft: a group communication protocol; multiple nodes communicate, elect a leader. A leader leads a <em>consensus</em> (any subgroup of more than half the nodes of the original group, or hopefully all of them). Nodes may leave and rejoin, and will remain consistent with consensus.</li>
<li>The hashicorp/raft library is an implementation of the Raft protocol. There are <a href="https://raft.github.io/#implementations">other implementations</a>, and different implementations support different features.</li>
<li>The most basic premise is leader election. This is pretty straightforward to implement; you set up nodes to communicate to each other, and they elect a leader. You may query for the leader identity via <a href="https://godoc.org/github.com/hashicorp/raft#Raft.Leader">Leader()</a>, <a href="https://godoc.org/github.com/hashicorp/raft#Raft.VerifyLeader">VerifyLeader()</a>, or observing <a href="https://godoc.org/github.com/hashicorp/raft#Raft.LeaderCh">LeaderCh</a>.</li>
<li>You have no control over the identity of the leader. You cannot “prefer” one node to be the leader. You cannot <em>grab</em> leadership from an elected leader, and you cannot demote a leader unless by killing it.</li>
<li>The next premise is gossip, sending messages between the raft nodes. With <code>hashicorp/raft</code>, only the leader may send messages to the group. This is done via the <a href="https://godoc.org/github.com/hashicorp/raft#Raft.Apply">Apply()</a> function.</li>
<li>Messages are nothing but blobs. Your app encodes the messages into <code>[]byte</code> and ships it via raft. Receiving ends need to decode the bytes into a meaningful message.</li>
<li>You will check the result of Apply(), an <a href="https://godoc.org/github.com/hashicorp/raft#ApplyFuture">ApplyFuture</a>. The call to <a href="https://godoc.org/github.com/hashicorp/raft#Future">Error()</a> will wait for consensus.</li>
<li>Just what is a message consensus? It’s a guarantee that the consensus of nodes has received and registered the message.</li>
<li>Messages form the raft log.</li>
<li>Messages are guaranteed to be handled in-order across all nodes.</li>
<li>The leader is satisfied when the followers receive the messages/log, but it cares not for their interpretation of the log.</li>
<li>The leader does not collect the output, or return value, of the followers applying of the log.</li>
<li>Consequently, your followers may not abort the message. They may not cast an opinion. They must adhere to the instruction received from the leader.</li>
<li><code>hashicorp/raft</code> uses either an <a href="http://github.com/hashicorp/raft-mdb">LMDB-based</a> store or <a href="https://github.com/boltdb/bolt">BoltDB</a> for persisting your messages. Both are transactional stores.</li>
<li>Messages are expected to be idempotent: a node that, say, happens to restart, will request to join back the consensus (or to form a consensus with some other node). To do that, it will have to reapply historical messages that it may have applied in the past.</li>
<li>Number of messages (log entries) will grow infinitely. Snapshots are taken so as to truncate the log history. You will implement the snapshot dump & load.</li>
<li>A snapshot includes the log index up to which it covers.</li>
<li>Upon startup, your node will look for the most recent snapshot. It will read it, then resume replication from the aforementioned log index.</li>
<li><code>hashicorp/raft</code> provides a file-system based snapshot implementation.</li>
</ul>
<p>One of my use cases is completely satisfied with the existing implementations of <code>BoltDB</code> and of the filesystem snapshot.</p>
<p>However in another (<code>orchestrator</code>), my app stores its state in a relational backend. To that effect, I’ve modified the logstore and snapshot store. I’m using either MySQL or <code>sqlite</code> as backend stores for my app. How does that affect my <code>raft</code> use? <a href="https://shlomi-noach.github.io/blog/mysql/observations-on-the-hashicorpraft-library-and-notes-on-rdbms#more-7717" class="more-link">Continue reading »<span class="screen-reader-text"> “Observations on the hashicorp/raft library, and notes on RDBMS”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/observations-on-the-hashicorpraft-library-and-notes-on-rdbms#comments">1 Comment<span class="screen-reader-text"> on Observations on the hashicorp/raft library, and notes on RDBMS</span></a></span>	</footer>
</article>

<article id="post-7704" class="post-7704 post type-post status-publish format-standard hentry category-mysql tag-github tag-orchestrator tag-perconalive">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/practical-orchestrator-bof-github-and-other-talks-at-percona-live-2017" rel="bookmark">Practical Orchestrator, BoF, GitHub and other talks at Percona Live 2017</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/github" rel="tag">GitHub</a><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/practical-orchestrator-bof-github-and-other-talks-at-percona-live-2017" rel="bookmark"><time class="entry-date published" datetime="2017-04-19T11:59:00+02:00">April 19, 2017</time><time class="updated" datetime="2017-04-19T12:05:12+02:00">April 19, 2017</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Next week I will be presenting <a href="https://www.percona.com/live/17/sessions/practical-orchestrator">Practical Orchestrator</a> at Percona Live, Santa Clara.</p>
<p>As opposed to previous <a href="https://github.com/github/orchestrator"><code>orchestrator</code></a> talks I gave, and which were either high level or algorithmic talks, <strong>Practical Orchestrator</strong> will be, well… practical.</p>
<p>The objective for this talk is that attendees leave the classroom with a good grasp of <code>orchestrator</code>‘s powers, and know how to set up <code>orchestrator</code> in their environment.</p>
<p>We will walk through discovery, refactoring, recovery, HA. I will walk through the most important configuration settings, share advice on what makes a good deployment, and tell you how we and others run <code>orchestrator</code>. We’ll present a few scripting/automation examples. We will literally set up <code>orchestrator</code> on my computer.</p>
<p>It’s a <strong>50</strong> minute talk and it will be fast paced!</p>
<h3>ProxySQL & Orchestrator BoF</h3>
<p><a href="http://www.proxysql.com/">ProxySQL</a> is all the rage, and throughout the past 18 months René Cannaò and myself discussed a few times the potential for integration between ProxySQL and Orchestrator. We’ve also received several requests from the community.</p>
<p>We will run a BoF, a very informal session where we openly discuss our thoughts on possible integration, what makes sense and what doesn’t, and above all else would love to hear the attendees’ thoughts. We might come out of this session with some plan to pick low hanging fruit, who knows?</p>
<p>The current link to the BoF sessions is <a href="https://www.percona.com/live/17/sessions/birds-feather-sessions">this</a>. It seems terribly broken, and hopefully I’ll replace it later on.</p>
<h3>GitHub talks</h3>
<p>GitHub engineers will further present these talks: <a href="https://shlomi-noach.github.io/blog/mysql/practical-orchestrator-bof-github-and-other-talks-at-percona-live-2017#more-7704" class="more-link">Continue reading »<span class="screen-reader-text"> “Practical Orchestrator, BoF, GitHub and other talks at Percona Live 2017”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/practical-orchestrator-bof-github-and-other-talks-at-percona-live-2017#respond">Leave a Comment<span class="screen-reader-text"> on Practical Orchestrator, BoF, GitHub and other talks at Percona Live 2017</span></a></span>	</footer>
</article>

<article id="post-7690" class="post-7690 post type-post status-publish format-standard hentry category-mysql tag-high-availability tag-orchestrator tag-replication">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-high-availability-tools-followup-the-missing-piece-orchestrator" rel="bookmark">“MySQL High Availability tools” followup, the missing piece: orchestrator</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/high-availability" rel="tag">High availability</a><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-high-availability-tools-followup-the-missing-piece-orchestrator" rel="bookmark"><time class="entry-date published" datetime="2017-04-06T14:56:45+02:00">April 6, 2017</time><time class="updated" datetime="2017-04-06T15:08:21+02:00">April 6, 2017</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I read with interest <a href="https://severalnines.com/blog/mysql-high-availability-tools-comparing-mha-mrm-and-clustercontrol">MySQL High Availability tools – Comparing MHA, MRM and ClusterControl</a> by SeveralNines. I thought there was a missing piece in the comparison: <a href="https://github.com/github/orchestrator">orchestrator</a>, and that as result the comparion was missing scope and context.</p>
<p>I’d like to add my thoughts on topics addressed in the post. I’m by no means an expert on MHA, MRM or ClusterControl, and will mostly focus on how <code>orchestrator</code> tackles high availability issues raised in the post.</p>
<h3>What this is</h3>
<p>This is to add insights on the complexity of failovers. Over the duration of three years, I always think I’ve seen it all, and then get hit by yet a new crazy scenario. Doing the right thing automatically is <em>difficult</em>.</p>
<p>In this post, I’m not trying to convince you to use <code>orchestrator</code> (though I’d be happy if you did). To be very clear, I’m not claiming it is <em>better</em> than any other tool. As always, each tool has pros and cons.</p>
<p>This post does <em>not</em> claim other tools are not good. Nor that <code>orchestrator</code> has all the answers. At the end of the day, pick the solution that works best for you. I’m happy to use a solution that reliably solves <strong>99%</strong> of the cases as opposed to an unreliable solution that claims to solve <strong>99.99%</strong> of the cases.</p>
<h3>Quick background</h3>
<p><code>orchestrator</code> is actively maintained by GitHub. It manages <a href="http://githubengineering.com/orchestrator-github/">automated failovers at GitHub</a>. It manages automated failovers at Booking.com, one of the largest MySQL setups on this planet. It manages automated failovers as part of <a href="http://vitess.io/">Vitess</a>. These are some names I’m free to disclose, and browsing the <a href="https://github.com/github/orchestrator/issues">issues</a> shows a few more users running failovers in production. Otherwise, it is used for topology management and visualization in a large number of companies such as Square, Etsy, Sendgrid, Godaddy and more.</p>
<p>Let’s now follow one-by-one the observations on the SeveralNines post. <a href="https://shlomi-noach.github.io/blog/mysql/mysql-high-availability-tools-followup-the-missing-piece-orchestrator#more-7690" class="more-link">Continue reading »<span class="screen-reader-text"> ““MySQL High Availability tools” followup, the missing piece: orchestrator”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-high-availability-tools-followup-the-missing-piece-orchestrator#comments">7 Comments<span class="screen-reader-text"> on “MySQL High Availability tools” followup, the missing piece: orchestrator</span></a></span>	</footer>
</article>

<article id="post-7680" class="post-7680 post type-post status-publish format-standard hentry category-mysql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-community-awards-2017-call-for-nominations" rel="bookmark">MySQL Community Awards 2017: Call for Nominations!</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-community-awards-2017-call-for-nominations" rel="bookmark"><time class="entry-date published" datetime="2017-03-16T08:34:45+02:00">March 16, 2017</time><time class="updated" datetime="2017-03-21T16:22:29+02:00">March 21, 2017</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>The <strong>2017</strong> MySQL Community Awards event will take place, as usual, in Santa Clara, during the Percona Live Data Performance Conference, April 2017.</p>
<p>The MySQL Community Awards is a community based initiative. The idea is to publicly recognize contributors to the MySQL ecosystem. The entire process of discussing, voting and awarding is controlled by an independent group of community members, typically based of past winners or their representatives, as well as known contributors.</p>
<p>It is a self-appointed, self-declared, self-making-up-the-rules-as-it-goes committee. It is also very aware of the importance of the community; a no-nonsense, non-political, adhering to tradition, self criticizing committee.</p>
<p>The Call for Nominations is open. We are seeking the community’s assistance in nominating candidates in the following categories:<span id="more-7199"></span></p>
<h4>MySQL Community Awards: Community Contributor of the year 2017</h4>
<p>This is a personal award; a winner would a person who has made contribution to the MySQL ecosystem. This could be via development, advocating, blogging, speaking, supporting, etc. All things go.</p>
<h4>MySQL Community Awards: Application of the year 2017</h4>
<p>An application, project, product etc. which supports the MySQL ecosystem by either contributing code, complementing its behavior, supporting its use, etc. This could range from a one man open source project to a large scale social service.</p>
<h4>MySQL Community Awards: Corporate Contributor of the year 2017</h4>
<p>A company who made contribution to the MySQL ecosystem. This might be a corporate which released major open source code; one that advocates for MySQL; one that help out community members by… anything.</p>
<p>For a list of previous winners, please see <a href="http://mysqlawards.org/mysql-hall-of-fame/">MySQL Hall of Fame</a>. <a href="https://shlomi-noach.github.io/blog/mysql/mysql-community-awards-2017-call-for-nominations#more-7680" class="more-link">Continue reading »<span class="screen-reader-text"> “MySQL Community Awards 2017: Call for Nominations!”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-community-awards-2017-call-for-nominations#comments">5 Comments<span class="screen-reader-text"> on MySQL Community Awards 2017: Call for Nominations!</span></a></span>	</footer>
</article>

<article id="post-7673" class="post-7673 post type-post status-publish format-standard hentry category-mysql tag-orchestrator tag-puppet">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/orchestrator-puppet-module-now-available" rel="bookmark">orchestrator Puppet module now available</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a><a href="https://shlomi-noach.github.io/blog/tag/puppet" rel="tag">puppet</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/orchestrator-puppet-module-now-available" rel="bookmark"><time class="entry-date published" datetime="2017-02-01T13:19:53+02:00">February 1, 2017</time><time class="updated" datetime="2017-02-01T13:20:16+02:00">February 1, 2017</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>We have just open sourced and published an <a href="https://github.com/github/puppet-orchestrator-for-mysql">orchestrator puppet module</a>. This module is authored by <a href="https://github.com/tomkrouper">Tom Krouper</a> of GitHub’s database infrastructure team, and is what we use internally at GitHub for deploying <code>orchestrator</code>.</p>
<p>The module manages the <code>orchestrator</code> service, the config file (inherit to override values), etc (pun intended). Check it out!</p>
<p> </p>
<p> </p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/orchestrator-puppet-module-now-available#respond">Leave a Comment<span class="screen-reader-text"> on orchestrator Puppet module now available</span></a></span>	</footer>
</article>

<article id="post-7663" class="post-7663 post type-post status-publish format-standard hentry category-mysql tag-sql tag-sqlite">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/some-observations-on-mysql-to-sqlite-migration-compatibility" rel="bookmark">Some observations on MySQL to sqlite migration & compatibility</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a><a href="https://shlomi-noach.github.io/blog/tag/sqlite" rel="tag">sqlite</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/some-observations-on-mysql-to-sqlite-migration-compatibility" rel="bookmark"><time class="entry-date published" datetime="2017-01-30T11:14:33+02:00">January 30, 2017</time><time class="updated" datetime="2017-01-30T11:16:18+02:00">January 30, 2017</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I’m experimenting with <a href="https://www.sqlite.org/">sqlite</a> as backend database for <a href="https://github.com/github/orchestrator">orchestrator</a>. While <code>orchestrator</code> manages MySQL replication topologies, it also uses MySQL as backend. For some deployments, and I’m looking into such one, having MySQL as backend is a considerable overhead.</p>
<p>This sent me to the route of looking into a self contained <code>orchestrator</code> binary + backend DB. I would have <code>orchestrator</code> spawn up its own backend database instead of connecting to an external one.</p>
<h3>Why even relational?</h3>
<p>Can’t <code>orchestrator</code> just use a key-value backend?</p>
<p>Maybe it could. But frankly I enjoy the power of relational databases, and the versatility they offer has proven itself multiple times with <code>orchestrator</code>, being able to answer interesting, new, complex questions about one’s topology by crafting SQL queries.</p>
<p>Moreover, <code>orchestrator</code> is already heavily invested in the relational model. At this time, replacing all SQL queries with key-value reads seems to me as a significant investment in time and risk. So I was looking for a relational, SQL accessible embeddable database for <code>orchestrator</code>.</p>
<h3>Why sqlite?</h3>
<p>I am in particular looking at two options: sqlite (via the <a href="https://github.com/mattn/go-sqlite3">go-sqlite3</a> binding) and <a href="https://github.com/pingcap/tidb">TiDB</a>. sqlite does not need much introduction, and I’ll just say it’s embeddable within the golang-built binary. <a href="https://shlomi-noach.github.io/blog/mysql/some-observations-on-mysql-to-sqlite-migration-compatibility#more-7663" class="more-link">Continue reading »<span class="screen-reader-text"> “Some observations on MySQL to sqlite migration & compatibility”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/some-observations-on-mysql-to-sqlite-migration-compatibility#comments">4 Comments<span class="screen-reader-text"> on Some observations on MySQL to sqlite migration & compatibility</span></a></span>	</footer>
</article>

<article id="post-7646" class="post-7646 post type-post status-publish format-standard hentry category-mysql tag-community tag-gh-ost tag-operations tag-replication">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/discussing-online-schema-migrations-with-oracles-mysql-engineering-managers" rel="bookmark">Discussing online schema migrations with Oracle’s MySQL engineering managers</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/community" rel="tag">community</a><a href="https://shlomi-noach.github.io/blog/tag/gh-ost" rel="tag">gh-ost</a><a href="https://shlomi-noach.github.io/blog/tag/operations" rel="tag">operations</a><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/discussing-online-schema-migrations-with-oracles-mysql-engineering-managers" rel="bookmark"><time class="entry-date published updated" datetime="2016-11-23T15:23:18+02:00">November 23, 2016</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Last week I had the pleasant opportunity of introducing and discussing the operation of online schema migrations to MySQL’s engineering managers, as part of their annual meeting, in London.</p>
<p>Together with Simon J. Mudd of Booking.com, we discussed our perception of what it takes to run online schema migrations on a live, busy system.</p>
<p>While the Oracle/MySQL engineers develop new features or optimize behavior in the MySQL, we of the industry have the operational expertise and understanding of the flow of working with MySQL. In all topics, and in schema migration in particular, there is a gap between what’s perceived to be the use case and what the use case actually is. It is the community’s task to provide feedback back to Oracle so as to align development to match operations need where possible.</p>
<p>Our meeting included the following:</p>
<h3>Need for schema migrations</h3>
<p>We presented, based on our experience in current and past companies, and based on our friends of the community’s experience, the case for online schema migrations. At GitHub, at Booking.com and in many other companies I’m familiar with, we continuously deploy to production, and this implies continuous schema migrations to our production databases. We have migrations running daily; sometimes multiple per day, some time none. <a href="https://shlomi-noach.github.io/blog/mysql/discussing-online-schema-migrations-with-oracles-mysql-engineering-managers#more-7646" class="more-link">Continue reading »<span class="screen-reader-text"> “Discussing online schema migrations with Oracle’s MySQL engineering managers”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/discussing-online-schema-migrations-with-oracles-mysql-engineering-managers#comments">1 Comment<span class="screen-reader-text"> on Discussing online schema migrations with Oracle’s MySQL engineering managers</span></a></span>	</footer>
</article>

	<nav class="navigation posts-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/4">Older posts</a></div><div class="nav-next"><a href="https://shlomi-noach.github.io/blog/category/mysql/page/2">Newer posts</a></div></div>
	</nav>
	</main>


	<footer id="colophon" class="site-footer">
		<div class="site-info">
			<a href="https://wordpress.org/">
				Powered by WordPress			</a>
			<span class="sep"> | </span>
				Theme: <a href="http://openark.org">openark-primer</a> by <a href="http://underscores.me/">Underscores.me</a>.		</div>
	</footer>
</div>

	<div style="display:none">
	</div>
<script>
var pollsL10n = {"ajax_url":"https:\/\/shlomi-noach.github.io\/blog\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-js.js"></script>
<script src="https://secure.gravatar.com/js/gprofiles.js?ver=2020Junaa"></script>
<script>
var WPGroHo = {"my_hash":""};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/modules/wpgroho.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/navigation.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202024.js" async="async" defer></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.2.1',blog:'32412571',post:'0',tz:'2',srv:'code.openark.org'} ]);
	_stq.push([ 'clickTrackerInit', '32412571', '0' ]);
</script>

</body>
</html>
