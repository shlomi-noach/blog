<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	<title>SQL – Page 5 – code.openark.org</title>
<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//s.w.org">



<link rel="stylesheet" id="wp-block-library-css" href="https://shlomi-noach.github.io/blog/wp-includes/css/dist/block-library/style.min.css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wp-polls-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-css.css" media="all">
<style id="wp-polls-inline-css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="openark-primer-style-css" href="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/style.css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/css/jetpack.css" media="all">
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script>



<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel="dns-prefetch" href="//v0.wordpress.com">


<meta property="og:type" content="website">
<meta property="og:title" content="SQL – Page 5 – code.openark.org">
<meta property="og:url" content="https://shlomi-noach.github.io/blog/tag/sql">
<meta property="og:site_name" content="code.openark.org">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">


<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(242,101,34,.88);}</style></head>

<body class="archive paged tag tag-sql tag-21 paged-5 tag-paged-5 hfeed no-sidebar">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
							<p class="site-title"><a href="https://shlomi-noach.github.io/blog/" rel="home">code.openark.org</a></p>
								<p class="site-description">Blog by Shlomi Noach</p>
			
			<nav id="site-navigation" class="main-navigation">
				<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">primary-menu</button>
				<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-8109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8109"><a href="https://shlomi-noach.github.io/blog/archives">archives</a></li>
<li id="menu-item-8050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8050"><a href="https://shlomi-noach.github.io/blog/presentations">presentations</a></li>
<li id="menu-item-8055" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8055"><a href="https://shlomi-noach.github.io/blog/about">about</a></li>
<li id="menu-item-8071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8071"><a href="https://github.com/shlomi-noach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li>
<li id="menu-item-8074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8074"><a href="https://www.linkedin.com/in/shlominoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li>
<li id="menu-item-8072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8072"><a href="https://twitter.com/ShlomiNoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></li>
<li id="menu-item-8073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8073"><a href="https://shlomi-noach.github.io/blog/feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-12.832 20c-1.197 0-2.168-.969-2.168-2.165s.971-2.165 2.168-2.165 2.167.969 2.167 2.165-.97 2.165-2.167 2.165zm5.18 0c-.041-4.029-3.314-7.298-7.348-7.339v-3.207c5.814.041 10.518 4.739 10.561 10.546h-3.213zm5.441 0c-.021-7.063-5.736-12.761-12.789-12.792v-3.208c8.83.031 15.98 7.179 16 16h-3.211z"></path></svg></a></li>
</ul></div>			</nav>
		</div>
	</header>

	<main id="primary" class="site-main">

		
			<header class="page-header">
				<h1 class="page-title">Tag: SQL</h1>			</header>

			
<article id="post-2534" class="post-2534 post type-post status-publish format-standard hentry category-mysql tag-configuration tag-information_schema tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/verifying-group_concat-limit-without-using-variables" rel="bookmark">Verifying GROUP_CONCAT limit without using variables</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/configuration" rel="tag">Configuration</a><a href="https://shlomi-noach.github.io/blog/tag/information_schema" rel="tag">INFORMATION_SCHEMA</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/verifying-group_concat-limit-without-using-variables" rel="bookmark"><time class="entry-date published updated" datetime="2010-06-10T09:16:14+02:00">June 10, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I have a case where I must know if <strong>group_concat_max_len</strong> is at its default value (<strong>1024</strong>), which means there are some operation I cannot work out. I’ve ranted on this <a href="https://shlomi-noach.github.io/blog/mysql/those-oversized-undersized-variables-defaults">here</a>.</p>
<p>Normally, I would simply:</p>
<blockquote>
<pre class="brush: sql; title: ; notranslate" title="">
SELECT @@group_concat_max_len
</pre>
</blockquote>
<p>However, I am using views, where session variables are not allowed. Using a stored function can <a href="https://shlomi-noach.github.io/blog/mysql/views-better-performance-with-condition-pushdown">do the trick</a>, but I wanted to avoid stored routines. So here’s a very simple test case: is the current <strong>group_concat_max_len</strong> long enough or not? I’ll present the long version and the short version.</p>
<h4>The long version</h4>
<blockquote>
<pre class="brush: sql; title: ; notranslate" title="">
SELECT
  CHAR_LENGTH(
    GROUP_CONCAT(
      COLLATION_NAME SEPARATOR ''
    )
  )
FROM
  INFORMATION_SCHEMA.COLLATIONS;
</pre>
</blockquote>
<p>If the result is <strong>1024</strong>, we are in a bad shape. I happen to know that the total length of collation names is above <strong>1800</strong>, and so it is trimmed down. Another variance of the above query would be: <a href="https://shlomi-noach.github.io/blog/mysql/verifying-group_concat-limit-without-using-variables#more-2534" class="more-link">Continue reading »<span class="screen-reader-text"> “Verifying GROUP_CONCAT limit without using variables”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/verifying-group_concat-limit-without-using-variables#comments">11 Comments<span class="screen-reader-text"> on Verifying GROUP_CONCAT limit without using variables</span></a></span>	</footer>
</article>

<article id="post-2181" class="post-2181 post type-post status-publish format-standard hentry category-mysql tag-data-types tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/choosing-mysql-boolean-data-types" rel="bookmark">Choosing MySQL boolean data types</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/data-types" rel="tag">Data Types</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/choosing-mysql-boolean-data-types" rel="bookmark"><time class="entry-date published updated" datetime="2010-06-03T07:24:11+02:00">June 3, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>How do you implement <strong>True</strong>/<strong>False</strong> columns?</p>
<p>There are many ways to do it, each with its own pros and cons.</p>
<h4>ENUM</h4>
<p>Create you column as <strong>ENUM(‘F’, ‘T’)</strong>, or <strong>ENUM(‘N’,’Y’)</strong> or <strong>ENUM(‘0’, ‘1’)</strong>.</p>
<p>This is the method used in the <strong>mysql</strong> tables (e.g. <strong>mysql.user</strong> privileges table). It’s very simple and intuitive. It truly restricts the values to just two options, which serves well. It’s compact (just one byte).</p>
<p>A couple disadvantages to this method:</p>
<ol>
<li>Enums are represented by numerical values (which is good) and start with <strong>1</strong> instead of <strong>0</strong>. This means <strong>‘F’</strong> is <strong>1</strong>, and <strong>‘T’</strong> is <strong>2</strong>, and they both translate to <strong>True</strong> when directly used in a booleanic expression (e.g. <strong>IF(val, ‘True’, ‘False’)</strong> always yields <strong>‘True’</strong>)</li>
<li>There’s no real convention. Is it <strong>‘Y’/’N’</strong>? <strong>‘T’/’F’</strong>? <strong>‘P’/’N’</strong>? <strong>‘1’/’0′</strong>?</li>
</ol>
<h4>CHAR(1)</h4>
<p>Simple again. Proposed values are, as before, <strong>‘F’</strong>, <strong>‘T’</strong> etc. This time there’s no way to limit the range of values. You cannot (in MySQL, unless using triggers) prevent an ‘X’.</p>
<p>Watch out for the charset! If it’s <strong>utf8</strong> you pay with 3 bytes instead of just 1. And, again, <strong>‘T’</strong>, <strong>‘F’</strong>, <strong>‘Y’</strong>, <strong>‘N’</strong> values all evaluate as <strong>True</strong>. It is possible to use the zero-valued character, but it defeats the purpose of using <strong>CHAR</strong>. <a href="https://shlomi-noach.github.io/blog/mysql/choosing-mysql-boolean-data-types#more-2181" class="more-link">Continue reading »<span class="screen-reader-text"> “Choosing MySQL boolean data types”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/choosing-mysql-boolean-data-types#comments">14 Comments<span class="screen-reader-text"> on Choosing MySQL boolean data types</span></a></span>	</footer>
</article>

<article id="post-1328" class="post-1328 post type-post status-publish format-standard hentry category-mysql tag-execution-plan tag-performance tag-sql tag-stored-routines tag-syntax">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/views-better-performance-with-condition-pushdown" rel="bookmark">Views: better performance with condition pushdown</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/execution-plan" rel="tag">Execution plan</a><a href="https://shlomi-noach.github.io/blog/tag/performance" rel="tag">Performance</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a><a href="https://shlomi-noach.github.io/blog/tag/stored-routines" rel="tag">Stored routines</a><a href="https://shlomi-noach.github.io/blog/tag/syntax" rel="tag">Syntax</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/views-better-performance-with-condition-pushdown" rel="bookmark"><time class="entry-date published updated" datetime="2010-05-20T07:17:05+02:00">May 20, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Justin’s <a href="http://www.mysqlperformanceblog.com/2010/05/19/a-workaround-for-the-performance-problems-of-temptable-views/">A workaround for the performance problems of TEMPTABLE views</a> post on <a href="http://www.mysqlperformanceblog.com/">mysqlperformanceblog.com</a> reminded me of a solution I once saw on a customer’s site.</p>
<p>The customer was using nested views structure, up to depth of some 8-9 views. There were a lot of aggregations along the way, and even the simplest query resulted with a LOT of subqueries, temporary tables, and vast amounts of data, even if only to return with a couple of rows.</p>
<p>While we worked to solve this, a developer showed me his own trick. His trick is now impossible to implement, but there’s a hack around this.</p>
<p>Let’s use the world database to illustrate. Look at the following view definition: <a href="https://shlomi-noach.github.io/blog/mysql/views-better-performance-with-condition-pushdown#more-1328" class="more-link">Continue reading »<span class="screen-reader-text"> “Views: better performance with condition pushdown”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/views-better-performance-with-condition-pushdown#comments">1 Comment<span class="screen-reader-text"> on Views: better performance with condition pushdown</span></a></span>	</footer>
</article>

<article id="post-2381" class="post-2381 post type-post status-publish format-standard hentry category-mysql tag-sql tag-syntax">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/discovery-of-the-day-group-by-desc" rel="bookmark">Discovery of the day: GROUP BY … DESC</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a><a href="https://shlomi-noach.github.io/blog/tag/syntax" rel="tag">Syntax</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/discovery-of-the-day-group-by-desc" rel="bookmark"><time class="entry-date published" datetime="2010-05-04T11:38:38+02:00">May 4, 2010</time><time class="updated" datetime="2010-05-04T11:39:00+02:00">May 4, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I happened on a query where, by mistake, an</p>
<pre class="brush: sql; title: ; notranslate" title="">
SELECT ... ORDER BY x DESC LIMIT 1
</pre>
<p>was written as</p>
<pre class="brush: sql; title: ; notranslate" title="">
SELECT ... GROUP BY x DESC LIMIT 1
</pre>
<p>And it took me by surprise to realize <strong>GROUP BY x DESC</strong> is a valid statement. I looked it up: yep! It’s <a href="http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html">documented</a>.</p>
<p>In MySQL, <strong>GROUP BY</strong> results are sorted according to the group statement. You can override this by adding <strong>ORDER BY NULL</strong> (see <a href="https://shlomi-noach.github.io/blog/mysql/less-known-sql-syntax-and-functions-in-mysql">past post</a>). I wasn’t aware you can actually control the sort order.</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/discovery-of-the-day-group-by-desc#comments">4 Comments<span class="screen-reader-text"> on Discovery of the day: GROUP BY … DESC</span></a></span>	</footer>
</article>

<article id="post-2156" class="post-2156 post type-post status-publish format-standard hentry category-mysql tag-java tag-opinions tag-python tag-sql tag-syntax">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/proper-sql-table-alias-use-conventions" rel="bookmark">Proper SQL table alias use conventions</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/java" rel="tag">Java</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/python" rel="tag">python</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a><a href="https://shlomi-noach.github.io/blog/tag/syntax" rel="tag">Syntax</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/proper-sql-table-alias-use-conventions" rel="bookmark"><time class="entry-date published" datetime="2010-03-11T09:10:09+02:00">March 11, 2010</time><time class="updated" datetime="2010-03-11T14:13:51+02:00">March 11, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>After seeing quite some SQL statements over the years, something is bugging me: there is no consistent convention as for how to write an SQL query.</p>
<p>I’m going to leave formatting, upper/lower-case issues aside, and discuss a small part of the SQL syntax: table aliases. Looking at three different queries, I will describe what I find to be problematic table alias use.</p>
<p>Using the <a href="http://dev.mysql.com/doc/sakila/en/sakila.html">sakila</a> database, take a look at the following queries: <a href="https://shlomi-noach.github.io/blog/mysql/proper-sql-table-alias-use-conventions#more-2156" class="more-link">Continue reading »<span class="screen-reader-text"> “Proper SQL table alias use conventions”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/proper-sql-table-alias-use-conventions#comments">9 Comments<span class="screen-reader-text"> on Proper SQL table alias use conventions</span></a></span>	</footer>
</article>

<article id="post-1896" class="post-1896 post type-post status-publish format-standard hentry category-mysql tag-innodb tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/tip-faster-than-truncate" rel="bookmark">Tip: faster than TRUNCATE</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/tip-faster-than-truncate" rel="bookmark"><time class="entry-date published updated" datetime="2010-03-09T13:37:01+02:00">March 9, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p><a href="http://dev.mysql.com/doc/refman/5.0/en/truncate-table.html"><strong>TRUNCATE</strong></a> is usually a fast operation (much faster than <strong>DELETE FROM</strong>). But sometimes it just hangs; I’ve has several such uncheerful events with InnoDB (Plugin) tables which were extensively written to. The <strong>TRUNCATE</strong> hanged; nothing else would work; minutes pass.</p>
<p><strong>TRUNCATE</strong> on tables with no <strong>FOREIGN KEY</strong>s <em>should</em> act fast: it translate to dropping the table and creating a new one (and it all depends on the MySQL version, see the manual).</p>
<p>What’s faster than <strong>TRUNCATE</strong>, then? If you don’t have triggers nor <strong>FOREIGN KEY</strong>s, a <a href="http://dev.mysql.com/doc/refman/5.0/en/rename-table.html"><strong>RENAME TABLE</strong></a> can come to the rescue. Instead of:</p>
<blockquote>
<pre>TRUNCATE log_table</pre>
</blockquote>
<p>Do:</p>
<blockquote>
<pre>CREATE TABLE log_table_new LIKE log_table;
<strong>RENAME TABLE</strong> log_table TO log_table_old, log_table_new TO log_table;
DROP TABLE log_table_old;</pre>
</blockquote>
<p>I found this to work well for me. Do note that <strong>AUTO_INCREMENT</strong> values can be tricky here: the “new” table is created with an <strong>AUTO_INCREMENT</strong> value which is immediately taken in the “working” table. If you care about not using same <strong>AUTO_INCREMENT</strong> values, you can: <a href="https://shlomi-noach.github.io/blog/mysql/tip-faster-than-truncate#more-1896" class="more-link">Continue reading »<span class="screen-reader-text"> “Tip: faster than TRUNCATE”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/tip-faster-than-truncate#comments">12 Comments<span class="screen-reader-text"> on Tip: faster than TRUNCATE</span></a></span>	</footer>
</article>

<article id="post-1908" class="post-1908 post type-post status-publish format-standard hentry category-mysql tag-indexing tag-math tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/monotonic-functions-sql-and-mysql" rel="bookmark">Monotonic functions, SQL and MySQL</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/indexing" rel="tag">Indexing</a><a href="https://shlomi-noach.github.io/blog/tag/math" rel="tag">Math</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/monotonic-functions-sql-and-mysql" rel="bookmark"><time class="entry-date published" datetime="2010-02-09T09:47:21+02:00">February 9, 2010</time><time class="updated" datetime="2010-02-11T08:52:52+02:00">February 11, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<blockquote><p>In mathematics, a <strong>monotonic function</strong> (or <strong>monotone function</strong>) is a function which preserves the given order. [<a href="http://en.wikipedia.org/wiki/Monotonic_function">Wikipedia</a>]</p></blockquote>
<p>To be more precise, a function <em>f</em> is monotonic increasing, if for every <em>x ≤ y</em> it holds that <em>f(x) ≤ f(y)</em>. <em>f</em> is said to be strictly monotonic increasing is for every <em>x < y</em> it holds that <em>f(x) < f(y)</em>.</p>
<p>So, if we follow values in some order, we say that <em>f</em> is monotonic increasing if <em>f</em>‘s value never decreases (it either increases or stays the same), and we say that <em>f</em> is strictly increasing if <em>f</em>‘s value is always changes “upwards”.</p>
<p>Monotonic functions play an important role in SQL. To discuss monotonic functions in SQL we must first determine what the <em>order</em> is, and then, what the <em>function</em> is.</p>
<p>Well, they both change according to our point of view. Let’s look at some examples. Take a look at the following table: <a href="https://shlomi-noach.github.io/blog/mysql/monotonic-functions-sql-and-mysql#more-1908" class="more-link">Continue reading »<span class="screen-reader-text"> “Monotonic functions, SQL and MySQL”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/monotonic-functions-sql-and-mysql#comments">3 Comments<span class="screen-reader-text"> on Monotonic functions, SQL and MySQL</span></a></span>	</footer>
</article>

<article id="post-1886" class="post-1886 post type-post status-publish format-standard hentry category-mysql tag-indexing tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/beware-of-implicit-casting" rel="bookmark">Beware of implicit casting</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/indexing" rel="tag">Indexing</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/beware-of-implicit-casting" rel="bookmark"><time class="entry-date published updated" datetime="2010-02-02T21:55:22+02:00">February 2, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Ever so often a query provides a “bad” execution plan. Adding a missing index can many times solve the problem. However, not everything can be solved with an index. I wish to highlight the point of having an <em>implicit cast</em>, which negates the use of an index on MySQL.</p>
<p>I see this happening a lot on customers’ databases, and this begs for a short introduction.</p>
<h4>MySQL doesn’t support index functions</h4>
<p>Let’s assume the following table: <a href="https://shlomi-noach.github.io/blog/mysql/beware-of-implicit-casting#more-1886" class="more-link">Continue reading »<span class="screen-reader-text"> “Beware of implicit casting”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/beware-of-implicit-casting#comments">6 Comments<span class="screen-reader-text"> on Beware of implicit casting</span></a></span>	</footer>
</article>

<article id="post-1209" class="post-1209 post type-post status-publish format-standard hentry category-mysql tag-math tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/checking-for-string-permutation" rel="bookmark">Checking for string permutation</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/math" rel="tag">Math</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/checking-for-string-permutation" rel="bookmark"><time class="entry-date published" datetime="2010-01-20T08:58:10+02:00">January 20, 2010</time><time class="updated" datetime="2010-02-04T07:39:43+02:00">February 4, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>A permutation is a change of places. Thus, <strong>‘lolhe’</strong> is a permuted <strong>‘hello’</strong> (commonly referred to as ‘scrambled text’).</p>
<p>I wish to present an SQL solution for checking if two strings are permutations of the same text.</p>
<h4>About permutations</h4>
<p>So, if <strong>‘lolhe’</strong> is a permutation of <strong>‘hello’</strong>, then <strong>‘hello’</strong> is a permutation of <strong>‘lolhe’</strong>, as well; and both are permutations of <strong>‘elloh’</strong>. The <strong>REVERSE()</strong> of a text is an example of permutation. Mathematically, string permutation is an equivalence relation, and divides all strings to equivalence classes.</p>
<h4>Use cases</h4>
<ul>
<li>We may be interested in permutations when a user chooses a password. We may disallow a password which is identical to the login name; but we may also disallow upper-lower-case-only transformations of the text. We may still disallow a <em>permutation</em> of the text.</li>
<li>On a slightly different scale, the two queries: <strong>SELECT * FROM City WHERE id IN (5, 21, 13)</strong> and <strong>SELECT * FROM City WHERE id IN (13, 5, 21)</strong> are identical. Here, the permutation is not with string characters, but with string tokens. While the solution discussed is targeted at string characters, it can be easily converted to work with string tokens.</li>
</ul>
<h4>Checking for permutation</h4>
<p>The solution I’m suggesting checks for permutation between 2 strings by permuting both to a third, <strong>normal form</strong>. The two string are permutations of each other if both have <em>the same normal form</em>.</p>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/checking-for-string-permutation#more-1209" class="more-link">Continue reading »<span class="screen-reader-text"> “Checking for string permutation”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/checking-for-string-permutation#comments">2 Comments<span class="screen-reader-text"> on Checking for string permutation</span></a></span>	</footer>
</article>

<article id="post-1745" class="post-1745 post type-post status-publish format-standard hentry category-mysql tag-performance tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/misimproving-performance-problems-with-insert-delayed" rel="bookmark">Misimproving performance problems with INSERT DELAYED</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/performance" rel="tag">Performance</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/misimproving-performance-problems-with-insert-delayed" rel="bookmark"><time class="entry-date published updated" datetime="2010-01-14T20:58:36+02:00">January 14, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p><a href="http://dev.mysql.com/doc/refman/5.1/en/insert-delayed.html">INSERT DELAYED</a> may come in handy when using MyISAM tables. It may in particular be useful for log tables, where one is required to issue frequent INSERTs on one hand, but does not usually want or need to wait for DB response on the other hand.</p>
<p>It may even offer some performance boost, by aggregating such frequent INSERTs in a single thread.</p>
<p>But it is <strong>NOT</strong> a performance solution.</p>
<p>That is, in a case I’ve seen, database performance was poor. INSERTs were taking a very long time. Lot’s of locks were involved. The solution offered was to change all slow INSERTs to INSERT DELAYED. Voila! All INSERT queries now completed in no time.</p>
<p>But the database performance remained poor. Just as poor as before, with the additional headache: nobody knew what caused the low performance.</p>
<p>Using INSERT DELAYED to improve overall INSERT performance is like sweeping the dust under the carpet. It’s still there, only you can’t actually see it. When your queries are slow to return, you know which queries or which parts of your application are the immediate suspects. When everything happens in the background you lose that feeling.</p>
<p>The slow query log, fortunately, still provides with the necessary information, and all the other metrics are just as before. Good. But it now takes a deeper level of analysis to find a problem that was previously in plain sight.</p>
<p>So: use INSERT DELAYED carefully, don’t just throw it at your slow queries like a magic potion.</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/misimproving-performance-problems-with-insert-delayed#comments">2 Comments<span class="screen-reader-text"> on Misimproving performance problems with INSERT DELAYED</span></a></span>	</footer>
</article>

	<nav class="navigation posts-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://shlomi-noach.github.io/blog/tag/sql/page/6">Older posts</a></div><div class="nav-next"><a href="https://shlomi-noach.github.io/blog/tag/sql/page/4">Newer posts</a></div></div>
	</nav>
	</main>


	<footer id="colophon" class="site-footer">
		<div class="site-info">
			<a href="https://wordpress.org/">
				Powered by WordPress			</a>
			<span class="sep"> | </span>
				Theme: <a href="http://openark.org">openark-primer</a> by <a href="http://underscores.me/">Underscores.me</a>.		</div>
	</footer>
</div>

	<div style="display:none">
	</div>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSql.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://shlomi-noach.github.io/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = "https://shlomi-noach.github.io/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeEclipse.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = true;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script>
var pollsL10n = {"ajax_url":"https:\/\/shlomi-noach.github.io\/blog\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-js.js"></script>
<script src="https://secure.gravatar.com/js/gprofiles.js?ver=2020Junaa"></script>
<script>
var WPGroHo = {"my_hash":""};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/modules/wpgroho.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/navigation.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202024.js" async="async" defer></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.2.1',blog:'32412571',post:'0',tz:'2',srv:'code.openark.org'} ]);
	_stq.push([ 'clickTrackerInit', '32412571', '0' ]);
</script>

</body>
</html>
