<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	<title>Triggers – code.openark.org</title>
<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//s.w.org">



<link rel="stylesheet" id="wp-block-library-css" href="https://shlomi-noach.github.io/blog/wp-includes/css/dist/block-library/style.min.css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wp-polls-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-css.css" media="all">
<style id="wp-polls-inline-css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="openark-primer-style-css" href="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/style.css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/css/jetpack.css" media="all">
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script>



<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel="dns-prefetch" href="//v0.wordpress.com">


<meta property="og:type" content="website">
<meta property="og:title" content="Triggers – code.openark.org">
<meta property="og:url" content="https://shlomi-noach.github.io/blog/tag/triggers">
<meta property="og:site_name" content="code.openark.org">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">


<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(242,101,34,.88);}</style></head>

<body class="archive tag tag-triggers tag-30 hfeed no-sidebar">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
							<p class="site-title"><a href="https://shlomi-noach.github.io/blog/" rel="home">code.openark.org</a></p>
								<p class="site-description">Blog by Shlomi Noach</p>
			
			<nav id="site-navigation" class="main-navigation">
				<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">primary-menu</button>
				<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-8109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8109"><a href="https://shlomi-noach.github.io/blog/archives">archives</a></li>
<li id="menu-item-8050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8050"><a href="https://shlomi-noach.github.io/blog/presentations">presentations</a></li>
<li id="menu-item-8055" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8055"><a href="https://shlomi-noach.github.io/blog/about">about</a></li>
<li id="menu-item-8071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8071"><a href="https://github.com/shlomi-noach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li>
<li id="menu-item-8074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8074"><a href="https://www.linkedin.com/in/shlominoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li>
<li id="menu-item-8072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8072"><a href="https://twitter.com/ShlomiNoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></li>
<li id="menu-item-8073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8073"><a href="https://shlomi-noach.github.io/blog/feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-12.832 20c-1.197 0-2.168-.969-2.168-2.165s.971-2.165 2.168-2.165 2.167.969 2.167 2.165-.97 2.165-2.167 2.165zm5.18 0c-.041-4.029-3.314-7.298-7.348-7.339v-3.207c5.814.041 10.518 4.739 10.561 10.546h-3.213zm5.441 0c-.021-7.063-5.736-12.761-12.789-12.792v-3.208c8.83.031 15.98 7.179 16 16h-3.211z"></path></svg></a></li>
</ul></div>			</nav>
		</div>
	</header>

	<main id="primary" class="site-main">

		
			<header class="page-header">
				<h1 class="page-title">Tag: Triggers</h1>			</header>

			
<article id="post-3359" class="post-3359 post type-post status-publish format-standard hentry category-mysql tag-file-system tag-innodb tag-myisam tag-security tag-triggers">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/limiting-table-disk-quota-in-mysql" rel="bookmark">Limiting table disk quota in MySQL</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/file-system" rel="tag">File System</a><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/myisam" rel="tag">MyISAM</a><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a><a href="https://shlomi-noach.github.io/blog/tag/triggers" rel="tag">Triggers</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/limiting-table-disk-quota-in-mysql" rel="bookmark"><time class="entry-date published updated" datetime="2011-03-07T09:08:21+02:00">March 7, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Question asked by a student: is there a way to limit a table’s quote on disk? Say, limit a table to 2GB, after which it will refuse to grow? Note that the requirement is that rows are never DELETEd. The table must simply refuse to be updated once it reaches a certain size.</p>
<p>There is no built-in way to limit a table’s quota on disk. First thing to observe is that MySQL has nothing to do with this. It is entirely up to the storage engine to provide with such functionality. The storage engine is the one to handle data storage: how table and keys are stored on disk. Just consider the difference between MyISAM’s <strong>.MYD</strong> & <strong>.MYI</strong> to InnoDB’s shared tablespace <strong>ibdata1</strong> to InnoDB’s file-per table <strong>.ibd</strong> files.</p>
<p>The only engine I know of that has a quota is the MEMORY engine: it accepts the <strong>max_heap_table_size</strong>, which limits the size of a single table in memory. Hrmmm… In memory…</p>
<h4>Why limit?</h4>
<p>I’m not as yet aware of the specific requirements of said company, but this is not the first time I heard this question.</p>
<p>The fact is: when MySQL runs out of disk space, it goes with a BOOM. It crashed ungracefully, with binary logs being out of sync, replication being out of sync. To date, and I’ve seen some cases, InnoDB merely crashes and manages to recover once disk space is salvaged, but I am not certain this is guaranteed to be the case. Anyone?</p>
<p>And, with MyISAM…, who knows?</p>
<p>Rule #1 of MySQL disk usage: <em>don’t run out of disk space.</em></p>
<h4>Workarounds</h4>
<p>I can think of two workarounds, none of which is pretty. The first involves triggers (actually, a few variations for this one), the second involves privileges. <a href="https://shlomi-noach.github.io/blog/mysql/limiting-table-disk-quota-in-mysql#more-3359" class="more-link">Continue reading »<span class="screen-reader-text"> “Limiting table disk quota in MySQL”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/limiting-table-disk-quota-in-mysql#comments">2 Comments<span class="screen-reader-text"> on Limiting table disk quota in MySQL</span></a></span>	</footer>
</article>

<article id="post-3005" class="post-3005 post type-post status-publish format-standard hentry category-development category-mysql tag-development tag-indexing tag-information_schema tag-innodb tag-open-source tag-openark-kit tag-opinions tag-python tag-schema tag-scripts tag-triggers">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/thoughts-and-ideas-for-online-schema-change" rel="bookmark">Thoughts and ideas for Online Schema Change</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/development" rel="category tag">Development</a> <a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/development" rel="tag">Development</a><a href="https://shlomi-noach.github.io/blog/tag/indexing" rel="tag">Indexing</a><a href="https://shlomi-noach.github.io/blog/tag/information_schema" rel="tag">INFORMATION_SCHEMA</a><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/openark-kit" rel="tag">openark kit</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/python" rel="tag">python</a><a href="https://shlomi-noach.github.io/blog/tag/schema" rel="tag">Schema</a><a href="https://shlomi-noach.github.io/blog/tag/scripts" rel="tag">scripts</a><a href="https://shlomi-noach.github.io/blog/tag/triggers" rel="tag">Triggers</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/thoughts-and-ideas-for-online-schema-change" rel="bookmark"><time class="entry-date published" datetime="2010-10-07T10:29:10+02:00">October 7, 2010</time><time class="updated" datetime="2010-10-07T13:26:58+02:00">October 7, 2010</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Here’s a few thoughts on current status and further possibilities for Facebook’s <a href="http://www.facebook.com/note.php?note_id=430801045932">Online Schema Change</a> (OSC) tool. I’ve had these thoughts for months now, pondering over improving <a href="../../forge/openark-kit/oak-online-alter-table">oak-online-alter-table</a> but haven’t got around to implement them nor even write them down. Better late than never.</p>
<p>The tool has some limitations. Some cannot be lifted, some could. Quoting from the <a href="http://www.facebook.com/notes/mysql-at-facebook/online-schema-change-for-mysql/430801045932">announcement</a> and looking at the code, I add a few comments. I conclude with a general opinion on the tool’s abilities.</p>
<h4>“The original table must have PK. Otherwise an error is returned.”</h4>
<p>This restriction could be lifted: it’s enough that the table has a UNIQUE KEY. My original <em>oak-online-alter-table</em> handled that particular case. As far as I see from their code, the Facebook code would work just as well with any unique key.</p>
<p>However, this restriction is of no real interest. As we’re mostly interested in InnoDB tables, and since any InnoDB table <em>should have</em> a PRIMARY KEY, we shouldn’t care too much.</p>
<h4>“No foreign keys should exist. Otherwise an error is returned.”</h4>
<p>Tricky stuff. With <em>oak-online-alter-table</em>, changes to the original table were immediately reflected in the <em>ghost</em> table. With InnoDB tables, that meant same transaction. And although I never got to update the text and code, there shouldn’t be a reason for not using child-side foreign keys (the child-side is the table on which the FK constraint is defined).</p>
<p>The Facebook patch works differently: it captures changes and writes them to a <strong>delta</strong> table,  to be later (asynchronously) analyzed and make for a <em>replay</em> of actions on the <em>ghost</em> table. <a href="https://shlomi-noach.github.io/blog/mysql/thoughts-and-ideas-for-online-schema-change#more-3005" class="more-link">Continue reading »<span class="screen-reader-text"> “Thoughts and ideas for Online Schema Change”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/thoughts-and-ideas-for-online-schema-change#comments">8 Comments<span class="screen-reader-text"> on Thoughts and ideas for Online Schema Change</span></a></span>	</footer>
</article>

<article id="post-412" class="post-412 post type-post status-publish format-standard hentry category-mysql tag-event-scheduler tag-triggers">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-iii" rel="bookmark">Triggers Use Case Compilation, Part III</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/event-scheduler" rel="tag">Event Scheduler</a><a href="https://shlomi-noach.github.io/blog/tag/triggers" rel="tag">Triggers</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-iii" rel="bookmark"><time class="entry-date published" datetime="2009-02-02T13:23:38+02:00">February 2, 2009</time><time class="updated" datetime="2009-02-02T13:26:55+02:00">February 2, 2009</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>The previous two parts have looked at some solutions offered by triggers. Let’s look now at some wishful triggers solutions, which are currently unavailable because of triggers limitations.</p>
<p><a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-i">Triggers Use Case Compilation, Part I</a></p>
<p><a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-ii">Triggers Use Case Compilation, Part II</a></p>
<h4>Limitations and wishful features</h4>
<p>Triggers are slow</p>
<p style="padding-left: 30px;">The overhead of adding triggers is usually an even breaker. But I would like to believe speed will improve in time!</p>
<p>Triggers cannot act on the same table which activated them.</p>
<p style="padding-left: 30px;">A thing I would like to do is have a rotating table. A log table is a perfect example: I only want to store logs up to 7 days back, or up to 1M rows. ON INSERT, (or once every 1000 inserts or so), I wish to remove oldest rows. This is not possible today since I can’t DELETE rows from the same table which caused the ON INSERT trigger to run. It can’t be hacked by calling on another table, then doing a circular trigger trick. MySQL will raise an error on run time, complaining about a loop.</p>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-iii#more-412" class="more-link">Continue reading »<span class="screen-reader-text"> “Triggers Use Case Compilation, Part III”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-iii#comments">2 Comments<span class="screen-reader-text"> on Triggers Use Case Compilation, Part III</span></a></span>	</footer>
</article>

<article id="post-388" class="post-388 post type-post status-publish format-standard hentry category-mysql tag-triggers">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-ii" rel="bookmark">Triggers Use Case Compilation, Part II</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/triggers" rel="tag">Triggers</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-ii" rel="bookmark"><time class="entry-date published" datetime="2009-01-15T10:01:39+02:00">January 15, 2009</time><time class="updated" datetime="2009-01-15T14:30:42+02:00">January 15, 2009</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>In <a title="Triggers Use Case Compilation, Part I" href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-i">Triggers Use Case Compilation, Part I</a>, I’ve demonstrated some triggers use scenarios.</p>
<p>We continue our examples of triggers usage.</p>
<h4>Counters and aggregations bookkeeping</h4>
<p>Consider the City table: each city belongs to a certain country. Some questions we may be interested in are:</p>
<ul>
<li>How many cities are there per country?</li>
<li>What’s the sum of cities population per country?</li>
<li>What’s the population of the largest city per country?</li>
</ul>
<p>Answering any of these questions is an easy SQL excercise. But aggregation is required, and full table scan (or full index scan, if we’re lucky) is essentially part of any execution plan. What if we can’t pay the price for these queries? What if we need immediate, or near immediate response?</p>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-ii#more-388" class="more-link">Continue reading »<span class="screen-reader-text"> “Triggers Use Case Compilation, Part II”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-ii#comments">3 Comments<span class="screen-reader-text"> on Triggers Use Case Compilation, Part II</span></a></span>	</footer>
</article>

<article id="post-313" class="post-313 post type-post status-publish format-standard hentry category-mysql tag-security tag-triggers">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-i" rel="bookmark">Triggers Use Case Compilation, Part I</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a><a href="https://shlomi-noach.github.io/blog/tag/triggers" rel="tag">Triggers</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-i" rel="bookmark"><time class="entry-date published" datetime="2009-01-05T11:55:15+02:00">January 5, 2009</time><time class="updated" datetime="2009-01-16T14:06:42+02:00">January 16, 2009</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I’ve run by quite a few triggers lately on production systems. In previous posts, I’ve written about problems solved with triggers. So here’s a compilation of some solutions based on triggers; and some problems which are not (yet?) solvable due to current triggers limitations.</p>
<p>Triggers can be used to:</p>
<ul>
<li>Maintain integrity</li>
<li>Enhance security</li>
<li>Enhance logging</li>
<li>Assist with archiving</li>
<li>Restrict table size</li>
<li>Manage caching</li>
<li>Manage counters</li>
</ul>
<p>Triggers are not fast. In fact, they can add quite an overhead if misused. Some of the triggers presented here are known to work on real life production systems, though, and work well. But make sure you benchmark before embarking on extensive application changes. <a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-i#more-313" class="more-link">Continue reading »<span class="screen-reader-text"> “Triggers Use Case Compilation, Part I”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/triggers-use-case-compilation-part-i#comments">19 Comments<span class="screen-reader-text"> on Triggers Use Case Compilation, Part I</span></a></span>	</footer>
</article>

<article id="post-145" class="post-145 post type-post status-publish format-standard hentry category-mysql tag-security tag-sql tag-triggers">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/using-triggers-to-block-malicious-code-an-example" rel="bookmark">Using triggers to block malicious code: an example</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a><a href="https://shlomi-noach.github.io/blog/tag/triggers" rel="tag">Triggers</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/using-triggers-to-block-malicious-code-an-example" rel="bookmark"><time class="entry-date published updated" datetime="2009-01-01T23:05:54+02:00">January 1, 2009</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Web applications face constant exploitation attempts. Those with a user base must keep their users’ private data, well… private.</p>
<p>While the MySQL security model allows restricting users access to databases, tables and even columns, it has no built in feature for restricting the rows access within the given table.</p>
<p>One cannot allow a user to only update rows 0 through 99, but restrict that user from updating rows 100 to 199. Such restrictions are usually managed in the application level, by adding a necessary “… AND filtering_column = some_value…”</p>
<p>Many web application have the notion of an ‘admin’ account, or several such accounts, which provide greater control over the application. The ‘admin’ account is one account to which many attacks are targeted. One such attack is an attempt to modify the admin’s password, such that the attacker can later log in with and access restricted data. <a href="https://shlomi-noach.github.io/blog/mysql/using-triggers-to-block-malicious-code-an-example#more-145" class="more-link">Continue reading »<span class="screen-reader-text"> “Using triggers to block malicious code: an example”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/using-triggers-to-block-malicious-code-an-example#comments">8 Comments<span class="screen-reader-text"> on Using triggers to block malicious code: an example</span></a></span>	</footer>
</article>

<article id="post-89" class="post-89 post type-post status-publish format-standard hentry category-mysql tag-memcached tag-python tag-query-cache tag-triggers">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/using-memcached-functions-for-mysql-an-automated-alternative-to-query-cache" rel="bookmark">Using memcached functions for MySQL; an automated alternative to Query Cache</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/memcached" rel="tag">memcached</a><a href="https://shlomi-noach.github.io/blog/tag/python" rel="tag">python</a><a href="https://shlomi-noach.github.io/blog/tag/query-cache" rel="tag">Query Cache</a><a href="https://shlomi-noach.github.io/blog/tag/triggers" rel="tag">Triggers</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/using-memcached-functions-for-mysql-an-automated-alternative-to-query-cache" rel="bookmark"><time class="entry-date published" datetime="2008-12-15T07:56:14+02:00">December 15, 2008</time><time class="updated" datetime="2008-12-15T08:27:35+02:00">December 15, 2008</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>There’s a lot of buzz around memcached. memcached is widely used, and has clients for many programming languages and platforms. <a href="http://tangent.org/">TangentOrg</a> have developed a memcached client in the form of MySQL UDFs (User Defined Functions).</p>
<p>I wish to discuss the memcached functions for MySQL: if and how they should be used.</p>
<p>Disclaimer: I do not work with memcached functions for MySQL on a production system; all that is written here reflects my opinion on how things should be done.</p>
<p>With memcached functions for MySQL, we can do the following:</p>
<blockquote>
<pre><strong>SELECT </strong>memc_set('mykey', 'The answer is 42');
<strong>SELECT </strong>memc_get('mykey');</pre>
</blockquote>
<p>(See my previous post on how to <a title="Installing memcached functions for MySQL" href="https://shlomi-noach.github.io/blog/mysql/installing-memcached-functions-for-mysql">install memcached functions for MySQL</a>).</p>
<h4>In what scenario should we use these functions?</h4>
<p>I believe memcached is the right tool for the application level. I am less enthusiastic about using it from MySQL. Sure, pushing it down to MySQL centralizes everything. Instead of having all my application code (PHP, Java etc.) access memcached separately, they can all access one single MySQL node, which gets to access memcached. I see two problems with this approach: <a href="https://shlomi-noach.github.io/blog/mysql/using-memcached-functions-for-mysql-an-automated-alternative-to-query-cache#more-89" class="more-link">Continue reading »<span class="screen-reader-text"> “Using memcached functions for MySQL; an automated alternative to Query Cache”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/using-memcached-functions-for-mysql-an-automated-alternative-to-query-cache#comments">1 Comment<span class="screen-reader-text"> on Using memcached functions for MySQL; an automated alternative to Query Cache</span></a></span>	</footer>
</article>

	</main>


	<footer id="colophon" class="site-footer">
		<div class="site-info">
			<a href="https://wordpress.org/">
				Powered by WordPress			</a>
			<span class="sep"> | </span>
				Theme: <a href="http://openark.org">openark-primer</a> by <a href="http://underscores.me/">Underscores.me</a>.		</div>
	</footer>
</div>

	<div style="display:none">
	</div>
<script>
var pollsL10n = {"ajax_url":"https:\/\/shlomi-noach.github.io\/blog\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-js.js"></script>
<script src="https://secure.gravatar.com/js/gprofiles.js?ver=2020Junaa"></script>
<script>
var WPGroHo = {"my_hash":""};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/modules/wpgroho.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/navigation.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202024.js" async="async" defer></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.2.1',blog:'32412571',post:'0',tz:'2',srv:'code.openark.org'} ]);
	_stq.push([ 'clickTrackerInit', '32412571', '0' ]);
</script>

</body>
</html>
