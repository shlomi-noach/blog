<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	<title>Opinions ‚Äì code.openark.org</title>
<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//s.w.org">



<link rel="stylesheet" id="wp-block-library-css" href="https://shlomi-noach.github.io/blog/wp-includes/css/dist/block-library/style.min.css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wp-polls-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-css.css" media="all">
<style id="wp-polls-inline-css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="openark-primer-style-css" href="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/style.css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/css/jetpack.css" media="all">
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script>



<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel="dns-prefetch" href="//v0.wordpress.com">


<meta property="og:type" content="website">
<meta property="og:title" content="Opinions ‚Äì code.openark.org">
<meta property="og:url" content="https://shlomi-noach.github.io/blog/tag/opinions">
<meta property="og:site_name" content="code.openark.org">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">


<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(242,101,34,.88);}</style></head>

<body class="archive tag tag-opinions tag-51 hfeed no-sidebar">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
							<p class="site-title"><a href="https://shlomi-noach.github.io/blog/" rel="home">code.openark.org</a></p>
								<p class="site-description">Blog by Shlomi Noach</p>
			
			<nav id="site-navigation" class="main-navigation">
				<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">primary-menu</button>
				<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-8109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8109"><a href="https://shlomi-noach.github.io/blog/archives">archives</a></li>
<li id="menu-item-8050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8050"><a href="https://shlomi-noach.github.io/blog/presentations">presentations</a></li>
<li id="menu-item-8055" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8055"><a href="https://shlomi-noach.github.io/blog/about">about</a></li>
<li id="menu-item-8071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8071"><a href="https://github.com/shlomi-noach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li>
<li id="menu-item-8074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8074"><a href="https://www.linkedin.com/in/shlominoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li>
<li id="menu-item-8072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8072"><a href="https://twitter.com/ShlomiNoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></li>
<li id="menu-item-8073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8073"><a href="https://shlomi-noach.github.io/blog/feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-12.832 20c-1.197 0-2.168-.969-2.168-2.165s.971-2.165 2.168-2.165 2.167.969 2.167 2.165-.97 2.165-2.167 2.165zm5.18 0c-.041-4.029-3.314-7.298-7.348-7.339v-3.207c5.814.041 10.518 4.739 10.561 10.546h-3.213zm5.441 0c-.021-7.063-5.736-12.761-12.789-12.792v-3.208c8.83.031 15.98 7.179 16 16h-3.211z"></path></svg></a></li>
</ul></div>			</nav>
		</div>
	</header>

	<main id="primary" class="site-main">

		
			<header class="page-header">
				<h1 class="page-title">Tag: Opinions</h1>			</header>

			
<article id="post-7643" class="post-7643 post type-post status-publish format-standard hentry category-mysql tag-gh-ost tag-gtid tag-operations tag-opinions tag-replication tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-4" rel="bookmark">Three wishes for a new year</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/gh-ost" rel="tag">gh-ost</a><a href="https://shlomi-noach.github.io/blog/tag/gtid" rel="tag">GTID</a><a href="https://shlomi-noach.github.io/blog/tag/operations" rel="tag">operations</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-4" rel="bookmark"><time class="entry-date published updated" datetime="2016-09-28T16:20:54+02:00">September 28, 2016</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>(Almost) another new year by Jewish calendar. What do I wish for the following year?</p>
<ol>
<li>World peace</li>
<li>Good health to all</li>
<li>Relaxed GTID constraints</li>
</ol>
<p>I‚Äôm still not using GTID, and still see operational issues with working with GTID. As a latest example, our new schema migration solution, gh-ost, allows us to test migrations in production, on replicas. The GTID catch? <code>gh-ost</code>¬†has to write something to the binary log. Thus, it ‚Äúcorrupts‚Äù the replica with a bogus GTID entry that will never be met in another server, thus making said replica unsafe to promote. We can work around this, but‚Ä¶</p>
<p>I understand the idea and need for the <code>Executed GTID Set</code>. It will¬†certainly come in handy with multi-writer InnoDB Cluster. However for most use cases GTID poses a burden. The reason is that our topologies are imperfect, and we as humans are imperfect, and operations are most certainly imperfect. We may wish to operate on a replica: test something, by intention or mistake. We may wish to use a subchain as the seed for a new cluster split. We may wish to be able to write to downstream replicas. We may use a 3rd party tool that issues a <code>flush tables with read lock</code>¬†without disabling <code>sql_log_bin</code>. Things just happen.</p>
<p>For that, I would like to suggest GTID control levels, such as:</p>
<ol>
<li><em>Strict</em>: same as Oracle‚Äôs existing¬†implementation. Executed sets, purged sets, whatnot.</li>
<li><em>Last executed</em>: a mode where the only thing that counts is the last executed GTID value. If I repoint replica,¬†all it needs to check is ‚Äúhey this is my last executed GTID entry, give me the coordinates of yours. And, no, I don‚Äôt care about comparing executed and purged sets, I will trust you and keep running from that point on‚Äù</li>
<li><em>Declarative</em>: GTIDs are generated, are visible in each and every binary log entry, but are completely ignored.</li>
</ol>
<p>I realize Oracle MySQL GTID is out for some over 3 years now, but I‚Äôm sorry ‚Äì I still have reservations and see¬†use cases where I fear it will not serve me right.</p>
<p>How about my previous years wishes? World peace and good health never came through, however:</p>
<ul>
<li>My <a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-2015">2015 wish</a> for ‚Äúdecent, operations friendly built in online table refactoring‚Äù was unmet, however <code>gh-ost</code>¬†is a thing now and exceeds my expectations. No, really. Please come see <a href="https://www.percona.com/live/plam16/sessions/introducing-gh-ost-triggerless-painless-trusted-online-schema-migrations">Tom & myself present gh-ost</a> and how it changed our migration paradigm.</li>
<li>My <a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-201">2012 wish</a> for ‚Äúdecent, long waited for, implementation of <a href="http://en.wikipedia.org/wiki/Window_function_%28SQL%29#Window_function">Window Functions</a> (aka Analytic Functions) for MySQL‚Äù was met by¬†MariaDB‚Äôs <a href="https://mariadb.com/kb/en/mariadb/window-functions/">window functions</a>.<br>
Not strictly Window Functions, but Oracle MySQL 8.0 will <a href="http://mysqlserverteam.com/mysql-8-0-labs-recursive-common-table-expressions-in-mysql-ctes/">support CTE</a> (hierarchial/recursive), worth a mention.</li>
</ul>
<p>See you in Amsterdam!</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-4#comments">2 Comments<span class="screen-reader-text"> on Three wishes for a new year</span></a></span>	</footer>
</article>

<article id="post-7439" class="post-7439 post type-post status-publish format-standard hentry category-mysql tag-failover tag-high-availability tag-maxscale tag-opinions tag-orchestrator">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-maxscale-automated-failover-and-orchestrator" rel="bookmark">Thoughts on MaxScale automated failover (and Orchestrator)</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/failover" rel="tag">Failover</a><a href="https://shlomi-noach.github.io/blog/tag/high-availability" rel="tag">High availability</a><a href="https://shlomi-noach.github.io/blog/tag/maxscale" rel="tag">MaxScale</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-maxscale-automated-failover-and-orchestrator" rel="bookmark"><time class="entry-date published" datetime="2015-11-18T11:17:48+02:00">November 18, 2015</time><time class="updated" datetime="2015-11-18T21:31:36+02:00">November 18, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Having attended a talk (as part of the <a href="https://blog.mariadb.org/2015-developers-meeting-amsterdam/">MariaDB Developer Meeting in Amsterdam</a>) about recent developments of <a href="https://mariadb.com/products/mariadb-maxscale">MaxScale</a> in executing automated failovers, here are some (late) observations of mine.</p>
<p>I will begin by noting that the project is stated to be pre-production, and so of course none of the below are complaints, but rather food for thought, points for action and otherwise recommendations.</p>
<p>Some functionality of the MaxScale failover is also implemented by <strong><a href="https://github.com/outbrain/orchestrator">orchestrator</a></strong>, which I author. <em>Orchestrator</em> was built in production environments by and for operational people. In this respect it has gained many insights and had to cope with many real-world cases, special cases & Murphy‚Äôs law cases. This post compares logic, feature set and capabilities of the two where relevant.¬†To some extent the below will¬†read as ‚Äúhey, I‚Äôve already implemented this; shame to re-implement the same‚Äù, and indeed I think that way; but it wouldn‚Äôt be the first time a code of mine would just be re-implemented by someone else and I‚Äôve done the same, myself.</p>
<p>I‚Äôm describing the solution the way I understood it from the talk. If I‚Äôm wrong on any account I‚Äôm happy to be corrected via comments below. <strong>Edit:</strong> <em>please see comment by</em>¬†<a class="url" href="http://www.mariadb.com/" rel="external nofollow">Dipti Joshi</a></p>
<h3>General overview</h3>
<p>The idea is that MaxScale operates as a proxy to your topology. You do not connect to your master directly, but rather through MaxScale. Thus, MaxScale acts as a proxy to your master.</p>
<p>The next phase is that MaxScale would also auto-detect master failure, fix the topology for you, promote a new master, and will have your application unaware of all the complexity and without the app having to change setup/DNS/whatever. Of course some write downtime is implied.</p>
<p>Now for some breakdown.</p>
<h3>Detection</h3>
<p>The detection of a dead master, the check by which a failover is initiated, is based on MaxScale not being able to query the master. This calls for some points for consideration:</p>
<ul>
<li>Typically, I would see ‚ÄúI can‚Äôt connect to the master therefore failover‚Äù as too hysterical, and the basis for a lot of false positives.</li>
<li>However, since in the discussed configuration MaxScale is <em>the only access point</em> to the master, the fact MaxScale cannot connect to the master means the master is inaccessible <em>de-facto</em>.</li>
<li>In light of the above, the decision makes sense ‚Äì but I still hold that it would make false positives.</li>
<li>I‚Äôm unsure (I <em>think</em> not; can anyone comment?) if MaxScale would make multiple attempts over time and only reach the conclusion after¬†X successive failures. This would reduce the false positives.</li>
<li>I‚Äôm having a growing dislike to a ‚Äúcheck for 4 successive times then alert/failover‚Äù Nagios-style behavior. <em>Orchestrator</em> takes a different approach where it recognizes a master‚Äôs death by not being able to connect to the master <em>as well as</em> being able to connect to 1st tier slaves, check their status and observe that <em>they‚Äôre unable to connect to the master as well</em>. See¬†<a title="Permanent Link to What makes a MySQL server failure/recovery case?" href="https://shlomi-noach.github.io/blog/mysql/what-makes-a-mysql-server-failurerecovery-case" rel="bookmark">What makes a MySQL server failure/recovery case?</a>. This approach still calls for further refinement (what if the master is temporarily deadlocked? Is this a failover or not?).</li>
</ul>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-maxscale-automated-failover-and-orchestrator#more-7439" class="more-link">Continue reading ¬ª<span class="screen-reader-text"> ‚ÄúThoughts on MaxScale automated failover (and Orchestrator)‚Äù</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-maxscale-automated-failover-and-orchestrator#comments">6 Comments<span class="screen-reader-text"> on Thoughts on MaxScale automated failover (and Orchestrator)</span></a></span>	</footer>
</article>

<article id="post-7407" class="post-7407 post type-post status-publish format-standard hentry category-mysql tag-opinions">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/new-statements-id-like-to-see-in-mysql-5-8" rel="bookmark">New statements I‚Äôd like to see in MySQL 5.8</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/new-statements-id-like-to-see-in-mysql-5-8" rel="bookmark"><time class="entry-date published updated" datetime="2015-10-08T09:44:50+02:00">October 8, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Following up on¬†<a title="Link to New features I'd like to see in MySQL 5.8" href="https://shlomi-noach.github.io/blog/mysql/new-features-id-like-to-see-in-mysql-5-8" rel="bookmark">New features I‚Äôd like to see in MySQL 5.8</a>, here are <em>statements</em> I would like to see in MySQL 5.8:</p>
<ul>
<li><strong>ENABLE EVENTS;</strong><br>
When promoting a slave to master, I want to be able to enable all those events that are in <strong>SLAVESIDE_DISABLED</strong> state. Today I script an iteration over the events an constructing the <strong>ALTER EVENT‚Ä¶ENABLE</strong> statement one by one. Just activate those!</li>
<li><strong>SKIP GTID TRANSACTION;</strong><br>
I have a transaction on slave that I want to skip, and there‚Äôs GTID. The sequence of
<blockquote>
<pre>STOP SLAVE;
SET GTID_NEXT="...";
BEGIN;
COMMIT;
SET GTID_NEXT="AUTOMATIC";
START SLAVE;</pre>
</blockquote>
<p>is just something I don‚Äôt want to do. To compute the <strong>GTID_NEXT</strong>; to open a transaction; to use session variables; this may seem straightforward to import the above from a shell script, but calculating the next GTID is not entirely trivial; issuing the above from your programming language makes for a weird <em>‚Äúall these have to be in the same session AND you‚Äôre going to do a transaction meanwhile‚Äù</em>. With golang it‚Äôs actually a problem.<br>
Make it simple for me. I‚Äôm willing to do the <strong>STOP/START SLAVE</strong>.</p></li>
<li><strong>BINLOG ENTRY¬†‚Äò<arbitrary text>‚Äô;</strong><br>
Very selfishly, I want to be able to inject a comment into the binary log, of arbitrary text. I want this comment to appear in SBR format, as if it were a DDL.<br>
My selfish reason: injection of Pseudo-GTID. But I can see various other use cases, such as application level injection of app-logic checkpointing; chef/glu injection of <em>‚Äúcode deployed at this time‚Äù</em>; application injection of <em>‚Äúdaily audit done to this point‚Äù</em>.¬†This is too cool and too easy to skip.</li>
<li><strong>SHOW RELAY LOGS;</strong><br>
Similar to <strong>SHOW BINARY¬†LOGS;</strong></li>
<li><strong>PURGE RELAY LOGS TO ‚Äò‚Ä¶‚Äô;</strong><br>
Similar to <strong>PURGE BINARY¬†LOGS TO ‚Äò‚Ä¶‚Äô;</strong><br>
It‚Äôs time relay logs stopped being 2nd class citizens.</li>
<li><strong>SHOW NONBLOCKING [GLOBAL|SESSION] STATUS;</strong><br>
Issue a SHOW GLOBAL|SESSION STATUS query that only shows those variables for which it does not need to block. i.e. this is a safe, fast <em>‚Äúshow me everything you‚Äôve got that I won‚Äôt need to pay for‚Äù</em>.</li>
</ul>
<p>Yes, yes, <em>statements</em> are also features, I know.</p>
<p>¬†</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/new-statements-id-like-to-see-in-mysql-5-8#comments">1 Comment<span class="screen-reader-text"> on New statements I‚Äôd like to see in MySQL 5.8</span></a></span>	</footer>
</article>

<article id="post-7417" class="post-7417 post type-post status-publish format-standard hentry category-mysql tag-operations tag-opinions tag-replication">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/new-features-id-like-to-see-in-mysql-5-8" rel="bookmark">New features I‚Äôd like to see in MySQL 5.8</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/operations" rel="tag">operations</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/new-features-id-like-to-see-in-mysql-5-8" rel="bookmark"><time class="entry-date published updated" datetime="2015-10-07T10:02:16+02:00">October 7, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Following up on Morgan Tocker‚Äôs¬†<a href="http://www.tocker.ca/2015/09/14/what-would-you-like-to-see-in-mysql-5-8.html">What would you like to see in MySQL 5.8?</a>, having attended and participated at the <a href="https://www.percona.com/live/europe-amsterdam-2015/sessions/mysql-58-dreaming-and-brainstorming">brainstorming at Percona Live Amsterdam</a>, and publishing this post while¬†failing to comply with any of Morgan‚Äôs suggested media, these are the features I would like to see in MySQL <strong>5.8</strong>:</p>
<ul>
<li>Dynamicly enable/disable <strong>log-bin</strong>¬†and <strong>log-slave-updates</strong><br>
Today, when changing chef/puppet role of a server from a simple slave to an intermediate master and vice versa, a MySQL restart is required. This is a very big pain which makes replication automation complex, not to mention warmup times.</li>
<li>‚Äú<strong><a href="http://man7.org/linux/man-pages/man1/nice.1.html">nice</a></strong>‚Äú.<br>
I want to be able to execute a query that is <em>nice, i.e</em> has lower priority; will not consume all resources; will stall/throttle so as to allow other queries to complete. Luis asked and I said this could be on a per statement basis, e.g. add a <strong>SQL_NICE</strong> query hint. But I‚Äôm unsure that would be the correct behavior. It also makes sense to do so on a per connection basis (perhaps provide connection attributed to hint <em>niceness</em>?).</li>
<li>Online-<em>ier</em> <strong>ALTER TABLE</strong>. I would in particular want it to apply the <em>nice</em> feature, above. Otherwise throttle by user defined metrics.</li>
<li>Online-<em>ier</em> <strong>ALTER TABLE</strong> in replication stream. ¬†Can the slaves run the <strong>ALTER</strong> statement in parallel?</li>
<li><strong>Re-Group Commit</strong>: in MTS, and when intermediate masters involved, copy+paste the group commit as applied on master as working downstream. I suspect this is easily achievable. The result: same parallelism¬†for replicating slaves in all levels, whether they replicate directly from master or from 2nd, 3rd tier intermediate masters. Today parallelism decreases as we go downstream.</li>
<li>Global user-defined-variables. I want to be able to define arbitrary (global) variables that I can later query via <strong>SELECT @@global.arbitrary</strong>. This would be similar to HTML <strong>5</strong>‚Äòs <strong>‚Äúdata-*‚Äù</strong> attributes. I often wish I could¬†tell & ask MySQL my puppet role; or the server status (is it live? Is it offline? Does it belong to a specific pool? etc.). Similar to <strong>‚Äúloose-*‚Äù</strong> syntax, this could be a <strong>‚Äúdata-*‚Äù</strong> or <strong>‚Äúuser-*‚Äù</strong>¬†name prefix system.</li>
</ul>
<p>I will follow up on new <em>statements</em> I would like to see in MySQL <strong>5.8</strong>.</p>
<p>The brainstorming session at PerconaLive, I should note, was pure joy, and apart from getting two nice furry dolphins I enjoyed the engagement, the diversity of ideas, and the fact Oracle engineers¬†(Mark in particular) were very busy taking notes or otherwise openly discussing the viability of some requested features.</p>
<p>¬†</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/new-features-id-like-to-see-in-mysql-5-8#comments">5 Comments<span class="screen-reader-text"> on New features I‚Äôd like to see in MySQL 5.8</span></a></span>	</footer>
</article>

<article id="post-7327" class="post-7327 post type-post status-publish format-standard hentry category-mysql tag-configuration tag-information_schema tag-monitoring tag-new-features tag-opinions tag-orchestrator tag-performance_schema tag-security tag-stored-routines">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/baffling-5-7-globalstatus-variables-issues-unclean-migration-path" rel="bookmark">Baffling 5.7 global/status variables issues, unclean migration path</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/configuration" rel="tag">Configuration</a><a href="https://shlomi-noach.github.io/blog/tag/information_schema" rel="tag">INFORMATION_SCHEMA</a><a href="https://shlomi-noach.github.io/blog/tag/monitoring" rel="tag">Monitoring</a><a href="https://shlomi-noach.github.io/blog/tag/new-features" rel="tag">New Features</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/orchestrator" rel="tag">orchestrator</a><a href="https://shlomi-noach.github.io/blog/tag/performance_schema" rel="tag">performance_schema</a><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a><a href="https://shlomi-noach.github.io/blog/tag/stored-routines" rel="tag">Stored routines</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/baffling-5-7-globalstatus-variables-issues-unclean-migration-path" rel="bookmark"><time class="entry-date published" datetime="2015-08-07T14:39:59+02:00">August 7, 2015</time><time class="updated" datetime="2015-08-19T10:00:11+02:00">August 19, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>MySQL <strong>5.7</strong> introduces a change in the way we query for global variables and status variables: the <strong>INFORMATION_SCHEMA.(GLOBAL|SESSION)_(VARIABLES|STATUS)</strong> tables are now deprecated and empty. Instead, we are to use the respective <strong>performance_schema.(global|session)_(variables|status)</strong> tables.</p>
<p>But the change goes farther than that; there is also a security change. Oracle¬†created a¬†pitfall of <strong>2</strong> changes at the same time:</p>
<ol>
<li>Variables/status moved to a different table</li>
<li>Privileges required on said table</li>
</ol>
<p>As an example, my non-root user gets:</p>
<blockquote>
<pre>mysql> show session variables like 'tx_isolation';
ERROR 1142 (42000): SELECT command denied to user 'normal_user'@'my_host' for table 'session_variables'</pre>
</blockquote>
<p>Who gets affected by this? Nearly <em>everyone and everything</em>.</p>
<ul>
<li>Your Nagios will not be able to read status variables</li>
<li>Your ORM will not be able to determine session variables</li>
<li>Your replication user will fail connecting (see <a href="http://datacharmer.blogspot.nl/2015/08/mysql-578-features-bugs-and-rumors.html">this post by Giuseppe</a>)</li>
<li>And most everyone else.</li>
</ul>
<p>The problem with the above is that involves two unrelated¬†changes to your setup, which are not entirely¬†simple to coordinate:</p>
<ol>
<li>Change your app code to choose the correct¬†schema (information_schema vs. performance_schema)</li>
<li><strong>GRANT</strong> the permissions on your database</li>
</ol>
<p>Perhaps at this point you still do not consider this to be a problem. You may be thinking: <em>well, let‚Äôs first prepare by creating the GRANTs, and once that is in place, we can, at our leisure, modify the code</em>.</p>
<p>Not so fast. Can you really that simply create those GRANTs? <a href="https://shlomi-noach.github.io/blog/mysql/baffling-5-7-globalstatus-variables-issues-unclean-migration-path#more-7327" class="more-link">Continue reading ¬ª<span class="screen-reader-text"> ‚ÄúBaffling 5.7 global/status variables issues, unclean migration path‚Äù</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/baffling-5-7-globalstatus-variables-issues-unclean-migration-path#comments">5 Comments<span class="screen-reader-text"> on Baffling 5.7 global/status variables issues, unclean migration path</span></a></span>	</footer>
</article>

<article id="post-7223" class="post-7223 post type-post status-publish format-standard hentry category-mysql tag-opinions tag-perconalive tag-secondary tag-tokudb">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-2015-reflections" rel="bookmark">Percona Live 2015: Reflections</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a><a href="https://shlomi-noach.github.io/blog/tag/secondary" rel="tag">secondary</a><a href="https://shlomi-noach.github.io/blog/tag/tokudb" rel="tag">TokuDB</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-2015-reflections" rel="bookmark"><time class="entry-date published updated" datetime="2015-04-18T03:41:07+02:00">April 18, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Some personal reflections on <a href="https://www.percona.com/live/mysql-conference-2015/">PerconaLive 2015</a>:</p>
<p><strong>Percona acquires Tokutek</strong></p>
<p>Well done! Tokutek develops the TokuDB storage engine for MySQL and TokuMX engine for MongoDB. I will discuss the MySQL aspect only.</p>
<p>TokuDB was released as open source in 2013. It has attained a lot of traction and I have used it myself for some time. I met¬†issues with locking or otherwise operational difficulties which I reported, and otherwise was fascinated by such features as great compression, online schema changes, and more.</p>
<p>Recently another company, InfiniDB, that also released its MySQL-backed codebase as open source, went out of business. I was afraid the same might happen to Tokutek.</p>
<p>I see Percona‚Äôs purchase as a very good move for the community. I saw a lot of TokuDB interest in Percona for some time now, and it is clearly interested in the¬†technology. I expect they will add their own hands-on experience into the development of more operations-friendly features; put effort in solving locking issues (it‚Äôs been a while since I last checked, of course some of these may have been addressed by now). I am guessing they will work on¬†a Galera/TokuDB integration and offer a ‚ÄúToku-XtraDB-Cluster‚Äù.</p>
<p>TokuDB can compete with InnoDB in many places, while in others each will have its distinct advantage.</p>
<p>I see this is as good news for the community.</p>
<p><strong>Community Awards and Lightning Talks</strong></p>
<p>On a completely different subject, I believe it is commonly accepted that this year‚Äôs setup for the community awards &¬†lightning talks was unsuccessful. The noise was astounding, human traffic was interrupting and overall this was a poor experience. We (Giuseppe Maxia, Kortney Runyan & myself) made¬†a quick, informal brainstorming on this and came up with a couple ideas. One of which we hope to try in the upcoming <em>Percona Live Europe ‚Äì Amsterdam</em>.</p>
<p>We apologize to the speakers for the¬†difficulties.</p>
<p><strong>Percona Live Europe ‚Äì Amsterdam</strong></p>
<p>Haha! Having recently relocated to the Netherlands I‚Äôm of course very happy. But regardless, Percona Live London was fun ‚Äì and yet¬†running on low fuel. I think it was a great idea to change location (and more locations expected in the future). This is the path taken by such conferences as OSCon, Velocity, Strata and more. Amsterdam in particular, as I‚Äôve recently learned, is especially appreciated by many. I think this conf will do great!</p>
<p><strong>Woz</strong></p>
<p>And now for something completely different. Woz‚Äô talk was that. I‚Äôm happy he came; I appreciate that he discussed education; and it was fun.</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-2015-reflections#respond">Leave a Comment<span class="screen-reader-text"> on Percona Live 2015: Reflections</span></a></span>	</footer>
</article>

<article id="post-7218" class="post-7218 post type-post status-publish format-standard hentry category-mysql tag-community tag-open-source tag-opinions tag-secondary">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-2015-reflections-the-apache-ccla-offer" rel="bookmark">Percona Live 2015: Reflections; the Apache CCLA offer</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/community" rel="tag">community</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/secondary" rel="tag">secondary</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-2015-reflections-the-apache-ccla-offer" rel="bookmark"><time class="entry-date published" datetime="2015-04-18T03:11:56+02:00">April 18, 2015</time><time class="updated" datetime="2015-04-18T03:41:36+02:00">April 18, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p><strong>Facebook, Google, Twitter, LinkedIn, Alibaba, MariaDB, Percona team up and offer Oracle all public changes under the <a href="https://www.apache.org/licenses/cla-corporate.txt">Apache CCLA</a></strong></p>
<p>Read again please.</p>
<p>My one word summary of this is: Romantic. In the most positive sense.</p>
<p><em>Disclaimer: I am not a lawyer; this is my understanding of the current status and of the offer.</em></p>
<p>Summarizing the deal: the teams participating with WebScaleSQL would like to push code upstream. Current legal issues¬†limit their options. Existing patches/contributions from Percona & MariaDB are licensed by GPLv2, which Oracle cannot import as it distributes a commercial, closed source, edition, in addition to its open source MySQL community edition.</p>
<p>So what happens is that there is a lot of free code, great patches, new features out there, that are only available via MariaDB or WebscaleSQL or Percona Server, but not in the Oracle MySQL code base. This, in turn, means Oracle re-implements many features originating from said companies. And, more importantly, said companies need to routinely rebase their¬†code on new Oracle releases, repeating tedious work.</p>
<p>The offer is that Oracle agrees to the Apache CCLA as a license by which it would be able to incorporate contributions. Oracle would then be able to use incorporated code in both open source and commercial edition. Oracle will choose what code to incorporate; hopefully many patches will be accepted upstream, and the community will benefit from a rich featureset, rapid developed MySQL server.</p>
<p>Clearly a lot of work, persuasion, lawyer time, discussions etc. have been invested in this effort. I would like to add my humble <strong>+1/like/favorite/whathaveyou</strong>. You may add yours by letting Oracle know your opinion on the subject. Media tools are great for this.</p>
<p>¬†</p>
<p>¬†</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/percona-live-2015-reflections-the-apache-ccla-offer#respond">Leave a Comment<span class="screen-reader-text"> on Percona Live 2015: Reflections; the Apache CCLA offer</span></a></span>	</footer>
</article>

<article id="post-7002" class="post-7002 post type-post status-publish format-standard hentry category-mysql tag-opinions tag-secondary">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-3" rel="bookmark">Three wishes for a new year</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/secondary" rel="tag">secondary</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-3" rel="bookmark"><time class="entry-date published" datetime="2014-09-23T11:21:13+02:00">September 23, 2014</time><time class="updated" datetime="2014-09-23T16:04:54+02:00">September 23, 2014</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<div>
<p>Another new year by Jewish calendar. What do I wish for the following year?</p>
<ol>
<li>World peace</li>
<li>Good health to all</li>
<li>Multi-core execution for queries</li>
</ol>
<p>After having evaluated a few columnar databases, and having seen how a single query gets 24 cores busy, I can‚Äôt look at MySQL the same way again. The fact that a single query consumes a single core only doesn‚Äôt seem right in the year 2014. <a href="https://github.com/greenlion/swanhart-tools/tree/master/shard-query">Shard-query</a> is a cool application-level attempt to solve the above; I would like to see stuff like this implemented inside the server (or inside the storage engine where possible).</p>
<p>None of my wishes in previous years [<a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year">2010</a>], [<a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-2">2011</a>], [<a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-201">2012</a>], [<a href="https://shlomi-noach.github.io/blog/mysql/three-wished-for-a-new-year-2013">2013</a>] came true (and mostly gone worse). I‚Äôm still willing to settle for two out of three.</p>
</div>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/three-wishes-for-a-new-year-3#comments">7 Comments<span class="screen-reader-text"> on Three wishes for a new year</span></a></span>	</footer>
</article>

<article id="post-6814" class="post-6814 post type-post status-publish format-standard hentry category-mysql tag-opinions tag-perconalive">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/some-anecdotes-i-learned-at-percona-live" rel="bookmark">Some anecdotes I learned at Percona Live</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/perconalive" rel="tag">PerconaLive</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/some-anecdotes-i-learned-at-percona-live" rel="bookmark"><time class="entry-date published updated" datetime="2014-04-08T04:06:20+02:00">April 8, 2014</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>While on the plane back home I wrote down all my impressions from Percona Live 2014. Have lots of TODOs and great ideas to implement. Among all my impressions, there were a few anecdotes worth noting.</p>
<ul>
<li>5.6 GTID is still unfriendly. It will require complete shutdown & reconfiguration of your entire replication topology; and some companies present hacks around this. Notable, Facebook recoded GTID related code (slave agrees to replicate with GTID even though its master still uses binlog coordinates). Booking.com have their own hack around slowly migrating their topologies. And in a great lightning talk we were shown how to patch MySQL such that the relay logs turn into a¬† consistent GTID-like coordinate system.</li>
<li>Galera replication has been implemented for TokuDB (only active-passive mode, not active-active). This came as a surprise to Tokutek ; apparently Codership did this within a few hours of work. The rest is up for Tokutek!</li>
<li>WebScaleSQL is a cool initiative that aims to assist in pushing commonly desired featured back upstream. It is Web Scale. It is also not a productio0n distribution and I do not expect it to be, It is not a fork that is meant for the common DBA to download and deploy.</li>
<li>Tungsten replicator has MySQL to Hadoop replication using staging tables ‚Äì an auditing of changes that are group-deployed on Hadoop.</li>
<li>Still so many people unfamiliar with MySQLSandbox. It‚Äôs such a basic tool, especially for testing and local installations.</li>
<li>Still misconceptions about common_schema. Yes, I do use it on production.</li>
<li>Everyone has the same problems üôÇ</li>
<li>Replication is still queen of MySQL‚Äôs featureset. We‚Äôre still all about failing over, promoting, scaling via replication.</li>
<li>Linux rules. Where two MacBooks failed to connect to the projector, my Lenovo/Ubuntu Linux did the job just fine and saved the day.</li>
</ul>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/some-anecdotes-i-learned-at-percona-live#respond">Leave a Comment<span class="screen-reader-text"> on Some anecdotes I learned at Percona Live</span></a></span>	</footer>
</article>

<article id="post-6713" class="post-6713 post type-post status-publish format-standard hentry category-mysql tag-common_schema tag-development tag-opinions tag-queryscript tag-stored-routines">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/why-delegating-code-to-mysql-stored-routines-is-poor-engineering-practice" rel="bookmark">Why delegating code to MySQL Stored Routines is poor engineering practice</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/development" rel="tag">Development</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a><a href="https://shlomi-noach.github.io/blog/tag/queryscript" rel="tag">QueryScript</a><a href="https://shlomi-noach.github.io/blog/tag/stored-routines" rel="tag">Stored routines</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/why-delegating-code-to-mysql-stored-routines-is-poor-engineering-practice" rel="bookmark"><time class="entry-date published" datetime="2014-02-06T10:32:17+02:00">February 6, 2014</time><time class="updated" datetime="2016-12-27T18:45:41+02:00">December 27, 2016</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I happen to use stored routines with MySQL. In fact, my open source project <a href="http://code.google.com/p/common-schema/">common_schema</a> heavily utilizes them. DBA-wise, I think they provide with a lot of power (alas, the ANSI:SQL 2003 syntax feels more like COBOL than a sane programming language, which is why I use <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/query_script.html">QueryScript</a> instead).</p>
<p>However I wish to discuss the use of stored routines as integral part of your application code, which I discourage.</p>
<p>The common discussion on whether to use or not use stored routines typically revolves around data transfer (with stored routines you transfer less data since it‚Äôs being processed on server side), security (with stored routines you can obfuscate/hide internal datasets, and provide with limited and expected API) and performance (with MySQL this is not what you would expect, as routines are interpreted & their queries re-evaluated, as opposed to other RDBMS you may be used to).</p>
<p>But I wish to discuss the use of stored routines from an engineering standpoint. The first couple of points I raise are cultural/behavioural.</p>
<h4>2nd grade citizens</h4>
<p>Your stored routines are not likely to integrate well with your IDE. While your Java/Scala/PHP/Ruby/whatnot code comfortably lies within your home directory, the stored routines live in their own space: a database container. They‚Äôre not as visible to you as your standard code. Your IDE is unaware of their existence and is unlikely to have the necessary plugin/state of mind to be able to view these.</p>
<p>This leads to difficulty in maintaining the code. People typically resort to using some SQL-oriented GUI tool such as MySQL Workbench, SequelPro or other, commercial tools. But these tools, while make it easy to edit your routine code, do not integrate (well?) with your source control. I can‚Äôt say I‚Äôve used all GUI tools; but how many of them will have Git/SVN/Mercurial connectors? How many of them will keep local history changes once you edit a routine? I‚Äôm happy to get introduced to such a tool.</p>
<p>Even with such integration, you‚Äôre split between two IDEs. And if you‚Äôre the command line enthusiast, well, you can‚Äôt just <strong>svn ci -m ‚Äúfixed my stored procedure bug‚Äù</strong>. Your code is simply not in your trunk directory.</p>
<p>It <em>can</em> be done. You <em>could</em> maintain the entire routine code from within your source tree, and hats off to all those who do it. Most will not. See later on about deployments for more on this. <a href="https://shlomi-noach.github.io/blog/mysql/why-delegating-code-to-mysql-stored-routines-is-poor-engineering-practice#more-6713" class="more-link">Continue reading ¬ª<span class="screen-reader-text"> ‚ÄúWhy delegating code to MySQL Stored Routines is poor engineering practice‚Äù</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/why-delegating-code-to-mysql-stored-routines-is-poor-engineering-practice#comments">11 Comments<span class="screen-reader-text"> on Why delegating code to MySQL Stored Routines is poor engineering practice</span></a></span>	</footer>
</article>

	<nav class="navigation posts-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://shlomi-noach.github.io/blog/tag/opinions/page/2">Older posts</a></div></div>
	</nav>
	</main>


	<footer id="colophon" class="site-footer">
		<div class="site-info">
			<a href="https://wordpress.org/">
				Powered by WordPress			</a>
			<span class="sep"> | </span>
				Theme: <a href="http://openark.org">openark-primer</a> by <a href="http://underscores.me/">Underscores.me</a>.		</div>
	</footer>
</div>

	<div style="display:none">
	</div>
<script>
var pollsL10n = {"ajax_url":"https:\/\/shlomi-noach.github.io\/blog\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-js.js"></script>
<script src="https://secure.gravatar.com/js/gprofiles.js?ver=2020Junaa"></script>
<script>
var WPGroHo = {"my_hash":""};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/modules/wpgroho.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/navigation.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202024.js" async="async" defer></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.2.1',blog:'32412571',post:'0',tz:'2',srv:'code.openark.org'} ]);
	_stq.push([ 'clickTrackerInit', '32412571', '0' ]);
</script>

</body>
</html>
