<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	
	>
<channel>
	<title>
	Comments on: EXPLAIN: missing db info	</title>
	<atom:link href="https://shlomi-noach.github.io/blog/mysql/explain-missing-db-info/feed" rel="self" type="application/rss+xml" />
	<link>https://shlomi-noach.github.io/blog/mysql/explain-missing-db-info</link>
	<description>Blog by Shlomi Noach</description>
	<lastBuildDate>Wed, 12 May 2010 12:57:00 +0000</lastBuildDate>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.3.3</generator>
			<item>
				<title>
				By: Xaprb				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/explain-missing-db-info/comment-page-1#comment-13460</link>
		<dc:creator><![CDATA[Xaprb]]></dc:creator>
		<pubDate>Wed, 12 May 2010 12:57:00 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2368#comment-13460</guid>
					<description><![CDATA[I wish I had a memory that good.

Even if you don&#039;t learn Perl, the test cases in trunk/common/t/QueryParser.t might be useful to you.]]></description>
		<content:encoded><![CDATA[<p>I wish I had a memory that good.</p>
<p>Even if you don&#8217;t learn Perl, the test cases in trunk/common/t/QueryParser.t might be useful to you.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/explain-missing-db-info/comment-page-1#comment-13450</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Wed, 12 May 2010 08:13:06 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2368#comment-13450</guid>
					<description><![CDATA[@Baron

Thank you; Roland is a good listener :)]]></description>
		<content:encoded><![CDATA[<p>@Baron</p>
<p>Thank you; Roland is a good listener ðŸ™‚</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Roland Bouman				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/explain-missing-db-info/comment-page-1#comment-13449</link>
		<dc:creator><![CDATA[Roland Bouman]]></dc:creator>
		<pubDate>Wed, 12 May 2010 08:01:43 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2368#comment-13449</guid>
					<description><![CDATA[@shlomi, 

well, thank baron :)

Here&#039;s the slides:

http://assets.en.oreilly.com/1/event/36/EXPLAIN%20Demystified%20Presentation%201.pdf 

(these are of the 2010 talk - not the one I attended but I see the info is still there)]]></description>
		<content:encoded><![CDATA[<p>@shlomi, </p>
<p>well, thank baron ðŸ™‚</p>
<p>Here&#8217;s the slides:</p>
<p><a href="http://assets.en.oreilly.com/1/event/36/EXPLAIN%20Demystified%20Presentation%201.pdf" rel="nofollow ugc">http://assets.en.oreilly.com/1/event/36/EXPLAIN%20Demystified%20Presentation%201.pdf</a> </p>
<p>(these are of the 2010 talk &#8211; not the one I attended but I see the info is still there)</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/explain-missing-db-info/comment-page-1#comment-13448</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Wed, 12 May 2010 07:54:30 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2368#comment-13448</guid>
					<description><![CDATA[@Roland,
Hey, that&#039;s pretty cool! I may play around with this (or maybe not just right now). I&#039;ll let you know if I happen to get results.]]></description>
		<content:encoded><![CDATA[<p>@Roland,<br />
Hey, that&#8217;s pretty cool! I may play around with this (or maybe not just right now). I&#8217;ll let you know if I happen to get results.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Roland Bouman				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/explain-missing-db-info/comment-page-1#comment-13446</link>
		<dc:creator><![CDATA[Roland Bouman]]></dc:creator>
		<pubDate>Wed, 12 May 2010 07:38:53 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2368#comment-13446</guid>
					<description><![CDATA[@shlomi, 

&quot;How can I guess the  alias and match it against the query?&quot;

I think I picked this up during Baron&#039;s &quot;Explain Demystified&quot; talk from two years back at the MySQL user conference. 

Assuming you can parse the SQL and succesfully match the ci and co aliases in the explain output to the query parse tree, you then know that `co` is a DERIVED table. Together with the value in the id column for that table, you get &quot;derived2&quot; (as in, CONCAT(LOWER(select_type), id)

Try it with another query like this:

explain extended select id from world.City ci, (select code from (select * from world.Country) co) s1;

You&#039;ll notice that it actually works.

Of course, don&#039;t mistake my explanation as approval - this is an ugly mess, at least for what you want to achieve :)]]></description>
		<content:encoded><![CDATA[<p>@shlomi, </p>
<p>&#8220;How can I guess the  alias and match it against the query?&#8221;</p>
<p>I think I picked this up during Baron&#8217;s &#8220;Explain Demystified&#8221; talk from two years back at the MySQL user conference. </p>
<p>Assuming you can parse the SQL and succesfully match the ci and co aliases in the explain output to the query parse tree, you then know that `co` is a DERIVED table. Together with the value in the id column for that table, you get &#8220;derived2&#8221; (as in, CONCAT(LOWER(select_type), id)</p>
<p>Try it with another query like this:</p>
<p>explain extended select id from world.City ci, (select code from (select * from world.Country) co) s1;</p>
<p>You&#8217;ll notice that it actually works.</p>
<p>Of course, don&#8217;t mistake my explanation as approval &#8211; this is an ugly mess, at least for what you want to achieve ðŸ™‚</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/explain-missing-db-info/comment-page-1#comment-13443</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Wed, 12 May 2010 05:46:01 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2368#comment-13443</guid>
					<description><![CDATA[@Baron,

Thanks; I&#039;ve just seen it. I think mk-query-digest already uses a very smart SQL parser.
If I happen to work on my perl skills, I&#039;ll take a better look.]]></description>
		<content:encoded><![CDATA[<p>@Baron,</p>
<p>Thanks; I&#8217;ve just seen it. I think mk-query-digest already uses a very smart SQL parser.<br />
If I happen to work on my perl skills, I&#8217;ll take a better look.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/explain-missing-db-info/comment-page-1#comment-13441</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Wed, 12 May 2010 05:22:13 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2368#comment-13441</guid>
					<description><![CDATA[Roland,

It still does not help in matching the query against the execution plan.
&lt;pre&gt;
mysql&gt; explain extended select id from world.City ci, (select code from world.Country co) s1;
+----+-------------+------------+-------+---------------+---------+---------+------+------+----------+--------------------------------+
&#124; id &#124; select_type &#124; table      &#124; type  &#124; possible_keys &#124; key     &#124; key_len &#124; ref  &#124; rows &#124; filtered &#124; Extra                          &#124;
+----+-------------+------------+-------+---------------+---------+---------+------+------+----------+--------------------------------+
&#124;  1 &#124; PRIMARY     &#124; &#060;derived2&#062; &#124; ALL   &#124; NULL          &#124; NULL    &#124; NULL    &#124; NULL &#124;  239 &#124;   100.00 &#124;                                &#124;
&#124;  1 &#124; PRIMARY     &#124; ci         &#124; index &#124; NULL          &#124; PRIMARY &#124; 4       &#124; NULL &#124; 4079 &#124;   100.00 &#124; Using index; Using join buffer &#124;
&#124;  2 &#124; DERIVED     &#124; co         &#124; index &#124; NULL          &#124; PRIMARY &#124; 3       &#124; NULL &#124;  239 &#124;   100.00 &#124; Using index                    &#124;
+----+-------------+------------+-------+---------------+---------+---------+------+------+----------+--------------------------------+


&lt;/pre&gt;
How can I guess the &#060;derived2&#062; alias and match it against the query? How about two derived tables?

You are right; I don&#039;t have to go to that depth; but the job becomes very difficult. I suspect there are other examples.]]></description>
		<content:encoded><![CDATA[<p>Roland,</p>
<p>It still does not help in matching the query against the execution plan.</p>
<pre>
mysql> explain extended select id from world.City ci, (select code from world.Country co) s1;
+----+-------------+------------+-------+---------------+---------+---------+------+------+----------+--------------------------------+
| id | select_type | table      | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra                          |
+----+-------------+------------+-------+---------------+---------+---------+------+------+----------+--------------------------------+
|  1 | PRIMARY     | &lt;derived2&gt; | ALL   | NULL          | NULL    | NULL    | NULL |  239 |   100.00 |                                |
|  1 | PRIMARY     | ci         | index | NULL          | PRIMARY | 4       | NULL | 4079 |   100.00 | Using index; Using join buffer |
|  2 | DERIVED     | co         | index | NULL          | PRIMARY | 3       | NULL |  239 |   100.00 | Using index                    |
+----+-------------+------------+-------+---------------+---------+---------+------+------+----------+--------------------------------+


</pre>
<p>How can I guess the &lt;derived2&gt; alias and match it against the query? How about two derived tables?</p>
<p>You are right; I don&#8217;t have to go to that depth; but the job becomes very difficult. I suspect there are other examples.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Xaprb				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/explain-missing-db-info/comment-page-1#comment-13419</link>
		<dc:creator><![CDATA[Xaprb]]></dc:creator>
		<pubDate>Tue, 11 May 2010 14:23:58 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2368#comment-13419</guid>
					<description><![CDATA[Take a look at what mk-index-usage does.  There is a lot of overlap between your case and what that tool does.  Yes, there is a lot of SQL parsing, and it is not easy.  We have a lot of test cases.]]></description>
		<content:encoded><![CDATA[<p>Take a look at what mk-index-usage does.  There is a lot of overlap between your case and what that tool does.  Yes, there is a lot of SQL parsing, and it is not easy.  We have a lot of test cases.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Roland Bouman				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/explain-missing-db-info/comment-page-1#comment-13411</link>
		<dc:creator><![CDATA[Roland Bouman]]></dc:creator>
		<pubDate>Tue, 11 May 2010 08:43:47 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2368#comment-13411</guid>
					<description><![CDATA[Shlomi, Rob has a point. The &quot;canonical&quot; query in the EXPLAIN EXTENDED output is very ugly, but probably quite easy to parse, as all identifiers are quoted, join conditions are fully parenthesized, whitespace is normalized - lot of headeaches gone. 

I suspect you could even do it with a hand-crafted operator precedence parser.]]></description>
		<content:encoded><![CDATA[<p>Shlomi, Rob has a point. The &#8220;canonical&#8221; query in the EXPLAIN EXTENDED output is very ugly, but probably quite easy to parse, as all identifiers are quoted, join conditions are fully parenthesized, whitespace is normalized &#8211; lot of headeaches gone. </p>
<p>I suspect you could even do it with a hand-crafted operator precedence parser.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/explain-missing-db-info/comment-page-1#comment-13410</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Tue, 11 May 2010 08:33:06 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2368#comment-13410</guid>
					<description><![CDATA[@Peter,
I see you&#039;ve tried the same path...]]></description>
		<content:encoded><![CDATA[<p>@Peter,<br />
I see you&#8217;ve tried the same path&#8230;</p>
]]></content:encoded>
						</item>
			</channel>
</rss>
