<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	
	>
<channel>
	<title>
	Comments on: Quick reminder: avoid using binlog-do-db	</title>
	<atom:link href="https://shlomi-noach.github.io/blog/mysql/quick-reminder-avoid-using-binlog-do-db/feed" rel="self" type="application/rss+xml" />
	<link>https://shlomi-noach.github.io/blog/mysql/quick-reminder-avoid-using-binlog-do-db</link>
	<description>Blog by Shlomi Noach</description>
	<lastBuildDate>Tue, 18 May 2010 08:22:35 +0000</lastBuildDate>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.3.3</generator>
			<item>
				<title>
				By: Replication configuration checklist &#124; code.openark.org				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/quick-reminder-avoid-using-binlog-do-db/comment-page-1#comment-13739</link>
		<dc:creator><![CDATA[Replication configuration checklist &#124; code.openark.org]]></dc:creator>
		<pubDate>Tue, 18 May 2010 08:22:35 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2077#comment-13739</guid>
					<description><![CDATA[[...] and developers from creating those situations. See documentation here. See also discussion here and [...]]]></description>
		<content:encoded><![CDATA[<p>[&#8230;] and developers from creating those situations. See documentation here. See also discussion here and [&#8230;]</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Mats Kindahl				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/quick-reminder-avoid-using-binlog-do-db/comment-page-1#comment-11170</link>
		<dc:creator><![CDATA[Mats Kindahl]]></dc:creator>
		<pubDate>Wed, 03 Mar 2010 08:23:19 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2077#comment-11170</guid>
					<description><![CDATA[It is true that the current database issue (that I also mentioned in http://mysqlmusings.blogspot.com/2006/09/replication-and-disappearing.html) is something that has to be remembered, but even more important is understanding that if the statements are not written to the binary log, it is not possible to recover the database in the event of a crash. This means that statements filtered out from the binary log using binlog-* options should *only* be statements that can be lost without risking the integrity of the database.

For this reason, filtering using replicate-* options is preferable.

Row-based replication is a better way to actually filter out the real changes, but as Todd pointed out, the behavior is &quot;interesting&quot; in MIXED mode. We are working on trying to figure out a way to handle that safely.

For more advanced filtering, we are considering turning the pre-alpha http://forge.mysql.com/wiki/ReplicationFeatures/ScriptableReplication into a solid implementation, which will allow quite advanced replication setups indeed.]]></description>
		<content:encoded><![CDATA[<p>It is true that the current database issue (that I also mentioned in <a href="http://mysqlmusings.blogspot.com/2006/09/replication-and-disappearing.html" rel="nofollow ugc">http://mysqlmusings.blogspot.com/2006/09/replication-and-disappearing.html</a>) is something that has to be remembered, but even more important is understanding that if the statements are not written to the binary log, it is not possible to recover the database in the event of a crash. This means that statements filtered out from the binary log using binlog-* options should *only* be statements that can be lost without risking the integrity of the database.</p>
<p>For this reason, filtering using replicate-* options is preferable.</p>
<p>Row-based replication is a better way to actually filter out the real changes, but as Todd pointed out, the behavior is &#8220;interesting&#8221; in MIXED mode. We are working on trying to figure out a way to handle that safely.</p>
<p>For more advanced filtering, we are considering turning the pre-alpha <a href="http://forge.mysql.com/wiki/ReplicationFeatures/ScriptableReplication" rel="nofollow ugc">http://forge.mysql.com/wiki/ReplicationFeatures/ScriptableReplication</a> into a solid implementation, which will allow quite advanced replication setups indeed.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/quick-reminder-avoid-using-binlog-do-db/comment-page-1#comment-11161</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Wed, 03 Mar 2010 03:46:22 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2077#comment-11161</guid>
					<description><![CDATA[@Sheeri,
Well put. Though I did not say &quot;never&quot; or &quot;always&quot; anywhere in my post :)
I did say &quot;avoid&quot;, and I take note of your point.

@Todd,
Thank you! Yes, I did only relate to statement based replication. Thanks for pointing it out.

@Ronald,
BLACKHOLE is indeed an option; and I&#039;ve been using it here and there.
I&#039;m always concerned, though, that someone should do an ALTER TABLE ENGINE=... on the master in order to rebuild it or something, without setting SQL_LOG_BIN to 0.]]></description>
		<content:encoded><![CDATA[<p>@Sheeri,<br />
Well put. Though I did not say &#8220;never&#8221; or &#8220;always&#8221; anywhere in my post ðŸ™‚<br />
I did say &#8220;avoid&#8221;, and I take note of your point.</p>
<p>@Todd,<br />
Thank you! Yes, I did only relate to statement based replication. Thanks for pointing it out.</p>
<p>@Ronald,<br />
BLACKHOLE is indeed an option; and I&#8217;ve been using it here and there.<br />
I&#8217;m always concerned, though, that someone should do an ALTER TABLE ENGINE=&#8230; on the master in order to rebuild it or something, without setting SQL_LOG_BIN to 0.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Ronald Bradford				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/quick-reminder-avoid-using-binlog-do-db/comment-page-1#comment-11147</link>
		<dc:creator><![CDATA[Ronald Bradford]]></dc:creator>
		<pubDate>Tue, 02 Mar 2010 20:52:58 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2077#comment-11147</guid>
					<description><![CDATA[I would agree that keeping your replication slaves consistent with the master in smaller environments is significantly simpler then finding weird issues like this.  

My comment would also be just how much overhead does the filtering do, either on the master and the slave.  Reducing I/O may be a factor, but under general use by 99% of customers this is not an issue.

If you are happy to incur the cost of writing to the binary log and replaying the binary log on the slave, but you don&#039;t want the data on the slave, another trick is to change the slave DB objects to the BLACKHOLE storage engine.  You can no benefit in all the operations being performed, you simply win on the overall storage in the DB on the slave.  
NOTE of course, you can not actually use this slave for failover, or for reads, however you could never do that when ignoring replication anyway.]]></description>
		<content:encoded><![CDATA[<p>I would agree that keeping your replication slaves consistent with the master in smaller environments is significantly simpler then finding weird issues like this.  </p>
<p>My comment would also be just how much overhead does the filtering do, either on the master and the slave.  Reducing I/O may be a factor, but under general use by 99% of customers this is not an issue.</p>
<p>If you are happy to incur the cost of writing to the binary log and replaying the binary log on the slave, but you don&#8217;t want the data on the slave, another trick is to change the slave DB objects to the BLACKHOLE storage engine.  You can no benefit in all the operations being performed, you simply win on the overall storage in the DB on the slave.<br />
NOTE of course, you can not actually use this slave for failover, or for reads, however you could never do that when ignoring replication anyway.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Todd				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/quick-reminder-avoid-using-binlog-do-db/comment-page-1#comment-11145</link>
		<dc:creator><![CDATA[Todd]]></dc:creator>
		<pubDate>Tue, 02 Mar 2010 20:25:56 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2077#comment-11145</guid>
					<description><![CDATA[Except, of course, if you are using row-based binary logging, in which case the filter is on the database of the actual affected table(s).  It&#039;s a fun difference in behavior that can make MIXED mode problematic.]]></description>
		<content:encoded><![CDATA[<p>Except, of course, if you are using row-based binary logging, in which case the filter is on the database of the actual affected table(s).  It&#8217;s a fun difference in behavior that can make MIXED mode problematic.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Sheeri				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/quick-reminder-avoid-using-binlog-do-db/comment-page-1#comment-11144</link>
		<dc:creator><![CDATA[Sheeri]]></dc:creator>
		<pubDate>Tue, 02 Mar 2010 19:41:20 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=2077#comment-11144</guid>
					<description><![CDATA[Shlomi -- you&#039;re exactly right, except I wouldn&#039;t say &quot;never use binlog-do-db&quot;.    I would say &quot;learn what binlog-do-db does, and know that you lose the ability to restore from backups when you do that, etc&quot;.

(I do agree that the general case is &quot;binlog everything, because it&#039;s not just for replication, it&#039;s also for incremental backups, and can be useful when trying to figure out if a change was already made&quot;.  I just hate saying &quot;always use foo&quot; and &quot;never use bar&quot;....)


If people really want to replicate only statements that affect the foo database, they can use:

replicate_wild_do_table=foo.%


If they want to ignore more than one database, the correct syntax is:
replicate_wild_do_table=foo.%
replicate_wild_do_table=bar.%]]></description>
		<content:encoded><![CDATA[<p>Shlomi &#8212; you&#8217;re exactly right, except I wouldn&#8217;t say &#8220;never use binlog-do-db&#8221;.    I would say &#8220;learn what binlog-do-db does, and know that you lose the ability to restore from backups when you do that, etc&#8221;.</p>
<p>(I do agree that the general case is &#8220;binlog everything, because it&#8217;s not just for replication, it&#8217;s also for incremental backups, and can be useful when trying to figure out if a change was already made&#8221;.  I just hate saying &#8220;always use foo&#8221; and &#8220;never use bar&#8221;&#8230;.)</p>
<p>If people really want to replicate only statements that affect the foo database, they can use:</p>
<p>replicate_wild_do_table=foo.%</p>
<p>If they want to ignore more than one database, the correct syntax is:<br />
replicate_wild_do_table=foo.%<br />
replicate_wild_do_table=bar.%</p>
]]></content:encoded>
						</item>
			</channel>
</rss>
