<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	
	>
<channel>
	<title>
	Comments on: REPLACE INTO: think twice	</title>
	<atom:link href="https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice/feed" rel="self" type="application/rss+xml" />
	<link>https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice</link>
	<description>Blog by Shlomi Noach</description>
	<lastBuildDate>Tue, 01 May 2018 05:39:00 +0000</lastBuildDate>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.3.3</generator>
			<item>
				<title>
				By: Shlomi Noach				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice/comment-page-1#comment-437007</link>
		<dc:creator><![CDATA[Shlomi Noach]]></dc:creator>
		<pubDate>Tue, 01 May 2018 05:39:00 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=397#comment-437007</guid>
					<description><![CDATA[@SacTiw correct.]]></description>
		<content:encoded><![CDATA[<p>@SacTiw correct.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: SacTiw				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice/comment-page-1#comment-436559</link>
		<dc:creator><![CDATA[SacTiw]]></dc:creator>
		<pubDate>Mon, 30 Apr 2018 07:21:00 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=397#comment-436559</guid>
					<description><![CDATA[Quick question:
REPLACE INTO will be an atomic operation right? That is, for a row &quot;delete and insert&quot; will executed as a part of a transaction, right?]]></description>
		<content:encoded><![CDATA[<p>Quick question:<br />
REPLACE INTO will be an atomic operation right? That is, for a row &#8220;delete and insert&#8221; will executed as a part of a transaction, right?</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: That Oz Guy				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice/comment-page-1#comment-425505</link>
		<dc:creator><![CDATA[That Oz Guy]]></dc:creator>
		<pubDate>Wed, 14 Mar 2018 04:59:00 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=397#comment-425505</guid>
					<description><![CDATA[I&#039;ve just hit this too - I was getting over 100ms to execute the REPLACE INTO and using a stored procedure with the obvious &quot;SELECT IFNULL(pk) INTO... IF found THEN UPDATE ... ELSE INSERT ...&quot; was more than 10x faster. If you do use it and speed matters, measure it.]]></description>
		<content:encoded><![CDATA[<p>I&#8217;ve just hit this too &#8211; I was getting over 100ms to execute the REPLACE INTO and using a stored procedure with the obvious &#8220;SELECT IFNULL(pk) INTO&#8230; IF found THEN UPDATE &#8230; ELSE INSERT &#8230;&#8221; was more than 10x faster. If you do use it and speed matters, measure it.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: parminder Singh				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice/comment-page-1#comment-222758</link>
		<dc:creator><![CDATA[parminder Singh]]></dc:creator>
		<pubDate>Wed, 06 Nov 2013 23:24:36 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=397#comment-222758</guid>
					<description><![CDATA[REPLACE INTO is very good i often use this  But the problem is that if you have used foreign key constraints On delete cascade than this will be big headache for you , actually i have already faced this problem , That&#039;s why i sharing with you guys, coz may be it will be helpful for some body]]></description>
		<content:encoded><![CDATA[<p>REPLACE INTO is very good i often use this  But the problem is that if you have used foreign key constraints On delete cascade than this will be big headache for you , actually i have already faced this problem , That&#8217;s why i sharing with you guys, coz may be it will be helpful for some body</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: replace into &#124; Brinsmead Data Services				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice/comment-page-1#comment-82885</link>
		<dc:creator><![CDATA[replace into &#124; Brinsmead Data Services]]></dc:creator>
		<pubDate>Tue, 10 Apr 2012 00:03:46 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=397#comment-82885</guid>
					<description><![CDATA[[...] had been using mysql&#8217;s replace into syntax until I read this article https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice which makes a lot of [...]]]></description>
		<content:encoded><![CDATA[<p>[&#8230;] had been using mysql&#8217;s replace into syntax until I read this article <a href="https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice" rel="nofollow ugc">https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice</a> which makes a lot of [&#8230;]</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Sunset				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice/comment-page-1#comment-70190</link>
		<dc:creator><![CDATA[Sunset]]></dc:creator>
		<pubDate>Fri, 17 Feb 2012 08:23:15 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=397#comment-70190</guid>
					<description><![CDATA[Thanks guys, yesterday I spent 3 hours trying to get the best method of INSERT INTO/REPLACE INTO working for my site tweet &quot;approver&quot; where we scan for tweets and manually approve the good ones that can be displayed on our site.

I eventually settled for a bit of a mix of on duplicate col=VALUES(col) and col2=col2 as before we save the tweets we do some preg_replace stuff on it so no need to update it with the raw tweet again:

$sql = &quot;INSERT INTO tweets (id, tweet, date, who, approved) 
			        VALUES (\&quot;$twitter_tweet_id\&quot;, \&quot;{$this-&gt;CI-&gt;db-&gt;escape($tweet_val-&gt;title)}\&quot;, \&quot;{$this-&gt;CI-&gt;db-&gt;escape($tweet_val-&gt;pubDate)}\&quot;, \&quot;{$this-&gt;CI-&gt;db-&gt;escape($tweet_val-&gt;author)}\&quot;, &#039;no&#039;) 
			        ON DUPLICATE KEY UPDATE id=VALUES(id), tweet=tweet, date=VALUES(date), who=who, approved=approved&quot;;

I vote for UPSERT, too though; would have been much easier.

Cheers,

Kevin]]></description>
		<content:encoded><![CDATA[<p>Thanks guys, yesterday I spent 3 hours trying to get the best method of INSERT INTO/REPLACE INTO working for my site tweet &#8220;approver&#8221; where we scan for tweets and manually approve the good ones that can be displayed on our site.</p>
<p>I eventually settled for a bit of a mix of on duplicate col=VALUES(col) and col2=col2 as before we save the tweets we do some preg_replace stuff on it so no need to update it with the raw tweet again:</p>
<p>$sql = &#8220;INSERT INTO tweets (id, tweet, date, who, approved)<br />
			        VALUES (\&#8221;$twitter_tweet_id\&#8221;, \&#8221;{$this->CI->db->escape($tweet_val->title)}\&#8221;, \&#8221;{$this->CI->db->escape($tweet_val->pubDate)}\&#8221;, \&#8221;{$this->CI->db->escape($tweet_val->author)}\&#8221;, &#8216;no&#8217;)<br />
			        ON DUPLICATE KEY UPDATE id=VALUES(id), tweet=tweet, date=VALUES(date), who=who, approved=approved&#8221;;</p>
<p>I vote for UPSERT, too though; would have been much easier.</p>
<p>Cheers,</p>
<p>Kevin</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: rsandwick3				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice/comment-page-1#comment-62082</link>
		<dc:creator><![CDATA[rsandwick3]]></dc:creator>
		<pubDate>Wed, 07 Dec 2011 21:22:40 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=397#comment-62082</guid>
					<description><![CDATA[One of the most useful features of ON DUPLICATE KEY UPDATE is that not all columns need to be specified in the UPDATE clause.

This allows adding new rows which either are fully qualified or use some or all column defaults while only modifying the desired subset of columns when the key is already present.

REPLACE INTO fails in this respect -- once the row is deleted, only the values in the new definition will be populated, so you&#039;d better have somehow managed to define everything you don&#039;t want unset/defaulted for existing rows, in which case you&#039;re basically reinserting the entire table anyway.

This could well be another source of the data loss @Tony happened upon.]]></description>
		<content:encoded><![CDATA[<p>One of the most useful features of ON DUPLICATE KEY UPDATE is that not all columns need to be specified in the UPDATE clause.</p>
<p>This allows adding new rows which either are fully qualified or use some or all column defaults while only modifying the desired subset of columns when the key is already present.</p>
<p>REPLACE INTO fails in this respect &#8212; once the row is deleted, only the values in the new definition will be populated, so you&#8217;d better have somehow managed to define everything you don&#8217;t want unset/defaulted for existing rows, in which case you&#8217;re basically reinserting the entire table anyway.</p>
<p>This could well be another source of the data loss @Tony happened upon.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice/comment-page-1#comment-57641</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Fri, 04 Nov 2011 18:03:09 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=397#comment-57641</guid>
					<description><![CDATA[@Tony,
Thanks for sharing this story. You are right about the overhead of foreign keys. This is to some extent due to the indexes on which the foreign keys rely, and, well, the deletion of child tables with &quot;random loss of data&quot;...]]></description>
		<content:encoded><![CDATA[<p>@Tony,<br />
Thanks for sharing this story. You are right about the overhead of foreign keys. This is to some extent due to the indexes on which the foreign keys rely, and, well, the deletion of child tables with &#8220;random loss of data&#8221;&#8230;</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Tony				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice/comment-page-1#comment-57626</link>
		<dc:creator><![CDATA[Tony]]></dc:creator>
		<pubDate>Fri, 04 Nov 2011 14:53:42 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=397#comment-57626</guid>
					<description><![CDATA[Newly onboard as the lead developer for my company, I have already run into this issue BIGTIME.

The previous developer(s) were quite fond of the &quot;REPLACE INTO&quot; syntax; the company&#039;s web app was littered with it. Many problems plagued the system, the most common was the &quot;random&quot; loss of data.

As it turned out, the database has been in use for many years; some tables holding more than 1M records, as well as keyed with composites. Inevitably, someone would complain to the mother company&#039;s I.T. dept about the app being slow. Mother company&#039;s I.T. would just simply restart the MySQL instance in order to get performance back up. This occurred many times per day.

Of course, the sluggishness was due to the fact that the db engine was rebuilding the indexes for large tables. Restarting the server simply resulted in nightmarish situations.

Long story short: a good db programmer SHOULD understand the semantics of &quot;REPLACE INTO&quot; and carefully consider whether it is necessary.

One thing that was not mentioned in this article was the additional overhead of foreign-key relationships and how those tables are impacted.]]></description>
		<content:encoded><![CDATA[<p>Newly onboard as the lead developer for my company, I have already run into this issue BIGTIME.</p>
<p>The previous developer(s) were quite fond of the &#8220;REPLACE INTO&#8221; syntax; the company&#8217;s web app was littered with it. Many problems plagued the system, the most common was the &#8220;random&#8221; loss of data.</p>
<p>As it turned out, the database has been in use for many years; some tables holding more than 1M records, as well as keyed with composites. Inevitably, someone would complain to the mother company&#8217;s I.T. dept about the app being slow. Mother company&#8217;s I.T. would just simply restart the MySQL instance in order to get performance back up. This occurred many times per day.</p>
<p>Of course, the sluggishness was due to the fact that the db engine was rebuilding the indexes for large tables. Restarting the server simply resulted in nightmarish situations.</p>
<p>Long story short: a good db programmer SHOULD understand the semantics of &#8220;REPLACE INTO&#8221; and carefully consider whether it is necessary.</p>
<p>One thing that was not mentioned in this article was the additional overhead of foreign-key relationships and how those tables are impacted.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Renowned Media				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/replace-into-think-twice/comment-page-1#comment-31911</link>
		<dc:creator><![CDATA[Renowned Media]]></dc:creator>
		<pubDate>Fri, 25 Feb 2011 18:08:37 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=397#comment-31911</guid>
					<description><![CDATA[I vote for MySQL implementing this UPSERT command... There are a lot of things in MySQL which don&#039;t follow the ANSI SQL standard!]]></description>
		<content:encoded><![CDATA[<p>I vote for MySQL implementing this UPSERT command&#8230; There are a lot of things in MySQL which don&#8217;t follow the ANSI SQL standard!</p>
]]></content:encoded>
						</item>
			</channel>
</rss>
