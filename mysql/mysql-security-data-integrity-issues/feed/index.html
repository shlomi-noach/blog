<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	
	>
<channel>
	<title>
	Comments on: MySQL security: data integrity issues	</title>
	<atom:link href="https://shlomi-noach.github.io/blog/mysql/mysql-security-data-integrity-issues/feed" rel="self" type="application/rss+xml" />
	<link>https://shlomi-noach.github.io/blog/mysql/mysql-security-data-integrity-issues</link>
	<description>Blog by Shlomi Noach</description>
	<lastBuildDate>Wed, 21 Jan 2009 20:20:37 +0000</lastBuildDate>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.3.3</generator>
			<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-security-data-integrity-issues/comment-page-1#comment-395</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Wed, 21 Jan 2009 20:20:37 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=472#comment-395</guid>
					<description><![CDATA[Hi Roland,

&quot;My reaction was mainly against your specific wording...&quot;
I accept.

&quot;at the end of the day, the isolation levels have got nothing to do with data integrity...&quot;
Consider: if I were to INSERT some data depending on current state (i.e. depending on SELECT resukt), then by reading uncommitted data I lose integrity. Maybe it&#039;s more of application integrity, not database integrity.

Shlomi]]></description>
		<content:encoded><![CDATA[<p>Hi Roland,</p>
<p>&#8220;My reaction was mainly against your specific wording&#8230;&#8221;<br />
I accept.</p>
<p>&#8220;at the end of the day, the isolation levels have got nothing to do with data integrity&#8230;&#8221;<br />
Consider: if I were to INSERT some data depending on current state (i.e. depending on SELECT resukt), then by reading uncommitted data I lose integrity. Maybe it&#8217;s more of application integrity, not database integrity.</p>
<p>Shlomi</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Roland Bouman				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-security-data-integrity-issues/comment-page-1#comment-394</link>
		<dc:creator><![CDATA[Roland Bouman]]></dc:creator>
		<pubDate>Wed, 21 Jan 2009 19:34:56 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=472#comment-394</guid>
					<description><![CDATA[Hi Shlomi, 

nice to hear your working on that tool! I&#039;ll be glad to check it out.

Now, my main point re. transaction isolation levels is not so much whether it is or is not standard. My reaction was mainly against your specific wording:

&quot;But MySQL, and through it, InnoDB, allow a strange thing&quot;

which to me seemed to imply it is specific to MySQL. It is not - standard SQL allows it.

More importantly though, at the end of the day, the isolation levels have got nothing to do with data integrity. Even though you can see inconsistent states if you really want to, you cannot commit one. Hence, it is not a data integrity issue - at least not from the POV of the database as a whole.

The relaxed isolation levels were never born as a feature. What happened is that people discovered it is pretty hard to implement full ACID and at the same time not kill performance (that said I don&#039;t think that it matters a lot for InnoDB as long as you do not use SERIALIZABLE). Relaxing isolation is simply a way to allow some things to be a lot faster, so the practical solution is to quantize levels of isolation. As long as no data integrity is violated at commit time, I cannot see the flaw in it.

kind regards,

Roland]]></description>
		<content:encoded><![CDATA[<p>Hi Shlomi, </p>
<p>nice to hear your working on that tool! I&#8217;ll be glad to check it out.</p>
<p>Now, my main point re. transaction isolation levels is not so much whether it is or is not standard. My reaction was mainly against your specific wording:</p>
<p>&#8220;But MySQL, and through it, InnoDB, allow a strange thing&#8221;</p>
<p>which to me seemed to imply it is specific to MySQL. It is not &#8211; standard SQL allows it.</p>
<p>More importantly though, at the end of the day, the isolation levels have got nothing to do with data integrity. Even though you can see inconsistent states if you really want to, you cannot commit one. Hence, it is not a data integrity issue &#8211; at least not from the POV of the database as a whole.</p>
<p>The relaxed isolation levels were never born as a feature. What happened is that people discovered it is pretty hard to implement full ACID and at the same time not kill performance (that said I don&#8217;t think that it matters a lot for InnoDB as long as you do not use SERIALIZABLE). Relaxing isolation is simply a way to allow some things to be a lot faster, so the practical solution is to quantize levels of isolation. As long as no data integrity is violated at commit time, I cannot see the flaw in it.</p>
<p>kind regards,</p>
<p>Roland</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-security-data-integrity-issues/comment-page-1#comment-393</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Wed, 21 Jan 2009 18:32:07 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=472#comment-393</guid>
					<description><![CDATA[@Mike,
&quot;you wouldn‚Äôt be able to import data as anyone other than root&quot;
1. Nothing would prevent you from importing data, you would just be denied disabling the foreign keys. Importing would be slower.
2. Any user with the SUPER privilige would have been able to do that, not only &#039;root&#039;.

Shlomi]]></description>
		<content:encoded><![CDATA[<p>@Mike,<br />
&#8220;you wouldn‚Äôt be able to import data as anyone other than root&#8221;<br />
1. Nothing would prevent you from importing data, you would just be denied disabling the foreign keys. Importing would be slower.<br />
2. Any user with the SUPER privilige would have been able to do that, not only &#8216;root&#8217;.</p>
<p>Shlomi</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-security-data-integrity-issues/comment-page-1#comment-392</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Wed, 21 Jan 2009 18:28:39 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=472#comment-392</guid>
					<description><![CDATA[@Roland,
As always, thanks for your comments,

#1
I&#039;ve also got a utility which relates to foreign keys, and which DELETEs or does a SET NULL upon violation. It&#039;s part of a small toolkit I will soon release.

#2
&quot;It‚Äôs not confined to MySQL or InnoDB - it‚Äôs defined in the standard.&quot;
That&#039;s interesting, I didn&#039;t know that. But it doesn&#039;t change anything. Many things in the standard are not implemented in MySQL, and vice versa.

&quot;start transaction statement ::= START TRANSACTION [transaction characteristics]&quot;
In MySQL it goes by SET TRANSACTION ...

While looking at it, I was surprised to encounter the following statements:
START TRANSACTION WITH CONSISTENT SNAPSHOT;
COMMIT AND CHAIN;
Wasn&#039;t aware of their existence, they were new to me.

Shlomi]]></description>
		<content:encoded><![CDATA[<p>@Roland,<br />
As always, thanks for your comments,</p>
<p>#1<br />
I&#8217;ve also got a utility which relates to foreign keys, and which DELETEs or does a SET NULL upon violation. It&#8217;s part of a small toolkit I will soon release.</p>
<p>#2<br />
&#8220;It‚Äôs not confined to MySQL or InnoDB &#8211; it‚Äôs defined in the standard.&#8221;<br />
That&#8217;s interesting, I didn&#8217;t know that. But it doesn&#8217;t change anything. Many things in the standard are not implemented in MySQL, and vice versa.</p>
<p>&#8220;start transaction statement ::= START TRANSACTION [transaction characteristics]&#8221;<br />
In MySQL it goes by SET TRANSACTION &#8230;</p>
<p>While looking at it, I was surprised to encounter the following statements:<br />
START TRANSACTION WITH CONSISTENT SNAPSHOT;<br />
COMMIT AND CHAIN;<br />
Wasn&#8217;t aware of their existence, they were new to me.</p>
<p>Shlomi</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Mike				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-security-data-integrity-issues/comment-page-1#comment-391</link>
		<dc:creator><![CDATA[Mike]]></dc:creator>
		<pubDate>Wed, 21 Jan 2009 18:16:41 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=472#comment-391</guid>
					<description><![CDATA[If you weren&#039;t allowed to disable foreign keys as a user you wouldn&#039;t be able to import data as anyone other than root.]]></description>
		<content:encoded><![CDATA[<p>If you weren&#8217;t allowed to disable foreign keys as a user you wouldn&#8217;t be able to import data as anyone other than root.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-security-data-integrity-issues/comment-page-1#comment-390</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Wed, 21 Jan 2009 17:52:01 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=472#comment-390</guid>
					<description><![CDATA[@Nils,

There are several bug reports for sql_mode, none that I know of for FOREIGN_KEY_CHECKS, and I&#039;m not sure how to approach the tx_isolation issue, as this is clearly a feature, not a bug :(

I&#039;ll try and make a good argument and file a bug on the FOREIGN_KEY_CHECKS issue.]]></description>
		<content:encoded><![CDATA[<p>@Nils,</p>
<p>There are several bug reports for sql_mode, none that I know of for FOREIGN_KEY_CHECKS, and I&#8217;m not sure how to approach the tx_isolation issue, as this is clearly a feature, not a bug üôÅ</p>
<p>I&#8217;ll try and make a good argument and file a bug on the FOREIGN_KEY_CHECKS issue.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Roland Bouman				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-security-data-integrity-issues/comment-page-1#comment-388</link>
		<dc:creator><![CDATA[Roland Bouman]]></dc:creator>
		<pubDate>Wed, 21 Jan 2009 14:57:17 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=472#comment-388</guid>
					<description><![CDATA[Hi Shlomi, nice post as always. And, some comments (as always too ;-)

#1
&quot;But I don‚Äôt think normal users should be allowed to set the FOREIGN_KEY_CHECKS variable. This should be restricted to users with the SUPER privilege.&quot; 

I think this is only partially a matter of privileges. IMO, the gravest problem with disabling foreign key checks is that re-enabling does not check for violations. The second biggest beef I have with it is that it is all-or-nothing. I would like to do it on a constraint level, or otherwise table level. IMO, those 2 are the real WTFs.

I would like for an Oracle-like ENABLE/DISABLE syntax on a constraint level. Then, the privilege system could be enhanced to allow or disallow the user doing ENABLE/DISABLE for particular constraints (the ones that the user is in charge of)

BTW - I have a utility that may be of help checking for violations:
http://forge.mysql.com/tools/tool.php?id=11

#2 &quot;it undermines the very foundation of using transactions.&quot;

I don&#039;t agree. Reading uncommitted data does not do anybody harm - that is nobody but the current transaction. And even then the worst thing that can happen is that the current transaction thinks it can commit some inconsistent data, which is subsequently refused by the server. Data integrity is thus never compromised. (by this I mean that no database constraint will ever be violated, the only thing that might happen is that some transactions may run into an error more often, but I can&#039;t feel that is a data integrity problem, just an application problem).

#3 &quot;But MySQL, and through it, InnoDB, allow a strange thing: the transaction isolation level can be modified on the run.&quot;

It&#039;s not confined to MySQL or InnoDB - it&#039;s defined in the standard.

start transaction statement¬†::= START TRANSACTION [transaction characteristics] 
transaction characteristics¬†::= transaction mode*
transaction mode¬†::= isolation level¬†&#124; transaction access mode¬†&#124; diagnostics size

(See iso 9075:2003, 16.8)]]></description>
		<content:encoded><![CDATA[<p>Hi Shlomi, nice post as always. And, some comments (as always too üòâ</p>
<p>#1<br />
&#8220;But I don‚Äôt think normal users should be allowed to set the FOREIGN_KEY_CHECKS variable. This should be restricted to users with the SUPER privilege.&#8221; </p>
<p>I think this is only partially a matter of privileges. IMO, the gravest problem with disabling foreign key checks is that re-enabling does not check for violations. The second biggest beef I have with it is that it is all-or-nothing. I would like to do it on a constraint level, or otherwise table level. IMO, those 2 are the real WTFs.</p>
<p>I would like for an Oracle-like ENABLE/DISABLE syntax on a constraint level. Then, the privilege system could be enhanced to allow or disallow the user doing ENABLE/DISABLE for particular constraints (the ones that the user is in charge of)</p>
<p>BTW &#8211; I have a utility that may be of help checking for violations:<br />
<a href="http://forge.mysql.com/tools/tool.php?id=11" rel="nofollow ugc">http://forge.mysql.com/tools/tool.php?id=11</a></p>
<p>#2 &#8220;it undermines the very foundation of using transactions.&#8221;</p>
<p>I don&#8217;t agree. Reading uncommitted data does not do anybody harm &#8211; that is nobody but the current transaction. And even then the worst thing that can happen is that the current transaction thinks it can commit some inconsistent data, which is subsequently refused by the server. Data integrity is thus never compromised. (by this I mean that no database constraint will ever be violated, the only thing that might happen is that some transactions may run into an error more often, but I can&#8217;t feel that is a data integrity problem, just an application problem).</p>
<p>#3 &#8220;But MySQL, and through it, InnoDB, allow a strange thing: the transaction isolation level can be modified on the run.&#8221;</p>
<p>It&#8217;s not confined to MySQL or InnoDB &#8211; it&#8217;s defined in the standard.</p>
<p>start transaction statement¬†::= START TRANSACTION [transaction characteristics]<br />
transaction characteristics¬†::= transaction mode*<br />
transaction mode¬†::= isolation level¬†| transaction access mode¬†| diagnostics size</p>
<p>(See iso 9075:2003, 16.8)</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Nils				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-security-data-integrity-issues/comment-page-1#comment-385</link>
		<dc:creator><![CDATA[Nils]]></dc:creator>
		<pubDate>Wed, 21 Jan 2009 14:20:04 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=472#comment-385</guid>
					<description><![CDATA[Are there official bug reports for that? I guess they must have been around for a long time.]]></description>
		<content:encoded><![CDATA[<p>Are there official bug reports for that? I guess they must have been around for a long time.</p>
]]></content:encoded>
						</item>
			</channel>
</rss>
