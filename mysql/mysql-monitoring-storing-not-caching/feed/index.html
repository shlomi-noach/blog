<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	
	>
<channel>
	<title>
	Comments on: MySQL monitoring: storing, not caching	</title>
	<atom:link href="https://shlomi-noach.github.io/blog/mysql/mysql-monitoring-storing-not-caching/feed" rel="self" type="application/rss+xml" />
	<link>https://shlomi-noach.github.io/blog/mysql/mysql-monitoring-storing-not-caching</link>
	<description>Blog by Shlomi Noach</description>
	<lastBuildDate>Thu, 08 Mar 2012 20:55:03 +0000</lastBuildDate>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.3.3</generator>
			<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-monitoring-storing-not-caching/comment-page-1#comment-74971</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Thu, 08 Mar 2012 20:55:03 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=4736#comment-74971</guid>
					<description><![CDATA[@Rick,
5 columns, *ONE* ALTER TABLE :)
And, yes, I&#039;m willing, since these tables are not that large. With a year&#039;s worth of data you get ~500MB worth of data. Not that much to refactor.

I urge you to, just for the fun of it, give mycheckpoint a try. I think you&#039;ll be surprised at the depth and detail one can fit within such a small footprint, in one python script.

I&#039;m not belittling other monitoring tools, of course. I can&#039;t compare mycheckpoint to cacti, they&#039;re on a completely different scale. I&#039;m just saying. Try it.]]></description>
		<content:encoded><![CDATA[<p>@Rick,<br />
5 columns, *ONE* ALTER TABLE ðŸ™‚<br />
And, yes, I&#8217;m willing, since these tables are not that large. With a year&#8217;s worth of data you get ~500MB worth of data. Not that much to refactor.</p>
<p>I urge you to, just for the fun of it, give mycheckpoint a try. I think you&#8217;ll be surprised at the depth and detail one can fit within such a small footprint, in one python script.</p>
<p>I&#8217;m not belittling other monitoring tools, of course. I can&#8217;t compare mycheckpoint to cacti, they&#8217;re on a completely different scale. I&#8217;m just saying. Try it.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Rick James				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-monitoring-storing-not-caching/comment-page-1#comment-74933</link>
		<dc:creator><![CDATA[Rick James]]></dc:creator>
		<pubDate>Thu, 08 Mar 2012 19:10:51 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=4736#comment-74933</guid>
					<description><![CDATA[300 columns today, 305 tomorrow when you upgrade MySQL.  Are you ready to generate the 5 ALTER TABLE ADD COLUMN clauses?

A couple of years ago, I looked at that and said yuck to that.  I looked at key-value stores, but that performs terribly at scale.  Instead, I stuffed the values into a JSON structure in a single column.  Then the scripts can either do a json_decode, or a fairly simple regexp to reach into the JSON.

So, I currently have a provide the expression, the host(s) desired, timeframe, etc, and PHP does all the grunt work.  It performs quite adequately.

I don&#039;t need a WHERE clause on the status/variables.

Since I deal with hundreds of servers, from 4.0 to 5.1, and Percona, this mechanism does not care about new names.  (Name changes like &quot;table_cache&quot; vs &quot;table_open_cache&quot; are a nuisance.)]]></description>
		<content:encoded><![CDATA[<p>300 columns today, 305 tomorrow when you upgrade MySQL.  Are you ready to generate the 5 ALTER TABLE ADD COLUMN clauses?</p>
<p>A couple of years ago, I looked at that and said yuck to that.  I looked at key-value stores, but that performs terribly at scale.  Instead, I stuffed the values into a JSON structure in a single column.  Then the scripts can either do a json_decode, or a fairly simple regexp to reach into the JSON.</p>
<p>So, I currently have a provide the expression, the host(s) desired, timeframe, etc, and PHP does all the grunt work.  It performs quite adequately.</p>
<p>I don&#8217;t need a WHERE clause on the status/variables.</p>
<p>Since I deal with hundreds of servers, from 4.0 to 5.1, and Percona, this mechanism does not care about new names.  (Name changes like &#8220;table_cache&#8221; vs &#8220;table_open_cache&#8221; are a nuisance.)</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-monitoring-storing-not-caching/comment-page-1#comment-71164</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Wed, 22 Feb 2012 18:23:02 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=4736#comment-71164</guid>
					<description><![CDATA[Sheeri,
Will be happy if you do, and happier for any feedback.]]></description>
		<content:encoded><![CDATA[<p>Sheeri,<br />
Will be happy if you do, and happier for any feedback.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Sheeri Cabral				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-monitoring-storing-not-caching/comment-page-1#comment-71162</link>
		<dc:creator><![CDATA[Sheeri Cabral]]></dc:creator>
		<pubDate>Wed, 22 Feb 2012 17:25:32 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=4736#comment-71162</guid>
					<description><![CDATA[Shlomi - ah, that&#039;s good! One day I&#039;ll get around to implementing your tools in my environment (now that I HAVE one that I&#039;m in charge of at Mozilla! Consulting is great but it means you never really own anything and research isn&#039;t always easy to do)....for now it&#039;s back to basics for me, I&#039;m still figuring out which machines I&#039;m responsible for, and it&#039;s not a small amount!]]></description>
		<content:encoded><![CDATA[<p>Shlomi &#8211; ah, that&#8217;s good! One day I&#8217;ll get around to implementing your tools in my environment (now that I HAVE one that I&#8217;m in charge of at Mozilla! Consulting is great but it means you never really own anything and research isn&#8217;t always easy to do)&#8230;.for now it&#8217;s back to basics for me, I&#8217;m still figuring out which machines I&#8217;m responsible for, and it&#8217;s not a small amount!</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-monitoring-storing-not-caching/comment-page-1#comment-71152</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Wed, 22 Feb 2012 16:16:18 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=4736#comment-71152</guid>
					<description><![CDATA[@Sheeri,
not every single variable is monitored. Some are known to be skipped, such as ssl_* and other textual columns.
On a Percona Server 5.1 installation I have 480 monitored data columns, including some custom counters added by the user.]]></description>
		<content:encoded><![CDATA[<p>@Sheeri,<br />
not every single variable is monitored. Some are known to be skipped, such as ssl_* and other textual columns.<br />
On a Percona Server 5.1 installation I have 480 monitored data columns, including some custom counters added by the user.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Jonathan Levin				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-monitoring-storing-not-caching/comment-page-1#comment-71151</link>
		<dc:creator><![CDATA[Jonathan Levin]]></dc:creator>
		<pubDate>Wed, 22 Feb 2012 15:08:32 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=4736#comment-71151</guid>
					<description><![CDATA[I use mycheckpoint and its brilliant.
I set it up to send me emails with reports about the servers I monitor instead of me logging into trending tools (I&#039;m lazy that way).

I have already been using it with the user_statistics patch to see trends in some of my top tables. 
I guess I could also monitor mycheckpoint data itself to get more info from it, should I choose to.]]></description>
		<content:encoded><![CDATA[<p>I use mycheckpoint and its brilliant.<br />
I set it up to send me emails with reports about the servers I monitor instead of me logging into trending tools (I&#8217;m lazy that way).</p>
<p>I have already been using it with the user_statistics patch to see trends in some of my top tables.<br />
I guess I could also monitor mycheckpoint data itself to get more info from it, should I choose to.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Sheeri Cabral				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-monitoring-storing-not-caching/comment-page-1#comment-71150</link>
		<dc:creator><![CDATA[Sheeri Cabral]]></dc:creator>
		<pubDate>Wed, 22 Feb 2012 15:02:40 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=4736#comment-71150</guid>
					<description><![CDATA[It sounds like mycheckpoint has a very wide table - one column for each status variable? There are over 300 of those....and another 300+ system variables.

I think it makes sense that 3 tools that do different things approach the problem in 3 different ways: 

- The Percona Nagios plugin set is not concerned with caching, because it does not reuse any of the information it retrieves, it only uses the information once.

- The PalominoDB Nagios plugin caches because the same plugin can be used over and over to check different calculations of variables, and is designed so that the check could be run efficiently within a check interval. Ironically it was designed this way because of the benefits realized from the MySQL Cacti Templates.

- mycheckpoint stores because the data is used for graphing, but can also be used for alerting. In a way this is like cacti itself - it stores the data for graphing, and can also be used for alerting.

I made my post because I was worried folks would think &quot;caching for monitoring is bad&quot; - Baron specifically said that the Percona plugins are run infrequently, but I know there are many folks out there that would quickly turn his post into a &quot;caching for monitoring is bad&quot; myth.]]></description>
		<content:encoded><![CDATA[<p>It sounds like mycheckpoint has a very wide table &#8211; one column for each status variable? There are over 300 of those&#8230;.and another 300+ system variables.</p>
<p>I think it makes sense that 3 tools that do different things approach the problem in 3 different ways: </p>
<p>&#8211; The Percona Nagios plugin set is not concerned with caching, because it does not reuse any of the information it retrieves, it only uses the information once.</p>
<p>&#8211; The PalominoDB Nagios plugin caches because the same plugin can be used over and over to check different calculations of variables, and is designed so that the check could be run efficiently within a check interval. Ironically it was designed this way because of the benefits realized from the MySQL Cacti Templates.</p>
<p>&#8211; mycheckpoint stores because the data is used for graphing, but can also be used for alerting. In a way this is like cacti itself &#8211; it stores the data for graphing, and can also be used for alerting.</p>
<p>I made my post because I was worried folks would think &#8220;caching for monitoring is bad&#8221; &#8211; Baron specifically said that the Percona plugins are run infrequently, but I know there are many folks out there that would quickly turn his post into a &#8220;caching for monitoring is bad&#8221; myth.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Peter Laursen				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/mysql-monitoring-storing-not-caching/comment-page-1#comment-71120</link>
		<dc:creator><![CDATA[Peter Laursen]]></dc:creator>
		<pubDate>Wed, 22 Feb 2012 09:13:27 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=4736#comment-71120</guid>
					<description><![CDATA[And in this respect MONyog and mycheckpoint seem to use same concept as regards storing versus caching.  However the schemas are different and the &#039;division of labor&#039; between SQL and javascript is also not exactly the same. Refer: http://www.webyog.com/blog/2009/07/29/monyog-database-schema-explained/ .. (slightly abbreviated)

1) Everytime MONyog sends a statement like SHOW VARIABLES/STATUS of some kind (or fetching a OS metric from Linux /proc folder) one row is INSERTED into [timestamp_master] table with information about current time and the metrics retrieved for each such statement will be INSERTED into [snapshot_master]. The [snapshot_master] table contains the metrics details. 

2) And actually we do not always INSERT into [snapshot_master]. Only if the particular metric was changed since last time something was INSERTED for that metric we will INSERT again. 

3) Finally note that [snapshot_master] does not have the names of the metrics. It is not possible to know in advance what metrics the server will return as it depends on server details (version and configuration). And actually a server may be upgraded.]]></description>
		<content:encoded><![CDATA[<p>And in this respect MONyog and mycheckpoint seem to use same concept as regards storing versus caching.  However the schemas are different and the &#8216;division of labor&#8217; between SQL and javascript is also not exactly the same. Refer: <a href="http://www.webyog.com/blog/2009/07/29/monyog-database-schema-explained/" rel="nofollow ugc">http://www.webyog.com/blog/2009/07/29/monyog-database-schema-explained/</a> .. (slightly abbreviated)</p>
<p>1) Everytime MONyog sends a statement like SHOW VARIABLES/STATUS of some kind (or fetching a OS metric from Linux /proc folder) one row is INSERTED into [timestamp_master] table with information about current time and the metrics retrieved for each such statement will be INSERTED into [snapshot_master]. The [snapshot_master] table contains the metrics details. </p>
<p>2) And actually we do not always INSERT into [snapshot_master]. Only if the particular metric was changed since last time something was INSERTED for that metric we will INSERT again. </p>
<p>3) Finally note that [snapshot_master] does not have the names of the metrics. It is not possible to know in advance what metrics the server will return as it depends on server details (version and configuration). And actually a server may be upgraded.</p>
]]></content:encoded>
						</item>
			</channel>
</rss>
