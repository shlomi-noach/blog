<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	
	>
<channel>
	<title>
	Comments on: Thoughts on MySQL 5.6 new replication features	</title>
	<atom:link href="https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features/feed" rel="self" type="application/rss+xml" />
	<link>https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features</link>
	<description>Blog by Shlomi Noach</description>
	<lastBuildDate>Wed, 10 Jul 2013 12:07:33 +0000</lastBuildDate>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.3.3</generator>
			<item>
				<title>
				By: Avi Vainshtein				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features/comment-page-1#comment-214404</link>
		<dc:creator><![CDATA[Avi Vainshtein]]></dc:creator>
		<pubDate>Wed, 10 Jul 2013 12:07:33 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=5651#comment-214404</guid>
					<description><![CDATA[Thank you, Shlomi, for referring me to dba.stackexchange.com: i&#039;ve got an answer from there, which is :
- stop slave; 
- CHANGE MASTER TO MASTER_DELAY = 0, RELAY_LOG_FILE = &#039;xxxxx-relay-bin.NNNNNN&#039;, RELAY_LOG_POS = YYYYYYYY ; 
(where the RELAY_LOG_FILE and RELAY_LOG_POS values are taken from &#039;show slave status;&#039; output) 
- start slave;

I&#039;ve tried that and it worked fine.

As per your suggestion to try relay-log.info file: couldn&#039;t do that because of &#039;relay_log_info_repository=TABLE&#039;.]]></description>
		<content:encoded><![CDATA[<p>Thank you, Shlomi, for referring me to dba.stackexchange.com: i&#8217;ve got an answer from there, which is :<br />
&#8211; stop slave;<br />
&#8211; CHANGE MASTER TO MASTER_DELAY = 0, RELAY_LOG_FILE = &#8216;xxxxx-relay-bin.NNNNNN&#8217;, RELAY_LOG_POS = YYYYYYYY ;<br />
(where the RELAY_LOG_FILE and RELAY_LOG_POS values are taken from &#8216;show slave status;&#8217; output)<br />
&#8211; start slave;</p>
<p>I&#8217;ve tried that and it worked fine.</p>
<p>As per your suggestion to try relay-log.info file: couldn&#8217;t do that because of &#8216;relay_log_info_repository=TABLE&#8217;.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features/comment-page-1#comment-214372</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Tue, 09 Jul 2013 12:31:33 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=5651#comment-214372</guid>
					<description><![CDATA[premature submit. Try to rewrite the number in said file (to 0?) while replication is STOPped. I&#039;m curious to learn the answer.

Also try asking on dba.stackexchange.com]]></description>
		<content:encoded><![CDATA[<p>premature submit. Try to rewrite the number in said file (to 0?) while replication is STOPped. I&#8217;m curious to learn the answer.</p>
<p>Also try asking on dba.stackexchange.com</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features/comment-page-1#comment-214371</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Tue, 09 Jul 2013 12:29:53 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=5651#comment-214371</guid>
					<description><![CDATA[The existing relay logs are deleted? Funny/sad this should be the behavior; I haven&#039;t done so myself, so you&#039;re the expert on this.

But do try following on the last paragraph in said documentation:

&quot; The relay-log.info file now contains the delay value, so the file format has changed. See Section 16.2.2.2, “Slave Status Logs”. In particular, the first line of the file now indicates how many lines are in the file. If you downgrade a slave server to a version older than MySQL 5.6, the older server will not read the file correctly. To address this, modify the file in a text editor to delete the initial line containing the number of lines. &quot;]]></description>
		<content:encoded><![CDATA[<p>The existing relay logs are deleted? Funny/sad this should be the behavior; I haven&#8217;t done so myself, so you&#8217;re the expert on this.</p>
<p>But do try following on the last paragraph in said documentation:</p>
<p>&#8221; The relay-log.info file now contains the delay value, so the file format has changed. See Section 16.2.2.2, “Slave Status Logs”. In particular, the first line of the file now indicates how many lines are in the file. If you downgrade a slave server to a version older than MySQL 5.6, the older server will not read the file correctly. To address this, modify the file in a text editor to delete the initial line containing the number of lines. &#8220;</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Avi Vainshtein				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features/comment-page-1#comment-214368</link>
		<dc:creator><![CDATA[Avi Vainshtein]]></dc:creator>
		<pubDate>Tue, 09 Jul 2013 12:02:15 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=5651#comment-214368</guid>
					<description><![CDATA[@Shlomi,

  This isn&#039;t correct - as per my test.
  After the commands:
stop slave;
CHANGE MASTER TO MASTER_DELAY=0;
start slave;
and while the Master is still not available - the IO slave is in &quot;Connecting&quot;State, all the existed before relay logs are deleted, and the SQL changes executed at the Master - were NOT applied at the Slave...]]></description>
		<content:encoded><![CDATA[<p>@Shlomi,</p>
<p>  This isn&#8217;t correct &#8211; as per my test.<br />
  After the commands:<br />
stop slave;<br />
CHANGE MASTER TO MASTER_DELAY=0;<br />
start slave;<br />
and while the Master is still not available &#8211; the IO slave is in &#8220;Connecting&#8221;State, all the existed before relay logs are deleted, and the SQL changes executed at the Master &#8211; were NOT applied at the Slave&#8230;</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features/comment-page-1#comment-214362</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Tue, 09 Jul 2013 10:10:45 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=5651#comment-214362</guid>
					<description><![CDATA[@Avi,

As per http://dev.mysql.com/doc/refman/5.6/en/replication-delayed.html,
just CHANGE MASTER TO MASTER_DELAY=0;
and the slave will just execute whatever it has got in the relay logs.]]></description>
		<content:encoded><![CDATA[<p>@Avi,</p>
<p>As per <a href="http://dev.mysql.com/doc/refman/5.6/en/replication-delayed.html" rel="nofollow ugc">http://dev.mysql.com/doc/refman/5.6/en/replication-delayed.html</a>,<br />
just CHANGE MASTER TO MASTER_DELAY=0;<br />
and the slave will just execute whatever it has got in the relay logs.</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Avi Vainshtein				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features/comment-page-1#comment-214359</link>
		<dc:creator><![CDATA[Avi Vainshtein]]></dc:creator>
		<pubDate>Tue, 09 Jul 2013 09:50:12 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=5651#comment-214359</guid>
					<description><![CDATA[Sorry for posting here, but i didn&#039;t find a separate topic for issues about Delayed Replication in 5.6 .

  Scenario: Master-Slave replication in 5.6 with a Delay (let&#039;s say 2 hours). The Master fails and isn&#039;t available at all.
  The question is : what is the proper way to cause the Slave to execute all the not-yet-applied SQL ?(i.e. to cause SQL_Remaining_Delay to become 0 , without waiting the 2 hours ?)]]></description>
		<content:encoded><![CDATA[<p>Sorry for posting here, but i didn&#8217;t find a separate topic for issues about Delayed Replication in 5.6 .</p>
<p>  Scenario: Master-Slave replication in 5.6 with a Delay (let&#8217;s say 2 hours). The Master fails and isn&#8217;t available at all.<br />
  The question is : what is the proper way to cause the Slave to execute all the not-yet-applied SQL ?(i.e. to cause SQL_Remaining_Delay to become 0 , without waiting the 2 hours ?)</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Further experiments with MySQL 5.6.7-RC: submit your bugs &#124; code.openark.org				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features/comment-page-1#comment-125629</link>
		<dc:creator><![CDATA[Further experiments with MySQL 5.6.7-RC: submit your bugs &#124; code.openark.org]]></dc:creator>
		<pubDate>Mon, 22 Oct 2012 05:52:46 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=5651#comment-125629</guid>
					<description><![CDATA[[...] Thoughts on MySQL 5.6 new replication features [...]]]></description>
		<content:encoded><![CDATA[<p>[&#8230;] Thoughts on MySQL 5.6 new replication features [&#8230;]</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: Gerry				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features/comment-page-1#comment-124838</link>
		<dc:creator><![CDATA[Gerry]]></dc:creator>
		<pubDate>Fri, 19 Oct 2012 17:50:16 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=5651#comment-124838</guid>
					<description><![CDATA[Could your bug be related to the one I filed a few days ago? See http://bugs.mysql.com/bug.php?id=67246]]></description>
		<content:encoded><![CDATA[<p>Could your bug be related to the one I filed a few days ago? See <a href="http://bugs.mysql.com/bug.php?id=67246" rel="nofollow ugc">http://bugs.mysql.com/bug.php?id=67246</a></p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: shlomi				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features/comment-page-1#comment-124362</link>
		<dc:creator><![CDATA[shlomi]]></dc:creator>
		<pubDate>Thu, 18 Oct 2012 11:15:01 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=5651#comment-124362</guid>
					<description><![CDATA[@XL,

Thank you for elaborating. 5.6 presents undo log on its own tablespace. Is this a development change that can allow multiple tablespaces, then?]]></description>
		<content:encoded><![CDATA[<p>@XL,</p>
<p>Thank you for elaborating. 5.6 presents undo log on its own tablespace. Is this a development change that can allow multiple tablespaces, then?</p>
]]></content:encoded>
						</item>
						<item>
				<title>
				By: XL				</title>
				<link>https://shlomi-noach.github.io/blog/mysql/thoughts-on-mysql-5-6-new-replication-features/comment-page-1#comment-123657</link>
		<dc:creator><![CDATA[XL]]></dc:creator>
		<pubDate>Tue, 16 Oct 2012 08:33:04 +0000</pubDate>
		<guid isPermaLink="false">https://shlomi-noach.github.io/blog/?p=5651#comment-123657</guid>
					<description><![CDATA[Unfortunately there is no way to separate InnoDB &quot;system&quot; and &quot;user&quot; tables in a way that allows you to drop table spaces for user tables, but not for system tables. The reason is the InnoDB data dictionary and  especially how InnoDB is panicking once it finds something that looks like data dictionary corruption.

The data dictionary is located in the system table space (if there are multiple ibdata files, it might even be spread about those). 

Now if you remove an ibd file without touching the DD, then InnoDB will sometimes just refuse to do anything (including deleting the table from the DD) with &quot;table does not exist&quot; error. If you happen to delete the ibd file for a single partition of a partitioned table, then InnoDB might even crash.

OTOH you could just delete the shared table space(s) (and thus also the DD) - then InnoDB will forget anything it ever knew about any InnoDB table. Any data in ibd files will be lost (not quite, it is possible to recover such data, but not automatically)

OK. Nothing of this is new.

Now what is bad with the new InnoDB system tables in 5.6 is that the server cannot recover from losing them. OTOH InnoDB can perfectly well recover from losing the DD - it will just create a new, empty one. And exactly the same it should do for the statistics and slave status tables. OK, this is a bit harder because those tables can use file_per_table. And they do have frm files. Maybe this was wrong in the first place. I don&#039;t see why those tables could not be anonymous system tables just as the DD.]]></description>
		<content:encoded><![CDATA[<p>Unfortunately there is no way to separate InnoDB &#8220;system&#8221; and &#8220;user&#8221; tables in a way that allows you to drop table spaces for user tables, but not for system tables. The reason is the InnoDB data dictionary and  especially how InnoDB is panicking once it finds something that looks like data dictionary corruption.</p>
<p>The data dictionary is located in the system table space (if there are multiple ibdata files, it might even be spread about those). </p>
<p>Now if you remove an ibd file without touching the DD, then InnoDB will sometimes just refuse to do anything (including deleting the table from the DD) with &#8220;table does not exist&#8221; error. If you happen to delete the ibd file for a single partition of a partitioned table, then InnoDB might even crash.</p>
<p>OTOH you could just delete the shared table space(s) (and thus also the DD) &#8211; then InnoDB will forget anything it ever knew about any InnoDB table. Any data in ibd files will be lost (not quite, it is possible to recover such data, but not automatically)</p>
<p>OK. Nothing of this is new.</p>
<p>Now what is bad with the new InnoDB system tables in 5.6 is that the server cannot recover from losing them. OTOH InnoDB can perfectly well recover from losing the DD &#8211; it will just create a new, empty one. And exactly the same it should do for the statistics and slave status tables. OK, this is a bit harder because those tables can use file_per_table. And they do have frm files. Maybe this was wrong in the first place. I don&#8217;t see why those tables could not be anonymous system tables just as the DD.</p>
]]></content:encoded>
						</item>
			</channel>
</rss>
