<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	<title>code.openark.org – Page 26 – Blog by Shlomi Noach</title>
<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//s.w.org">


<link rel="stylesheet" id="wp-block-library-css" href="https://shlomi-noach.github.io/blog/wp-includes/css/dist/block-library/style.min.css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wp-polls-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-css.css" media="all">
<style id="wp-polls-inline-css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="openark-primer-style-css" href="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/style.css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/css/jetpack.css" media="all">
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script>




<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel="dns-prefetch" href="//v0.wordpress.com">


<meta property="og:type" content="website">
<meta property="og:title" content="code.openark.org">
<meta property="og:description" content="Blog by Shlomi Noach">
<meta property="og:url" content="https://shlomi-noach.github.io/blog/">
<meta property="og:site_name" content="code.openark.org">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">


<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(242,101,34,.88);}</style></head>

<body class="home blog paged paged-26 hfeed no-sidebar">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
							<h1 class="site-title"><a href="https://shlomi-noach.github.io/blog/" rel="home">code.openark.org</a></h1>
								<p class="site-description">Blog by Shlomi Noach</p>
			
			<nav id="site-navigation" class="main-navigation">
				<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">primary-menu</button>
				<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-8109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8109"><a href="https://shlomi-noach.github.io/blog/archives">archives</a></li>
<li id="menu-item-8050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8050"><a href="https://shlomi-noach.github.io/blog/presentations">presentations</a></li>
<li id="menu-item-8055" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8055"><a href="https://shlomi-noach.github.io/blog/about">about</a></li>
<li id="menu-item-8071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8071"><a href="https://github.com/shlomi-noach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li>
<li id="menu-item-8074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8074"><a href="https://www.linkedin.com/in/shlominoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li>
<li id="menu-item-8072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8072"><a href="https://twitter.com/ShlomiNoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></li>
<li id="menu-item-8073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8073"><a href="https://shlomi-noach.github.io/blog/feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-12.832 20c-1.197 0-2.168-.969-2.168-2.165s.971-2.165 2.168-2.165 2.167.969 2.167 2.165-.97 2.165-2.167 2.165zm5.18 0c-.041-4.029-3.314-7.298-7.348-7.339v-3.207c5.814.041 10.518 4.739 10.561 10.546h-3.213zm5.441 0c-.021-7.063-5.736-12.761-12.789-12.792v-3.208c8.83.031 15.98 7.179 16 16h-3.211z"></path></svg></a></li>
</ul></div>			</nav>
		</div>
	</header>

	<main id="primary" class="site-main">

		
<article id="post-3506" class="post-3506 post type-post status-publish format-standard hentry category-mysql tag-mysqlconf">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/impressions-from-mysql-conf-2011-part-ii" rel="bookmark">Impressions from MySQL conf 2011, part II</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/mysqlconf" rel="tag">mysqlconf</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/impressions-from-mysql-conf-2011-part-ii" rel="bookmark"><time class="entry-date published updated" datetime="2011-04-17T14:02:35+02:00">April 17, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>This post continues my impressions from some of the talks I’ve been to.</p>
<h4>Wednesday</h4>
<ul>
<li><a href="http://en.oreilly.com/mysql2011/public/schedule/detail/19732">Replication for Availability & Durability with MySQL and Amazon RDS</a> / <em>Grant McAlister (Amazon.com)</em></li>
</ul>
<p>Grant McAlister described the Amazon RDS offer, which provides with a pre-installed MySQL servers, and supports auto management of replication and high availability. He desribed asynchronous vs. synchronous replication, logical (i.e log shipping & replaying) vs. physical replication.</p>
<p>Amazon implement physical replication by shipping data pages to a secondary, standby server, located at a different availability zone. A transaction does not complete before pages are shipped to, and acknowledged by standby machine. The standby machine writes data pages in parallel. This is similar in concept to DRBD. RDS uses InnoDB, which promises data integrity in case of power/network failure.</p>
<p>The fail over process, in case active master has crashed, involves blocking access to the active master, starting MySQL on standby master (promoted to be active), while changing elastic IP for master to point to promoted master. McAlister said this process takes a few minutes. Live demo resulted at about <strong>4</strong> minutes. <a href="https://shlomi-noach.github.io/blog/mysql/impressions-from-mysql-conf-2011-part-ii#more-3506" class="more-link">Continue reading »<span class="screen-reader-text"> “Impressions from MySQL conf 2011, part II”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/impressions-from-mysql-conf-2011-part-ii#respond">Leave a Comment<span class="screen-reader-text"> on Impressions from MySQL conf 2011, part II</span></a></span>	</footer>
</article>

<article id="post-3485" class="post-3485 post type-post status-publish format-standard hentry category-mysql tag-mysqlconf">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/impressions-from-mysql-conf-2011-part-i" rel="bookmark">Impressions from MySQL conf 2011, Part I</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/mysqlconf" rel="tag">mysqlconf</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/impressions-from-mysql-conf-2011-part-i" rel="bookmark"><time class="entry-date published updated" datetime="2011-04-15T04:10:31+02:00">April 15, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Having the conference behind now, I’m reviewing some of my impressions and of sessions I attended.</p>
<h4>The people</h4>
<p>To begin with, this conference was a big success for me, in many respects. The sessions were great (more on that later), but of course, meeting with new people and with familiar people, was the more important part.</p>
<p>I live in Israel, which makes travel to the US very long and expensive. Apparently not many MySQL community members in my neighborhood, so I don’t ever get to meet the faces. The conference makes that possible. I did not participate in all community events, as I had scheduled calls with little girls who miss their father. And I was very much under jet lag. And I have more excuses on demand.</p>
<p>But I did get to meet known faces; people I only knew by name; unfamiliar people who were familiar with my work (fun!); and otherwise just (ex-)strangers.</p>
<h4>The sessions</h4>
<p>There was a variety of sessions to choose from. Many times, I had to pick one out of two or three sessions I was interested in, running at the same time. Not all sessions appeal to one in the same way, but looking back, I find there were a lot of GOOD sessions I attended. I mostly like sessions that are very technical; preferably drilling into details of algorithms & implementation. <a href="https://shlomi-noach.github.io/blog/mysql/impressions-from-mysql-conf-2011-part-i#more-3485" class="more-link">Continue reading »<span class="screen-reader-text"> “Impressions from MySQL conf 2011, Part I”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/impressions-from-mysql-conf-2011-part-i#comments">5 Comments<span class="screen-reader-text"> on Impressions from MySQL conf 2011, Part I</span></a></span>	</footer>
</article>

<article id="post-3480" class="post-3480 post type-post status-publish format-standard hentry category-mysql tag-mysqlconf tag-open-source tag-openark-kit">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/slides-for-openark-kit-mysql-utilities-for-everyday-use" rel="bookmark">Slides for “openark-kit: MySQL utilities for everyday use”</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/mysqlconf" rel="tag">mysqlconf</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/openark-kit" rel="tag">openark kit</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/slides-for-openark-kit-mysql-utilities-for-everyday-use" rel="bookmark"><time class="entry-date published updated" datetime="2011-04-14T00:16:20+02:00">April 14, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Today I have delivered my talk, <a href="http://en.oreilly.com/mysql2011/public/schedule/detail/17155">openark-kit: MySQL utilities for everyday use</a>, at the <em>O’REILLY  MySQL Conference 2011</em>.</p>
<p>The slides are uploaded to the O’Reilly site, and I’m attaching them here as well. Feel free to download the PDF: <a href="https://shlomi-noach.github.io/blog/wp-content/uploads/2011/04/openark-kit-mysqlconf11.pdf">openark-kit-mysqlconf11.pdf</a></p>
<p>I wish to thank all who attended my talk!</p>
<p> </p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/slides-for-openark-kit-mysql-utilities-for-everyday-use#comments">3 Comments<span class="screen-reader-text"> on Slides for “openark-kit: MySQL utilities for everyday use”</span></a></span>	</footer>
</article>

<article id="post-3421" class="post-3421 post type-post status-publish format-standard hentry category-mysql tag-analysis tag-information_schema tag-openark-kit">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/checking-for-auto_increment-capacity-with-single-query" rel="bookmark">Checking for AUTO_INCREMENT capacity with single query</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/analysis" rel="tag">Analysis</a><a href="https://shlomi-noach.github.io/blog/tag/information_schema" rel="tag">INFORMATION_SCHEMA</a><a href="https://shlomi-noach.github.io/blog/tag/openark-kit" rel="tag">openark kit</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/checking-for-auto_increment-capacity-with-single-query" rel="bookmark"><time class="entry-date published" datetime="2011-04-05T07:36:56+02:00">April 5, 2011</time><time class="updated" datetime="2011-04-05T10:27:20+02:00">April 5, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p><em>Darn!</em> This means <a href="http://openarkkit.googlecode.com/svn/trunk/openarkkit/doc/html/oak-show-limits.html">oak-show-limits</a> becomes redundant. Am I not supposed to speak about it on my <a href="http://en.oreilly.com/mysql2011/public/schedule/detail/17155">coming presentation</a>? Bad timing!</p>
<p>You have <strong>AUTO_INCREMENT</strong> columns. How far are you pushing the limits? Are you going to run out of <strong>AUTO_INCREMENT</strong> values soon? Perhaps you wonder whether you should <strong>ALTER</strong> from <strong>INT</strong> to <strong>BIGINT</strong>?</p>
<p>The answer is all there in <strong>INFORMATION_SCHEMA</strong>. The <strong>TABLES</strong> table shows the current <strong>AUTO_INCREMENT</strong> value per table, and the <strong>COLUMNS</strong> table tells us all about a column’s data type.</p>
<p>It takes some ugly code to deduce the maximum value per column type, what with signed/unsigned and data type, but then its very simple. Here is the query: <a href="https://shlomi-noach.github.io/blog/mysql/checking-for-auto_increment-capacity-with-single-query#more-3421" class="more-link">Continue reading »<span class="screen-reader-text"> “Checking for AUTO_INCREMENT capacity with single query”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/checking-for-auto_increment-capacity-with-single-query#comments">11 Comments<span class="screen-reader-text"> on Checking for AUTO_INCREMENT capacity with single query</span></a></span>	</footer>
</article>

<article id="post-3412" class="post-3412 post type-post status-publish format-standard hentry category-mysql tag-configuration tag-replication tag-security">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/recovering-a-mysql-root-password-the-fourth-solution" rel="bookmark">Recovering a MySQL `root` password: the fourth solution</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/configuration" rel="tag">Configuration</a><a href="https://shlomi-noach.github.io/blog/tag/replication" rel="tag">Replication</a><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/recovering-a-mysql-root-password-the-fourth-solution" rel="bookmark"><time class="entry-date published updated" datetime="2011-03-22T09:47:46+02:00">March 22, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Have just read Darren Cassar’s <a title="Permanent Link to Recovering a MySQL `root` password – Three solutions" rel="bookmark" href="http://mysqlpreacher.com/wordpress/2011/03/recovering-a-mysql-root-password-three-solutions/">Recovering a MySQL `root` password – Three solutions</a>. There’s a fourth solution: using an <strong>init-file</strong>, which leads to just one restart of the database instead of two. It also avoids the security issue involved with using <strong>skip-grant-tables</strong>.</p>
<p>I’ve written all about it before on <a title="Permanent Link to Dangers of skip-grant-tables" rel="bookmark" href="https://shlomi-noach.github.io/blog/mysql/dangers-of-skip-grant-tables">Dangers of skip-grant-tables</a>.</p>
<p>Darren’s 1st advice (look for password ini files, scripts, etc.) is a very good one. One password that can always be looked up in files is the replication’s password.</p>
<p>Replication’s password is easily forgotten: you only set it once and never use it again; never script it nor manually login with. When setting up new slaves, though, you suddenly need it.</p>
<p>Apparently not many realize that the replication password is written in plaintext in the <strong>master.info</strong> file. This file tells the slave all about it’s master connection: host, port, user & password are all there for you to read.</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/recovering-a-mysql-root-password-the-fourth-solution#comments">13 Comments<span class="screen-reader-text"> on Recovering a MySQL `root` password: the fourth solution</span></a></span>	</footer>
</article>

<article id="post-3196" class="post-3196 post type-post status-publish format-standard hentry category-mysql tag-indexing tag-innodb tag-schema">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/reasons-to-use-auto_increment-columns-on-innodb" rel="bookmark">Reasons to use AUTO_INCREMENT columns on InnoDB</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/indexing" rel="tag">Indexing</a><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/schema" rel="tag">Schema</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/reasons-to-use-auto_increment-columns-on-innodb" rel="bookmark"><time class="entry-date published updated" datetime="2011-03-22T08:31:18+02:00">March 22, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>An InnoDB table must have a primary key (one is created if you don’t do it yourself). You may have a <a href="http://en.wikipedia.org/wiki/Natural_key">natural key</a> at hand. Stop! Allow me to suggest an AUTO_INCREMENT may be better.</p>
<p>Why should one add an AUTO_INCREMENT PRIMARY KEY on a table on which there’s a natural key? Isn’t an AUTO_INCREMENT a pseudo key, meaning, it doesn’t have any explicit relation to the row data, other than it is a number and unique?</p>
<p>Yes, indeed so. Nevertheless, consider:</p>
<ul>
<li>Natural keys are many times multi-columned.</li>
<li>Multi column PRIMARY KEYs make for larger keys, and make for bloated secondary keys as well. You may be wasting space for storing the additional AUTO_INCREMENT column, but you may gain space back on secondary keys.</li>
<li>Multi column PRIMARY KEYs make for more locks. See also <a href="https://shlomi-noach.github.io/blog/mysql/reducing-locks-by-narrowing-primary-key">this post</a>.</li>
<li>InnoDB INSERTs work considerably faster when worked in ascending PRIMARY KEY order. Can you ensure your natural key is in such order?</li>
<li>Even though an AUTO_INCREMENT makes for an INSERT bottleneck (values must be given serially), it is in particular helpful to InnoDB by ensuring PRIMARY KEY values are in ascending order.</li>
<li>AUTO_INCEMENT makes for chronological resolution. You <em>know</em> what came first, and what came next.</li>
<li>In many datasets, more recent entries are often being accessed more, and are therefore “hotter”. By using AUTO_INCREMENT, you’re ensuring that recent entries are grouped together within the B+ Tree. This means less random I/O when looking for recent data.</li>
<li>A numerical key is in particular helpful in splitting your table (and tasks on your table) into smaller chunks. I write <a href="http://code.google.com/p/openarkkit/">tools</a> which can work out with any PRIMARY KEY combination, but it’s easier to work with numbers.</li>
</ul>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/reasons-to-use-auto_increment-columns-on-innodb#comments">9 Comments<span class="screen-reader-text"> on Reasons to use AUTO_INCREMENT columns on InnoDB</span></a></span>	</footer>
</article>

<article id="post-3262" class="post-3262 post type-post status-publish format-standard hentry category-mysql tag-humor tag-mysqlconf tag-openark-kit">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/would-you-be-my-friend-on-mysqlconf-tempting-offer-inside" rel="bookmark">Would you be my friend on mysqlconf? (tempting offer inside)</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/humor" rel="tag">Humor</a><a href="https://shlomi-noach.github.io/blog/tag/mysqlconf" rel="tag">mysqlconf</a><a href="https://shlomi-noach.github.io/blog/tag/openark-kit" rel="tag">openark kit</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/would-you-be-my-friend-on-mysqlconf-tempting-offer-inside" rel="bookmark"><time class="entry-date published" datetime="2011-03-09T08:22:37+02:00">March 9, 2011</time><time class="updated" datetime="2011-03-09T13:06:23+02:00">March 9, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I’m still throwing papers to the trash and starting all over, fixing, rewriting and improving my talk at <a href="http://www.mysqlconf.com/">mysqlconf 2011</a>, where I will be presenting <a href="http://en.oreilly.com/mysql2011/public/schedule/detail/17155">openark-kit: MySQL utilities for everyday use</a>.</p>
<p>However I’ve got something up my sleeve: a benefit many can enjoy, that’ll make me a respectful, popular and sought after speaker. While others may try and lure you with such <em>earthly</em> temptations as a <strong>20%</strong> off discount, I am in a position to offer you a more <em>spiritual</em> gift: my friendship!</p>
<p>See, if you become my friend, I can offer you a <strong>25%</strong> discount on the MySQL conference. Yes, that’s <strong>5%</strong> more than my competitors! The only thing I ask in return is that you be my friend (hey, it’s called “friends of speaker”). Not like a FB virtual friend, but a <em>real</em> friendship! One where you can buy me <em>beer</em> or <em>dinner</em>!</p>
<p>If you agree to such humane terms, I will be in the position to let you know that all you have to do is fill in <strong>﻿﻿﻿mys11fsd</strong> in your registration form.</p>
<p>No, wait! I let it slip! Rewrite: You should fill in <del><strong>﻿﻿﻿mys11fsd </strong></del><em>[will only tell you this password after your commitment to a beer]</em> in your registration form.</p>
<p><em>Oh no, not again! </em></p>
<p>Don’t use <a href="https://en.oreilly.com/mysql2011/public/regwith/mys11fsd"><strong>﻿﻿﻿mys11fsd</strong></a> without talking to me first… You’re not supposed to… <em>Oh, my beer!</em></p>
<p><em>Argghhh!</em></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/would-you-be-my-friend-on-mysqlconf-tempting-offer-inside#comments">4 Comments<span class="screen-reader-text"> on Would you be my friend on mysqlconf? (tempting offer inside)</span></a></span>	</footer>
</article>

<article id="post-3359" class="post-3359 post type-post status-publish format-standard hentry category-mysql tag-file-system tag-innodb tag-myisam tag-security tag-triggers">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/limiting-table-disk-quota-in-mysql" rel="bookmark">Limiting table disk quota in MySQL</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/file-system" rel="tag">File System</a><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/myisam" rel="tag">MyISAM</a><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a><a href="https://shlomi-noach.github.io/blog/tag/triggers" rel="tag">Triggers</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/limiting-table-disk-quota-in-mysql" rel="bookmark"><time class="entry-date published updated" datetime="2011-03-07T09:08:21+02:00">March 7, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Question asked by a student: is there a way to limit a table’s quote on disk? Say, limit a table to 2GB, after which it will refuse to grow? Note that the requirement is that rows are never DELETEd. The table must simply refuse to be updated once it reaches a certain size.</p>
<p>There is no built-in way to limit a table’s quota on disk. First thing to observe is that MySQL has nothing to do with this. It is entirely up to the storage engine to provide with such functionality. The storage engine is the one to handle data storage: how table and keys are stored on disk. Just consider the difference between MyISAM’s <strong>.MYD</strong> & <strong>.MYI</strong> to InnoDB’s shared tablespace <strong>ibdata1</strong> to InnoDB’s file-per table <strong>.ibd</strong> files.</p>
<p>The only engine I know of that has a quota is the MEMORY engine: it accepts the <strong>max_heap_table_size</strong>, which limits the size of a single table in memory. Hrmmm… In memory…</p>
<h4>Why limit?</h4>
<p>I’m not as yet aware of the specific requirements of said company, but this is not the first time I heard this question.</p>
<p>The fact is: when MySQL runs out of disk space, it goes with a BOOM. It crashed ungracefully, with binary logs being out of sync, replication being out of sync. To date, and I’ve seen some cases, InnoDB merely crashes and manages to recover once disk space is salvaged, but I am not certain this is guaranteed to be the case. Anyone?</p>
<p>And, with MyISAM…, who knows?</p>
<p>Rule #1 of MySQL disk usage: <em>don’t run out of disk space.</em></p>
<h4>Workarounds</h4>
<p>I can think of two workarounds, none of which is pretty. The first involves triggers (actually, a few variations for this one), the second involves privileges. <a href="https://shlomi-noach.github.io/blog/mysql/limiting-table-disk-quota-in-mysql#more-3359" class="more-link">Continue reading »<span class="screen-reader-text"> “Limiting table disk quota in MySQL”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/limiting-table-disk-quota-in-mysql#comments">2 Comments<span class="screen-reader-text"> on Limiting table disk quota in MySQL</span></a></span>	</footer>
</article>

<article id="post-3337" class="post-3337 post type-post status-publish format-standard hentry category-mysql tag-graphs tag-mycheckpoint tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/generating-google-line-charts-with-sql-part-ii" rel="bookmark">Generating Google line charts with SQL, part II</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/graphs" rel="tag">Graphs</a><a href="https://shlomi-noach.github.io/blog/tag/mycheckpoint" rel="tag">mycheckpoint</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/generating-google-line-charts-with-sql-part-ii" rel="bookmark"><time class="entry-date published" datetime="2011-03-03T09:38:10+02:00">March 3, 2011</time><time class="updated" datetime="2011-03-03T09:41:27+02:00">March 3, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>This post continues <a href="https://shlomi-noach.github.io/blog/mysql/generating-google-line-charts-with-sql-part-i">Generating Google line charts with SQL, part I</a>, in pursue of generating time series based image charts.</p>
<p>We ended last post with the following chart:</p>
<blockquote>
<pre><img class="alignnone" title="Sample SQL Google Chart" src="http://chart.apis.google.com/chart?cht=lc&chs=400x200&chtt=SQL%20chart&chxt=x,y&chxr=1,-4716.6,5340.0&chd=s:dddddddddeeeeeefffffffffeeeedddcccbbaaZZZYYYXXXXXXXXXYYYZZabbcdeefghhijkkllmmmmmmmmllkkjihgfedcbZYXWVUTSRRQQPPPPQQQRSTUVWXZacdfgijlmnpqrssttuuuttssrqonmkigfdbZXVTSQONMLKJIIIIIIJKLMOPRTVXZbegilnprtvwyz01111110zyxvtrpnkifcaXUSPNLJHFECBBAAABBCEFHJLNQTWZcfilortwy1346789999876420yvspmjfcYVSOL" alt="" width="400" height="200">
http://chart.apis.google.com/chart?cht=lc&chs=400x200&chtt=SQL%20chart&chxt=x,y&chxr=1,-4716.6,5340.0&chd=s:dddddddddeeeeeefffffffffeeeedddcccbbaaZZZYYYXXXXXXXXXYYYZZabbcdeefghhijkkllmmmmmmmmllkkjihgfedcbZYXWVUTSRRQQPPPPQQQRSTUVWXZacdfgijlmnpqrssttuuuttssrqonmkigfdbZXVTSQONMLKJIIIIIIJKLMOPRTVXZbegilnprtvwyz01111110zyxvtrpnkifcaXUSPNLJHFECBBAAABBCEFHJLNQTWZcfilortwy1346789999876420yvspmjfcYVSOL
</pre>
</blockquote>
<p>which has a nice curve, and a proper y-legend, but incorrect x-legend and no ticks nor grids.</p>
<p>To date, Google Image Charts do not support time-series charts. We can’t just throw timestamp values and expect the chart to properly position them. We need to work these by hand.</p>
<p>This is not easily done; if our input consists of evenly spread timestamp values, we are in a reasonable position. If not, what do we do?</p>
<p>There are several solutions to this:</p>
<ul>
<li>We can present whatever points we have on the chart, making sure to position them properly. This makes for an uneven distribution of ticks on the x-axis, and is not pleasant to watch.</li>
<li>We can extrapolate values for round hours (or otherwise round timestamp resolutions), and so show evenly spread timestamps. I don’t like this solution one bit, since we’re essentially inventing values here. Extrapolation is nice when you know you have nice curves, but not when you’re doing database monitoring, for example. You must have the precise values.</li>
<li>We can do <a href="http://en.wikipedia.org/wiki/Oversampling">oversampling</a>, then group together several measurements within round timestamp resolutions. For example, we can make a measurement every <strong>2</strong> minutes, yet present only <strong>6</strong> measurements per hour, each averaging up <strong>10</strong> round minutes. This is the approach I take with <a href="http://code.openark.org/forge/mycheckpoint">mycheckpoint</a>.</li>
</ul>
<p>The latest approach goes even beyond that: what if we missed 30 minutes of sampling? Say the server was down. We then need to “invent” the missing timestamps. Note that we invent the timestamps, we do not invent values. We must present the chart with missing values on our invented timestamps.</p>
<p>I may show how to do this in a future post. Meanwhile, let’s simplify and assume our values <em>are</em> evenly spread. <a href="https://shlomi-noach.github.io/blog/mysql/generating-google-line-charts-with-sql-part-ii#more-3337" class="more-link">Continue reading »<span class="screen-reader-text"> “Generating Google line charts with SQL, part II”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/generating-google-line-charts-with-sql-part-ii#comments">2 Comments<span class="screen-reader-text"> on Generating Google line charts with SQL, part II</span></a></span>	</footer>
</article>

<article id="post-3297" class="post-3297 post type-post status-publish format-standard hentry category-mysql tag-configuration tag-security">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/upgrading-passwords-from-old_passwords-to-new-passwords" rel="bookmark">Upgrading passwords from old_passwords to “new passwords”</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/configuration" rel="tag">Configuration</a><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/upgrading-passwords-from-old_passwords-to-new-passwords" rel="bookmark"><time class="entry-date published" datetime="2011-02-28T15:50:52+02:00">February 28, 2011</time><time class="updated" datetime="2011-03-01T19:24:46+02:00">March 1, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>You have <strong>old_passwords=1</strong> in your <strong>my.cnf</strong>. I’m guessing this is because you used one of the <strong>my-small.cnf</strong>, <strong>my-large.cnf</strong> etc. templates provided with your MySQL distribution.</p>
<p>These files can easily win the “most outdated sample configuration file contest”.</p>
<p>Usually it’s no big deal: if some parameter isn’t right, you just go and change it. Some variables, though, have a long-lasting effect, and are not easily reversed.</p>
<h4>What’s the deal with old_passwords?</h4>
<p>No one should be using these anymore. This variable makes the password hashing algorithm compatible with that of MySQL <strong>4.0</strong>. I’m pretty sure <strong>4.0</strong> was released <strong>9</strong> years ago. I don’t know of anyone still using it (or <strong>4.0</strong> client libraries).</p>
<p>The deal is this: with old_passwords you get a <strong>16</strong> hexadecimal digits (<strong>64</strong> bit) hashing of your passwords. With so called <em>“new passwords”</em> you get <strong>40</strong> hexadecimal digits (plus extra “<strong>*</strong>“). So this is about better encryption of your password. Read more on the <a href="http://dev.mysql.com/doc/refman/5.1/en/password-hashing.html">manual</a>.</p>
<h4>How do I upgrade to new password format?</h4>
<p>You can’t just put a comment on the “<strong>old_passwords=1</strong>” entry in the configuration file. If you do so, the next client to connect will attempt to match a <strong>41</strong> characters hashed password to your existing <strong>16</strong> characters entry in the <strong>mysql.users</strong> table. So you need to make a simultaneous change: both remove the <strong>old_passwords</strong> entry and set a new password. You must know all accounts’ passwords before you begin.</p>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/upgrading-passwords-from-old_passwords-to-new-passwords#more-3297" class="more-link">Continue reading »<span class="screen-reader-text"> “Upgrading passwords from old_passwords to “new passwords””</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/upgrading-passwords-from-old_passwords-to-new-passwords#comments">26 Comments<span class="screen-reader-text"> on Upgrading passwords from old_passwords to “new passwords”</span></a></span>	</footer>
</article>

	<nav class="navigation posts-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://shlomi-noach.github.io/blog/page/27">Older posts</a></div><div class="nav-next"><a href="https://shlomi-noach.github.io/blog/page/25">Newer posts</a></div></div>
	</nav>
	</main>


	<footer id="colophon" class="site-footer">
		<div class="site-info">
			<a href="https://wordpress.org/">
				Powered by WordPress			</a>
			<span class="sep"> | </span>
				Theme: <a href="http://openark.org">openark-primer</a> by <a href="http://underscores.me/">Underscores.me</a>.		</div>
	</footer>
</div>

	<div style="display:none">
	</div>
<script>
var pollsL10n = {"ajax_url":"https:\/\/shlomi-noach.github.io\/blog\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-js.js"></script>
<script src="https://secure.gravatar.com/js/gprofiles.js?ver=2020Junaa"></script>
<script>
var WPGroHo = {"my_hash":""};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/modules/wpgroho.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/navigation.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202024.js" async="async" defer></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.2.1',blog:'32412571',post:'0',tz:'2',srv:'code.openark.org'} ]);
	_stq.push([ 'clickTrackerInit', '32412571', '0' ]);
</script>

</body>
</html>
