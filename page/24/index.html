<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

	<title>code.openark.org – Page 24 – Blog by Shlomi Noach</title>
<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//s.w.org">


<link rel="stylesheet" id="wp-block-library-css" href="https://shlomi-noach.github.io/blog/wp-includes/css/dist/block-library/style.min.css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wp-polls-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-css.css" media="all">
<style id="wp-polls-inline-css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="openark-primer-style-css" href="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/style.css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/css/jetpack.css" media="all">
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-includes/js/jquery/jquery-migrate.min.js"></script>




<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel="dns-prefetch" href="//v0.wordpress.com">


<meta property="og:type" content="website">
<meta property="og:title" content="code.openark.org">
<meta property="og:description" content="Blog by Shlomi Noach">
<meta property="og:url" content="https://shlomi-noach.github.io/blog/">
<meta property="og:site_name" content="code.openark.org">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:locale" content="en_US">


<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(242,101,34,.88);}</style></head>

<body class="home blog paged paged-24 hfeed no-sidebar">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#primary">Skip to content</a>

	<header id="masthead" class="site-header">
		<div class="site-branding">
							<h1 class="site-title"><a href="https://shlomi-noach.github.io/blog/" rel="home">code.openark.org</a></h1>
								<p class="site-description">Blog by Shlomi Noach</p>
			
			<nav id="site-navigation" class="main-navigation">
				<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">primary-menu</button>
				<div class="menu-primary-menu-container"><ul id="menu-primary-menu" class="menu"><li id="menu-item-8109" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8109"><a href="https://shlomi-noach.github.io/blog/archives">archives</a></li>
<li id="menu-item-8050" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8050"><a href="https://shlomi-noach.github.io/blog/presentations">presentations</a></li>
<li id="menu-item-8055" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8055"><a href="https://shlomi-noach.github.io/blog/about">about</a></li>
<li id="menu-item-8071" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8071"><a href="https://github.com/shlomi-noach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></li>
<li id="menu-item-8074" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8074"><a href="https://www.linkedin.com/in/shlominoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></li>
<li id="menu-item-8072" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8072"><a href="https://twitter.com/ShlomiNoach"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></li>
<li id="menu-item-8073" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8073"><a href="https://shlomi-noach.github.io/blog/feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-12.832 20c-1.197 0-2.168-.969-2.168-2.165s.971-2.165 2.168-2.165 2.167.969 2.167 2.165-.97 2.165-2.167 2.165zm5.18 0c-.041-4.029-3.314-7.298-7.348-7.339v-3.207c5.814.041 10.518 4.739 10.561 10.546h-3.213zm5.441 0c-.021-7.063-5.736-12.761-12.789-12.792v-3.208c8.83.031 15.98 7.179 16 16h-3.211z"></path></svg></a></li>
</ul></div>			</nav>
		</div>
	</header>

	<main id="primary" class="site-main">

		
<article id="post-3926" class="post-3926 post type-post status-publish format-standard hentry category-mysql tag-common_schema tag-sql tag-stored-routines">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-eval" rel="bookmark">MySQL eval()</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a><a href="https://shlomi-noach.github.io/blog/tag/stored-routines" rel="tag">Stored routines</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-eval" rel="bookmark"><time class="entry-date published updated" datetime="2011-09-06T09:02:42+02:00">September 6, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I’ve just implemented an <strong>eval()</strong> call for MySQL. It is implemented with SQL, using a stored procedure. So this is not some plugin: you can use it from within your normal database server.</p>
<h4>Just what is an eval() call?</h4>
<p>In some programming languages it would mean: get some text, and execute it as though it were complied code. So, dynamic coding.</p>
<p>In SQL: get the text of query which generates SQL statements in itself (either DML or DDL), and invoke those implied SQL statements.</p>
<h4>A simple example</h4>
<p>Best if I present <a href="http://www.mysqlperformanceblog.com/2009/05/21/mass-killing-of-mysql-connections/">Mass killing of MySQL Connections</a> by Peter Zaitsev. The thing is to execute a query, typically on <strong>INFORMATION_SCHEMA</strong>, which uses metadata so as to generate SQL queries/commands. Peter’s example is:</p>
<blockquote>
<pre>select concat('KILL ',id,';') from information_schema.processlist where user='root'</pre>
</blockquote>
<p>The above query generates <strong>KILL</strong> commands for all users called <strong>‘root’</strong>. I do many such queries in <a href="http://code.google.com/p/common-schema/" rel="nofollow">common_schema</a>: like <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/sql_show_grants.html">creating the <strong>GRANT</strong> statements</a> for accounts, the <strong>DROP KEY</strong> statements for <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/redundant_keys.html">redundant keys</a>, the <strong>ADD</strong> and <strong>DROP</strong> statements for <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/sql_foreign_keys.html">foreign keys</a> etc.</p>
<p>So the problem is you have to export those statements to file, then execute them from file: either using <strong>SOURCE</strong>, as in Peter’s example, or from shell prompt, piping file contents into <strong>mysql</strong> client.</p>
<h4>You can now eval()</h4>
<p>I’ve been on family holiday for a couple of weeks, which meant no need to think of work. Which means <a href="https://shlomi-noach.github.io/blog/mysql/you-know-youve-been-doing-too-much-sql-when">more time to think of SQL</a> (darn!). And I’ve found the way to do it completely within the server (no external files required). <a href="https://shlomi-noach.github.io/blog/mysql/mysql-eval#more-3926" class="more-link">Continue reading »<span class="screen-reader-text"> “MySQL eval()”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-eval#comments">10 Comments<span class="screen-reader-text"> on MySQL eval()</span></a></span>	</footer>
</article>

<article id="post-3920" class="post-3920 post type-post status-publish format-standard hentry category-mysql tag-humor tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/you-know-youve-been-doing-too-much-sql-when" rel="bookmark">You know you’ve been doing too much SQL when…</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/humor" rel="tag">Humor</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/you-know-youve-been-doing-too-much-sql-when" rel="bookmark"><time class="entry-date published updated" datetime="2011-09-01T07:44:36+02:00">September 1, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>…you’re traveling on family holiday, and each time you wish to  suggest you should check up on the tourist information center, you  repeatedly come up with: “Let’s ask at the <em>INFORMATION_SCHEMA</em> and see what we can get”.</p>
<p>Also, doing so while wearing an <em>OpenSQL Camp</em> T-shirt doesn’t help.</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/you-know-youve-been-doing-too-much-sql-when#comments">4 Comments<span class="screen-reader-text"> on You know you’ve been doing too much SQL when…</span></a></span>	</footer>
</article>

<article id="post-3908" class="post-3908 post type-post status-publish format-standard hentry category-mysql tag-analysis tag-common_schema tag-information_schema tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-global-status-difference-using-single-query" rel="bookmark">MySQL Global status difference using single query</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/analysis" rel="tag">Analysis</a><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/information_schema" rel="tag">INFORMATION_SCHEMA</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-global-status-difference-using-single-query" rel="bookmark"><time class="entry-date published" datetime="2011-08-12T18:31:12+02:00">August 12, 2011</time><time class="updated" datetime="2015-01-20T16:59:48+02:00">January 20, 2015</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Have just read <a href="http://karlssonondatabases.blogspot.com/2011/08/mysql-global-status-difference-using_12.html">MySQL Global status difference using MySQL procedures / functions</a>, by Andres Karlsson. Have commented, but realized I did not provide with a direct answer. In the comment, I suggested checking out <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/global_status_diff.html">a solution based on views</a>, found in <a href="http://code.google.com/p/common-schema/" rel="nofollow">common_schema</a>. But the solution in <em>common_schema</em> is split into two views, due to the fact views cannot handle derived tables subqueries.</p>
<p>Well, here’s a single query to do that: it checks <strong>GLOBAL_STATUS</strong> twice, <strong>10</strong> seconds apart in the following sample. It uses <strong>SLEEP()</strong> to actually wait between the two reads. Yes, you can do that with a query.</p>
<p>The following query shows all <strong>GLOBAL_STATUS</strong> values that have changed during the sample period.</p>
<p><strong>[UPDATE]</strong> query updated to work with MySQL <strong>5.6</strong> optimizer <a href="https://shlomi-noach.github.io/blog/mysql/mysql-global-status-difference-using-single-query#more-3908" class="more-link">Continue reading »<span class="screen-reader-text"> “MySQL Global status difference using single query”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/mysql-global-status-difference-using-single-query#comments">8 Comments<span class="screen-reader-text"> on MySQL Global status difference using single query</span></a></span>	</footer>
</article>

<article id="post-3871" class="post-3871 post type-post status-publish format-standard hentry category-mysql tag-common_schema tag-security tag-sql">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/finding-current_user-for-any-user" rel="bookmark">Finding CURRENT_USER for any user</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/finding-current_user-for-any-user" rel="bookmark"><time class="entry-date published updated" datetime="2011-08-09T13:19:10+02:00">August 9, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>A MySQL account is a user/host combination. A MySQL connection is done by a user connecting from some host.</p>
<p>However, the user/host from which the connection is made are not the same as the user/host as specified in the account. For example, the account may be created thus:</p>
<blockquote>
<pre>CREATE USER 'temp'@'10.0.0.%' IDENTIFIED BY '123456';</pre>
</blockquote>
<p>The host as specified in the above account is a wildcard host. A connection by the <strong>‘temp’</strong> user from <strong>‘10.0.0.3’</strong> can map into that account. It thus happens that the connected user is <strong>‘temp’@’10.0.0.3’</strong>, yet the assigned account is <strong>‘temp’@’10.0.0.%’</strong>.</p>
<p>MySQL provides with the <strong>USER()</strong> and <strong>CURRENT_USER()</strong> which map to the connected user and the assigned account, respectively, and which lets the current session identify the relation between the two. Read more on this on the <a href="http://dev.mysql.com/doc/refman/5.1/en/account-activity-auditing.html">MySQL docs</a>.</p>
<h4>The problem</h4>
<p>And the trouble is: MySQL only provides this functionality for the <em>current session</em>. Surprisingly, given a user/host combination, I cannot get MySQL to tell me which account matches those details.</p>
<h4>The inconsistency</h4>
<p>And I care because there is an inconsistency. Namely, when I do <strong>SHOW PROCESSLIST</strong> MySQL tells me the user & host from which the connection is made. It does <em>not</em> tell me the account for which the process is assigned. <a href="https://shlomi-noach.github.io/blog/mysql/finding-current_user-for-any-user#more-3871" class="more-link">Continue reading »<span class="screen-reader-text"> “Finding CURRENT_USER for any user”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/finding-current_user-for-any-user#respond">Leave a Comment<span class="screen-reader-text"> on Finding CURRENT_USER for any user</span></a></span>	</footer>
</article>

<article id="post-3887" class="post-3887 post type-post status-publish format-standard hentry category-mysql tag-development tag-open-source tag-opinions">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-august-penguin-2011" rel="bookmark">Speaking at “August Penguin 2011”</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/development" rel="tag">Development</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/opinions" rel="tag">Opinions</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-august-penguin-2011" rel="bookmark"><time class="entry-date published" datetime="2011-08-03T12:42:40+02:00">August 3, 2011</time><time class="updated" datetime="2011-08-03T12:43:53+02:00">August 3, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>I will be speaking at August Penguin 2011 (<a href="http://www.hamakor.org.il/2011/07/08/%D7%94%D7%96%D7%9E%D7%A0%D7%94-%D7%9C%D7%90%D7%95%D7%92%D7%95%D7%A1%D7%98-%D7%A4%D7%99%D7%A0%D7%92%D7%95%D7%95%D7%99%D7%9F-2011/">אוגוסט פינגווין</a>), on August 12th in Ramat-Gan, Israel.</p>
<p><em>August Penguin</em> is the annual meeting of <a href="http://www.hamakor.org.il/en/">Hamakor</a> society: an Israeli society for Free Software and Open-Source Code (read more <a href="http://en.wikipedia.org/wiki/Hamakor">here</a>).</p>
<p>I’ll be holding a non-technical talk about MySQL, titled <em>“MySQL and the Open Source Sphere”</em>.  In this talk I will be presenting my impressions of the nature of open  source development of MySQL and surroundings: the core server, the  various forks, patches, 3rd party tools, companies involved, etc. So  this is a general “get to know who’s who & what’s what in the MySQL  world”.</p>
<p>This is a 30 minutes talk. I will surely not cover every open source  development in this field, so my apologies in advance to those I leave  out. The truth is, there’s so much going on lately I can hardly keep up  with reading the announcements. Truly, this is a wonderful time for open  source development with MySQL.</p>
<p>Talk will be held in Hebrew.</p>
<p>See you there!</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/speaking-at-august-penguin-2011#respond">Leave a Comment<span class="screen-reader-text"> on Speaking at “August Penguin 2011”</span></a></span>	</footer>
</article>

<article id="post-3839" class="post-3839 post type-post status-publish format-standard hentry category-mysql tag-data-types">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/235959-is-not-the-end-of-the-day-no-really" rel="bookmark">23:59:59 is not the end of the day. No, really!</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/data-types" rel="tag">Data Types</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/235959-is-not-the-end-of-the-day-no-really" rel="bookmark"><time class="entry-date published" datetime="2011-07-27T20:16:00+02:00">July 27, 2011</time><time class="updated" datetime="2011-07-31T07:42:49+02:00">July 31, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>How would you check whether some <strong>TIMESTAMP</strong> column falls within a given day, say <strong>July 26th, 2011</strong>?</p>
<p>This is a question I tend to ask students, and usually I get the same range of answers. Some are wrong; some cannot utilize an index, some are correct, and some are <em>temporarily correct</em>. I wish to take a closer look at the last. Such an answer looks like this:</p>
<blockquote>
<pre>SELECT * FROM some_table WHERE timstamp_column BETWEEN '2011-07-26 00:00:00' AND '2011-07-26 23:59:59'</pre>
</blockquote>
<p>Yikes! I get my allergies when I see this one.</p>
<p>Technically this seems correct. And it seems to work so far for people. There are two things that disturb me:</p>
<ol>
<li><strong>’23:59:59′</strong> refers to the beginning of the last second of the day. This means a full second is missing in concept. No one would write such a code on a C, Java or PHP application: that would be a newbie’s mistake. But people feel at ease doing it with SQL</li>
<p>Of course, this works when timestamps are in a one second resolution. Which leads me to:</p>
<li>One second resolution is a temporary issue. Already <a href="http://kb.askmonty.org/en/what-is-mariadb-53">MariaDB 5.3</a> presents with microsecond support for NOW() and TIMESTAMP, TIME and DATETIME columns. Sometime in the not-so-far future the standard MySQL distribution will have that, too.</li>
</ol>
<p> <a href="https://shlomi-noach.github.io/blog/mysql/235959-is-not-the-end-of-the-day-no-really#more-3839" class="more-link">Continue reading »<span class="screen-reader-text"> “23:59:59 is not the end of the day. No, really!”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/235959-is-not-the-end-of-the-day-no-really#comments">13 Comments<span class="screen-reader-text"> on 23:59:59 is not the end of the day. No, really!</span></a></span>	</footer>
</article>

<article id="post-3837" class="post-3837 post type-post status-publish format-standard hentry category-mysql tag-common_schema tag-open-source">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/common_schema-looking-for-contributions" rel="bookmark">common_schema: looking for contributions</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/common_schema-looking-for-contributions" rel="bookmark"><time class="entry-date published updated" datetime="2011-07-20T16:27:12+02:00">July 20, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>In my <a href="https://shlomi-noach.github.io/blog/mysql/announcing-common_schema-common-views-routines-for-mysql">announcement</a> for <a title="common_schema" href="../../forge/common_schema">common_schema</a> I have failed to deliver the following message:</p>
<blockquote><p>I will be happy to receive contributions to <em>common_schema</em>, and I will be happy to have contributors on this project</p></blockquote>
<h4>What kind of contributions are wanted?</h4>
<p>So, I’m mostly interested right now in:</p>
<ul>
<li>Views: providing more insight on metadata (data types, schemata, volumes, transactions, locks, connections, etc.)</li>
<li>Views: SQL code generation (e.g. <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/sql_foreign_keys.html">generate my FOREIGN KEYs</a>)</li>
<li>Functions: DETERMINISTIC, NO SQL, preferably no control flow inside, making for simple calls what is usually a typical, repeating function combination.</li>
<li>Tables: small, static data that is handy to have around. But really, <em>small</em>.</li>
</ul>
<p>Less interested in:</p>
<ul>
<li>Procedures</li>
<li>OS dependent solutions (e.g. calling LOAD_FILE(‘/proc/meminfo’) which only makes sense on Linux)</li>
</ul>
<p>I’ve got a few ideas already, and have received contributions and ideas from others (I’m looking at you, Roland).</p>
<p>If you have a good idea you’d like to share, why don’t you <a href="http://code.google.com/p/common-schema/issues/entry?template=Request%20for%20new%20component">submit it under the Issues page</a> (submit as <em>“Request for new component”</em>)</p>
<p>Everything is done on my spare time, and there’s not much of that. So, if you do submit something and it’s not in right away, please be patient. Thanks!</p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/common_schema-looking-for-contributions#comments">5 Comments<span class="screen-reader-text"> on common_schema: looking for contributions</span></a></span>	</footer>
</article>

<article id="post-3794" class="post-3794 post type-post status-publish format-standard hentry category-mysql tag-analysis tag-common_schema tag-data-types tag-development tag-indexing tag-information_schema tag-innodb tag-monitoring tag-open-source tag-schema tag-security tag-sql tag-stored-routines">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/announcing-common_schema-common-views-routines-for-mysql" rel="bookmark">Announcing common_schema: common views & routines for MySQL</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/analysis" rel="tag">Analysis</a><a href="https://shlomi-noach.github.io/blog/tag/common_schema" rel="tag">common_schema</a><a href="https://shlomi-noach.github.io/blog/tag/data-types" rel="tag">Data Types</a><a href="https://shlomi-noach.github.io/blog/tag/development" rel="tag">Development</a><a href="https://shlomi-noach.github.io/blog/tag/indexing" rel="tag">Indexing</a><a href="https://shlomi-noach.github.io/blog/tag/information_schema" rel="tag">INFORMATION_SCHEMA</a><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/monitoring" rel="tag">Monitoring</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/schema" rel="tag">Schema</a><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a><a href="https://shlomi-noach.github.io/blog/tag/sql" rel="tag">SQL</a><a href="https://shlomi-noach.github.io/blog/tag/stored-routines" rel="tag">Stored routines</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/announcing-common_schema-common-views-routines-for-mysql" rel="bookmark"><time class="entry-date published updated" datetime="2011-07-13T06:25:24+02:00">July 13, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Today I have released <a title="common_schema" href="http://code.openark.org/forge/common_schema">common_schema</a>, a utility schema for MySQL which includes many views and functions, and is aimed to be installed on any MySQL server.</p>
<h4>What does it do?</h4>
<p>There are views answering for all sorts of useful information: stuff related to schema analysis, data dimensions, monitoring, processes & transactions, security, internals… There are basic functions answering for common needs.</p>
<p>Some of the views/routines simply formalize those queries we tend to write over and over again. Others take the place of external tools, answering complex questions via SQL and metadata. Still others help out with SQL generation.</p>
<p>Here are a few highlights:</p>
<ul>
<li>Did you know you can work out <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/global_status_diff_nonzero.html">simple monitoring</a> of your server with a <em>query</em>?  There’s a view to do that for you.</li>
<li>How about showing just <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/processlist_top.html">the good parts of the processlist</a>?</li>
<li>Does your schema have <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/redundant_keys.html">redundant keys</a>?</li>
<li>Or InnoDB tables with <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/no_pk_innodb_tables.html">no PRIMARY KEY</a>?</li>
<li>Is AUTO_INCREMENT <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/auto_increment_columns.html">running out of space</a>?</li>
<li>Can I get the SQL statements to <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/sql_foreign_keys.html">generate my FOREIGN KEYs</a>? To drop them?</li>
<li>And can we finally get <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/sql_show_grants.html">SHOW GRANTS for all accounts</a>, and as an <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/sql_grants.html">SQL query</a>?</li>
<li>Ever needed a <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/general_functions.html#crc64">64 bit CRC function</a>?</li>
<li>And aren’t you tired of writing the cumbersome SUBSTRING_INDEX(SUBSTRING_INDEX(str, ‘,’, 3), ‘,’, -1)? <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/string_functions.html#split_token">There’s an alternative</a>.</li>
</ul>
<p>There’s more. Take a look at the <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/introduction.html">common_schema documentation</a> for full listing. And it’s evolving: I’ve got quite a few ideas already for future components.</p>
<p>Some of these views rely on heavyweight INFORMATION_SCHEMA tables. You should be aware of the impact and <a href="http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/risks.html">risks</a>.</p>
<h4>What do I need to install?</h4>
<p>There’s no script or executable file. It’s just a schema. The distribution in an SQL file which generates <em>common_schema</em>. Much like a dump file.</p>
<h4> <a href="https://shlomi-noach.github.io/blog/mysql/announcing-common_schema-common-views-routines-for-mysql#more-3794" class="more-link">Continue reading »<span class="screen-reader-text"> “Announcing common_schema: common views & routines for MySQL”</span></a></h4>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/announcing-common_schema-common-views-routines-for-mysql#comments">7 Comments<span class="screen-reader-text"> on Announcing common_schema: common views & routines for MySQL</span></a></span>	</footer>
</article>

<article id="post-3685" class="post-3685 post type-post status-publish format-standard hentry category-mysql tag-configuration tag-innodb tag-mysqldump tag-scripts">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/useful-sed-awk-liners-for-mysql" rel="bookmark">Useful sed / awk liners for MySQL</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/configuration" rel="tag">Configuration</a><a href="https://shlomi-noach.github.io/blog/tag/innodb" rel="tag">InnoDB</a><a href="https://shlomi-noach.github.io/blog/tag/mysqldump" rel="tag">mysqldump</a><a href="https://shlomi-noach.github.io/blog/tag/scripts" rel="tag">scripts</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/useful-sed-awk-liners-for-mysql" rel="bookmark"><time class="entry-date published updated" datetime="2011-07-06T08:41:00+02:00">July 6, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Listing some useful <strong>sed</strong> / <strong>awk</strong> liners to use with MySQL. I use these on occasion.</p>
<p><strong>sed</strong>, <strong>awk</strong> & <strong>grep</strong> have many overlapping features. Some simple tasks can be performed by either. For example, stripping empty lines can be performed by either:</p>
<blockquote>
<pre><strong>grep</strong> '.'
<strong>awk</strong> '/./'
<strong>sed</strong> '/./!d'
<strong>grep</strong> -v '^$'
<strong>awk</strong> '!/^$/'
<strong>sed</strong> '/^$/d'</pre>
</blockquote>
<p>It’s a matter of taste & convention which tool and variation to use. So for any script I suggest, there may be many variations, possibly cleaner, shorter; feel free to comment.</p>
<h4>mysqldump</h4>
<p>The output of <em>mysqldump</em> is in particular useful when one wishes to make transformation on data or metadata. <a href="https://shlomi-noach.github.io/blog/mysql/useful-sed-awk-liners-for-mysql#more-3685" class="more-link">Continue reading »<span class="screen-reader-text"> “Useful sed / awk liners for MySQL”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/useful-sed-awk-liners-for-mysql#comments">10 Comments<span class="screen-reader-text"> on Useful sed / awk liners for MySQL</span></a></span>	</footer>
</article>

<article id="post-3764" class="post-3764 post type-post status-publish format-standard hentry category-mysql tag-information_schema tag-open-source tag-security tag-stored-routines tag-views">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://shlomi-noach.github.io/blog/mysql/routine_privileges-implementation" rel="bookmark">ROUTINE_PRIVILEGES implementation</a></h2>			<div class="entry-meta">
				<span class="cat-links"><a href="https://shlomi-noach.github.io/blog/category/mysql" rel="category tag">MySQL</a></span><span class="tags-links"><a href="https://shlomi-noach.github.io/blog/tag/information_schema" rel="tag">INFORMATION_SCHEMA</a><a href="https://shlomi-noach.github.io/blog/tag/open-source" rel="tag">Open Source</a><a href="https://shlomi-noach.github.io/blog/tag/security" rel="tag">Security</a><a href="https://shlomi-noach.github.io/blog/tag/stored-routines" rel="tag">Stored routines</a><a href="https://shlomi-noach.github.io/blog/tag/views" rel="tag">Views</a></span><span class="posted-on alignright"><a href="https://shlomi-noach.github.io/blog/mysql/routine_privileges-implementation" rel="bookmark"><time class="entry-date published" datetime="2011-06-22T14:14:45+02:00">June 22, 2011</time><time class="updated" datetime="2011-06-27T13:47:36+02:00">June 27, 2011</time></a></span>			</div>
			</header>

	
	<div class="entry-content">
		<p>Following up on <a title="Link to MySQL security: inconsistencies" rel="bookmark" href="https://shlomi-noach.github.io/blog/mysql/mysql-security-inconsistencies">MySQL security: inconsistencies</a>, and on <a href="http://bugs.mysql.com/bug.php?id=61596">MySQL bug #61596</a>, I was thinking it may take a long time till the non-existent <strong>ROUTINE_PRIVILEGES</strong> view is implemented. Here’s my own implementation of the view.</p>
<p>I’ve followed the somewhat strange conventions used in the <strong>*_PRIVILEGES</strong> tables in <strong>INFORMATION_SCHEMA</strong>, where the <strong>IS_GRANTABLE</strong> is a separate column, although in <em><del>2nd</del> 1st normal form</em>.</p>
<p>I present it here as a query, using session variables, rather than a view definition: <a href="https://shlomi-noach.github.io/blog/mysql/routine_privileges-implementation#more-3764" class="more-link">Continue reading »<span class="screen-reader-text"> “ROUTINE_PRIVILEGES implementation”</span></a></p>
	</div>

	<footer class="entry-footer">
		<span class="comments-link"><a href="https://shlomi-noach.github.io/blog/mysql/routine_privileges-implementation#comments">2 Comments<span class="screen-reader-text"> on ROUTINE_PRIVILEGES implementation</span></a></span>	</footer>
</article>

	<nav class="navigation posts-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://shlomi-noach.github.io/blog/page/25">Older posts</a></div><div class="nav-next"><a href="https://shlomi-noach.github.io/blog/page/23">Newer posts</a></div></div>
	</nav>
	</main>


	<footer id="colophon" class="site-footer">
		<div class="site-info">
			<a href="https://wordpress.org/">
				Powered by WordPress			</a>
			<span class="sep"> | </span>
				Theme: <a href="http://openark.org">openark-primer</a> by <a href="http://underscores.me/">Underscores.me</a>.		</div>
	</footer>
</div>

	<div style="display:none">
	</div>
<script>
var pollsL10n = {"ajax_url":"https:\/\/shlomi-noach.github.io\/blog\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/wp-polls/polls-js.js"></script>
<script src="https://secure.gravatar.com/js/gprofiles.js?ver=2020Junaa"></script>
<script>
var WPGroHo = {"my_hash":""};
</script>
<script src="https://shlomi-noach.github.io/blog/wp-content/plugins/jetpack/modules/wpgroho.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/navigation.js"></script>
<script src="https://shlomi-noach.github.io/blog/wp-content/themes/openark-primer/js/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="https://stats.wp.com/e-202024.js" async="async" defer></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.2.1',blog:'32412571',post:'0',tz:'2',srv:'code.openark.org'} ]);
	_stq.push([ 'clickTrackerInit', '32412571', '0' ]);
</script>

</body>
</html>
