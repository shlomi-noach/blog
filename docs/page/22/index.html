<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.16" />

  <title>code.openark.org</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/blog/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/blog/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  
  <link rel="alternate" type="application/rss+xml" title="code.openark.org" href="/blog/index.xml" />
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="/blogimg/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <a class="pure-menu-heading brand" href="/blog">openark.org</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/page/about"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
      <li class="pure-menu-item">
        <a class="pure-menu-link" href="/blog/index.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">
    <li class="pure-menu-item">
      <a class="pure-menu-link">
        Shlomi Noach
        
          <div class="avatar-container">
        	  <div class="avatar-img-border">
                <img class="avatar-img" src="/blog/images/shlomi-noach.png" alt="code.openark.org" />
        	  </div>
        	</div>
        
      </a>
    </li>

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/shlomi-noach" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/ShlomiNoach" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/shlominoach" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>





  <div>
  <div class="small-print">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>code.openark.org</h1>
  <h2>Software musings by Shlomi Noach</h2>
</div>

<div class="content">
  
    <article>
  <header>
    <h2><a href="/blog/mysql/mysql-user-group-meeting-june-2011-israel/">MySQL User Group Meeting, June 2011, Israel</a></h2>

    <div class="post-meta">

  <div>

    <time>18 Jun 2011</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blogcategories/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blogtags/user-group">User Group</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  It's been quite a while since a MySQL User Group Meeting was held in Israel. I'm happy to announce that the next meeting will take place on June 28th, starting 16:30. Talks will be in Hebrew. Full details here. This meeting is organized by Valinor, who will also be hosting it, and who are planning to make this a tradition. Thumbs up! Rotem Fogel will be presenting on Reaching best Scalability on MySQL Based Applications Gabi Davis will be presenting on Working with MySQL in Real Life: Do's and Don'ts I will be presenting on MySQL Replication Solutions and Enhancements.
  </p>

  
  <footer>
    <a href="/blog/mysql/mysql-user-group-meeting-june-2011-israel/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/pop-quiz-what-is-the-most-basic-privilege-an-account-can-be-assigned-with/">Pop quiz: what is the most basic privilege an account can be assigned with?</a></h2>

    <div class="post-meta">

  <div>

    <time>14 Jun 2011</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blogcategories/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blogtags/security">Security</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>I asked this during my presentation on the MySQL Conference this year. And I got a unanimous answer from the crowd. Take a moment to think this over, before coming up with the answer. Meanwhile, an intermezzo.</p>
<p><em><strong>Tam dam dam&hellip;</strong></em></p>
<p><em><strong>Pom pom Pom pom Pom pom&hellip;</strong></em></p>
<p>If your answer is that the most basic privilege an account can be assigned with is the USAGE privilege, you are right!</p>
<p>And then again, you&rsquo;re also <em>wrong</em>.</p>
<p></p>

  </p>

  
  <footer>
    <a href="/blog/mysql/pop-quiz-what-is-the-most-basic-privilege-an-account-can-be-assigned-with/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/timestamp-vs-datetime-which-should-i-be-using/">TIMESTAMP vs. DATETIME, which should I be using?</a></h2>

    <div class="post-meta">

  <div>

    <time>22 May 2011</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blogcategories/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blogtags/data-types">Data Types</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>They both look the same, have roughly the same use. Nevertheless, they differ in many respects. I&rsquo;ll note the difference, and note a few pitfalls and peculiarities.</p>
<h4>Range</h4>
<p><strong>TIMESTAMP</strong> starts with the <a href="http://en.wikipedia.org/wiki/Unix_time">epoch</a>, <strong>&lsquo;1970-01-01 00:00:01&rsquo;</strong> UTC and ends with <strong>&lsquo;2038-01-19 03:14:07&rsquo;</strong> UTC. This is all very nice today, and may actually hold up till our retirement, but the younger readers may yet have to deal with the <strong>Bug2K+38</strong>â„¢, certain to arrive.</p>
<p><strong>DATETIME</strong> starts with <strong>&lsquo;1000-01-01 00:00:00&rsquo;</strong> and lasts up to <strong>&lsquo;9999-12-31 23:59:59&rsquo;</strong>. More on that later.</p>
<p>In respect of range, your current event logs may well use a <strong>TIMESTAMP</strong> value, while your grandfather&rsquo;s and granddaughter&rsquo;s birth dates may require <strong>DATETIME</strong>.</p>
<p>In general I would suggest that anything that relates to <em>now</em>, can be a <strong>TIMESTAMP</strong>. A new entry is added? It is added <em>now</em>. It can be represented by a <strong>TIMESTAMP</strong>. Anything has an expiry time of a few minutes, perhaps a few days or a month? You&rsquo;ll be safe using it up till late <strong>2037</strong>. Anything else had better use a <strong>DATETIME</strong>. In particular, dates relating to issues such as birth, insurance, the market etc. fall into this category.</p>
<p><em>History</em>, however, does not even hold up with <strong>DATETIME</strong>. Rome fell long before <strong>MIN(DATETIME)</strong>. You will have to manage your own. Not even <strong>YEAR</strong> will help you out.</p>
<h4>Storage</h4>
<p><strong>TIMESTAMP</strong> makes for <strong>4</strong> bytes. <strong>DATETIME</strong> makes for <strong>8</strong> bytes. Now that we have this behind us, let&rsquo;s see why.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/timestamp-vs-datetime-which-should-i-be-using/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/tales-of-the-trade-4-how-to-author-a-super-successful-mysql-blog/">Tales of the trade #5: How to author a super successful MySQL blog</a></h2>

    <div class="post-meta">

  <div>

    <time>18 May 2011</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blogcategories/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blogtags/humor">Humor</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blogtags/planet">Planet</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  Check out the following tutorial that teaches you how to become a popular MySQL blog author: Complete strip: tales-of-the-trade-make-your-mysql-blog-popular-full.png
  </p>

  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/problems-with-mmm-for-mysql/">Problems with MMM for MySQL</a></h2>

    <div class="post-meta">

  <div>

    <time>16 May 2011</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blogcategories/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blogtags/high-availability">High availability</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blogtags/replication">Replication</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>I recently encountered troubling issues with MMM for MySQL deployments, leading me to the decision to cease using it on production.</p>
<p>At the very same day I started writing about it, Baron published <a href="http://www.xaprb.com/blog/2011/05/04/whats-wrong-with-mmm/">What&rsquo;s wrong with MMM?</a>. I wish to present the problems I encountered and the reasons I find MMM is flawed. In a period of two weeks, two different deployments presented me with <strong>4</strong> crashes, in <strong>3</strong> different scenarios.</p>
<p>In all the following scenarios, there is an Active/Passive Master-Master deployment, with one VIP (virtual IP) set for <em>writer</em> role, one VIP set for <em>reader</em> role.</p>
<h4>Problem #1: unjustified failover, broken replication</h4>
<p>Unjustified failover must be the common scenario. It&rsquo;s also a scenario I can live with. A few seconds of downtime are OK with me once in a couple of months.</p>
<p>But on two different installations, a few days apart, I had two seemingly unjustified failovers followed by a troubling issue: replication got broken.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/problems-with-mmm-for-mysql/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/pop-quiz-answered-what-would-be-the-results-of-the-following-queries/">Pop quiz answered: &#34;what would be the results of the following queries?&#34;</a></h2>

    <div class="post-meta">

  <div>

    <time>12 May 2011</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blogcategories/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blogtags/sql">SQL</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>The quiz presented poses with an uncommon, though valid SQL syntax: <em>one is allowed to use quoted name aliases</em>. Thus, it is valid to write:</p>
<blockquote>
<pre>SELECT Name AS &lsquo;n&rsquo;, Continent AS &lsquo;c&rsquo; FROM countries</pre>
</blockquote>
<p>But what does the above mean? Let&rsquo;s see the results of our three questions:</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/pop-quiz-answered-what-would-be-the-results-of-the-following-queries/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/pop-quiz-what-would-be-the-results-of-the-following-queries/">Pop quiz: what would be the results of the following queries?</a></h2>

    <div class="post-meta">

  <div>

    <time>12 May 2011</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blogcategories/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blogtags/sql">SQL</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>Here&rsquo;s a quiz for you. The real query I witnessed was very complicated. I&rsquo;ve simplified it, but kept a confusing alias. Can you answer the following three questions? Are they even valid?</p>
<p>Given the following <strong>countries</strong> table data:</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/pop-quiz-what-would-be-the-results-of-the-following-queries/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/impressions-from-mysql-conf-2011-part-iv/">Impressions from MySQL conf 2011, part IV</a></h2>

    <div class="post-meta">

  <div>

    <time>19 Apr 2011</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blogcategories/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blogtags/mysqlconf">mysqlconf</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blogtags/planet">Planet</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>This post concludes my impressions from some of the talks Iâ€™ve been to.</p>
<h4>Thursday</h4>
<ul>
<li><a href="http://en.oreilly.com/mysql2011/public/schedule/detail/17189">OQGRAPH: Dealing with Graphs and Hierarchies in Plain SQL</a> / <em>Antony Curtis (Blizzard Entertainment)</em></li>
</ul>
<p>I opened this day&rsquo;s sessions with a smile.</p>
<p>Antony Curtis and Arjen Lentz have authored the OQGraph storage engine a while back. I had every intention to try it out, but never got round to it. Which is why I was happy to find this session in the conference. OQGraph is a specialized engine, and comes to solve hierarchal or otherwise graph-related queries, such as: <em>&ldquo;who are the descendants of a given node&rdquo;</em>, <em>&ldquo;find a route from a to b&rdquo;</em>, etc. MySQL does not support the <strong>RECURSIVE</strong> syntax as Oracle does, and does not provide out-of-the-box solution for that.</p>
<p>The syntax is just excellent: you just write something like <strong>SELECT * FROM my_graph WHERE from_node = &lsquo;empusa fasciata&rsquo; AND to_node = &lsquo;homo sapiens&rsquo;</strong> to find a route. Otherwise just use <strong>WHERE from_node = &lsquo;Heathrow Central&rsquo;</strong> to find all outgoing links. So this is just plain old SQL, no new syntax involved.</p>
<p>I rounded corners. It is also possible (and required) to specify an algorithm. Do you want Djekstra? BFS? You specify it in the query. The result of a route query is a rowset, where each row is a step in the route, along with its sequence within the route. So you can do your <strong>ORDER BY</strong>, <strong>LIMIT</strong> etc. I find that syntax-wise, <em>OQGraph</em> is very intuitive!</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/impressions-from-mysql-conf-2011-part-iv/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/impressions-from-mysql-conf-2011-part-iii-bof-replication/">Impressions from MySQL conf 2011, part III: BoF Replication</a></h2>

    <div class="post-meta">

  <div>

    <time>19 Apr 2011</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blogcategories/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blogtags/mysqlconf">mysqlconf</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blogtags/replication">Replication</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>This post continues my impressions from some of the talks I&rsquo;ve been to. I&rsquo;ll dedicate this post to a single session.</p>
<h4>Wednesday</h4>
<ul>
<li>BoF: Replication, Lars Thalmann<em>, </em>Mat Keep<em> (Oracle)</em></li>
</ul>
<p>Lars Thallman presented the MySQL 5.5 replication features, as well as the expected 5.6 features. Among other features, one could notice parallel replication, binlog checksums, sub-second resolution and more. There was an open discussion about these features, asking for comments; looking for new ideas and suggestion from the audience.</p>
<p>I can&rsquo;t possibly cover it all. I&rsquo;ll note two discussion I participated in, and which have interested me. This also serves for noting down to myself my ideas and thoughts.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/impressions-from-mysql-conf-2011-part-iii-bof-replication/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/impressions-from-mysql-conf-2011-part-ii/">Impressions from MySQL conf 2011, part II</a></h2>

    <div class="post-meta">

  <div>

    <time>17 Apr 2011</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blogcategories/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blogtags/mysqlconf">mysqlconf</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>This post continues my impressions from some of the talks I&rsquo;ve been to.</p>
<h4>Wednesday</h4>
<ul>
<li><a href="http://en.oreilly.com/mysql2011/public/schedule/detail/19732">Replication for Availability &amp; Durability with MySQL and Amazon RDS</a> / <em>Grant McAlister (Amazon.com)</em></li>
</ul>
<p>Grant McAlister described the Amazon RDS offer, which provides with a pre-installed MySQL servers, and supports auto management of replication and high availability. He desribed asynchronous vs. synchronous replication, logical (i.e log shipping &amp; replaying) vs. physical replication.</p>
<p>Amazon implement physical replication by shipping data pages to a secondary, standby server, located at a different availability zone. A transaction does not complete before pages are shipped to, and acknowledged by standby machine. The standby machine writes data pages in parallel. This is similar in concept to DRBD. RDS uses InnoDB, which promises data integrity in case of power/network failure.</p>
<p>The fail over process, in case active master has crashed, involves blocking access to the active master, starting MySQL on standby master (promoted to be active), while changing elastic IP for master to point to promoted master. McAlister said this process takes a few minutes. Live demo resulted at about <strong>4</strong> minutes.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/impressions-from-mysql-conf-2011-part-ii/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  

  


<nav class="pagination" role="pagination">
  
  <a href="/page/21/"><i class="fa fa-chevron-left"></i></a>
  
  <span>&nbsp;22 / 38&nbsp;</span>
  
  <a href="/page/23/"><i class="fa fa-chevron-right"></i></a>
  
</nav>



</div>

</div>
</div>
<script src="/blogjs/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'Your Google Analytics tracking ID', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

