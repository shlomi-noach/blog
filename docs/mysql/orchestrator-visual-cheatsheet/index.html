<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.16" />

  <title>Orchestrator visual cheatsheet &middot; code.openark.org</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/blog/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/blog/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="/blog/img/favicon.ico" type="image/x-icon" />


  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <a class="pure-menu-heading brand" href="/blog">openark.org</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/page/about"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">
    <li class="pure-menu-item">
      <a class="pure-menu-link">
        Shlomi Noach
        
          <div class="avatar-container">
        	  <div class="avatar-img-border">
                <img class="avatar-img" src="/blog/images/shlomi-noach.png" alt="code.openark.org" />
        	  </div>
        	</div>
        
      </a>
    </li>

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/shlomi-noach" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/ShlomiNoach" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/shlominoach" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>





  <div>
  <div class="small-print">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">

<div class="header-post">
  <div>code.openark.org</div>
</div>

<div class="header">
  <h1>Orchestrator visual cheatsheet</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>

    <time>05 Jun 2015</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/orchestrator">orchestrator</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/replication">Replication</a>
          
        </span>
      
    
  </div>

</div>


  <p><strong><a href="https://github.com/outbrain/orchestrator">Orchestrator</a></strong> is growing. Supporting automatic detection of topologies, simple refactoring of topology trees, complex refactoring via Pseudo-GTID, failure detection and automated discovery, it is becoming larger and larger by the day.</p>
<p>One of the problems with growign projects is hwo to properly document them. Orchestrator enjoys <a href="https://github.com/outbrain/orchestrator/wiki/Orchestrator-Manual">a comprehensive manual</a>, but as these get more and more detailed, it is becoming difficult to get oriented and pointed in the right direction. I've done my best to advise the simple use cases throughout the manual.</p>
<p>One thing that is difficult to put into words is topologies. Explaining "failover of an intermediate master S1 that has S2,...,Sn slaves onto a sibling of S1 provided that..." is too verbose. So here's a quick visual cheatsheet for (current) topology refactoring commands. Refactoring commands are a mere subset of overall orchestrator commands, but they're great to play with and perfect for visualization.</p>
<p>The "move" and related commands use normal replication commands (STOP SLAVE; CHANGE MASTER TO; START SLAVE UNTIL;"...).</p>
<p>The "match" and related commands utilize Pseudo-GTID and use more elaborate MySQL commands (SHOW BINLOG EVENTS, SHOW RELAYLOG EVENTS).</p>
<p>So without further ado, here's what each command does (and do run "orchestrator" from the command line to get a man-like explanation of everything, or just <a href="https://github.com/outbrain/orchestrator/wiki/Orchestrator-Manual#executing-via-command-line">go to the manual</a>).<!--more--></p>
<blockquote><a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-7.png"><img class="alignnone size-full wp-image-7251" src="/blog/assets/orchestrator-cheatsheet-visualized-7.png" alt="orchestrator-cheatsheet-visualized-7" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-8.png"><img class="alignnone size-full wp-image-7252" src="/blog/assets/orchestrator-cheatsheet-visualized-8.png" alt="orchestrator-cheatsheet-visualized-8" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-9.png"><img class="alignnone size-full wp-image-7253" src="/blog/assets/orchestrator-cheatsheet-visualized-9.png" alt="orchestrator-cheatsheet-visualized-9" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-10.png"><img class="alignnone size-full wp-image-7254" src="/blog/assets/orchestrator-cheatsheet-visualized-10.png" alt="orchestrator-cheatsheet-visualized-10" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-11.png"><img class="alignnone size-full wp-image-7255" src="/blog/assets/orchestrator-cheatsheet-visualized-11.png" alt="orchestrator-cheatsheet-visualized-11" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-12.png"><img class="alignnone size-full wp-image-7256" src="/blog/assets/orchestrator-cheatsheet-visualized-12.png" alt="orchestrator-cheatsheet-visualized-12" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-13.png"><img class="alignnone size-full wp-image-7257" src="/blog/assets/orchestrator-cheatsheet-visualized-13.png" alt="orchestrator-cheatsheet-visualized-13" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-1.png"><img class="alignnone size-full wp-image-7245" src="/blog/assets/orchestrator-cheatsheet-visualized-1.png" alt="orchestrator-cheatsheet-visualized-1" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-2.png"><img class="alignnone size-full wp-image-7246" src="/blog/assets/orchestrator-cheatsheet-visualized-2.png" alt="orchestrator-cheatsheet-visualized-2" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-3.png"><img class="alignnone size-full wp-image-7247" src="/blog/assets/orchestrator-cheatsheet-visualized-3.png" alt="orchestrator-cheatsheet-visualized-3" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-4.png"><img class="alignnone size-full wp-image-7248" src="/blog/assets/orchestrator-cheatsheet-visualized-4.png" alt="orchestrator-cheatsheet-visualized-4" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-5.png"><img class="alignnone size-full wp-image-7249" src="/blog/assets/orchestrator-cheatsheet-visualized-5.png" alt="orchestrator-cheatsheet-visualized-5" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-6.png"><img class="alignnone size-full wp-image-7250" src="/blog/assets/orchestrator-cheatsheet-visualized-6.png" alt="orchestrator-cheatsheet-visualized-6" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-14.png"><img class="alignnone size-full wp-image-7258" src="/blog/assets/orchestrator-cheatsheet-visualized-14.png" alt="orchestrator-cheatsheet-visualized-14" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-15.png"><img class="alignnone size-full wp-image-7259" src="/blog/assets/orchestrator-cheatsheet-visualized-15.png" alt="orchestrator-cheatsheet-visualized-15" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-16.png"><img class="alignnone size-full wp-image-7260" src="/blog/assets/orchestrator-cheatsheet-visualized-16.png" alt="orchestrator-cheatsheet-visualized-16" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-17.png"><img class="alignnone size-full wp-image-7261" src="/blog/assets/orchestrator-cheatsheet-visualized-17.png" alt="orchestrator-cheatsheet-visualized-17" width="720" height="405" /></a><br />
<a href="http://code.openark.org/blog/wp-content/uploads/2015/06/orchestrator-cheatsheet-visualized-18.png"><img class="alignnone size-full wp-image-7262" src="/blog/assets/orchestrator-cheatsheet-visualized-18.png" alt="orchestrator-cheatsheet-visualized-18" width="720" height="405" /></a></blockquote>

  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="/blog/mysql/awesome-mysql-curated-list-created-open-for-pull-requests/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="/blog/mysql/awesome-mysql-curated-list-created-open-for-pull-requests/">&#34;awesome-mysql&#34; curated list created, open for pull requests</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="/blog/mysql/what-makes-a-mysql-server-failurerecovery-case/">What makes a MySQL server failure/recovery case?</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="/blog/mysql/what-makes-a-mysql-server-failurerecovery-case/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'Your Disqus shortname';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

</div>
</div>
<script src="/blog/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'Your Google Analytics tracking ID', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

