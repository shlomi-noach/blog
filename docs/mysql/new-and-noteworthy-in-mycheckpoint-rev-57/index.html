<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.16" />

  <title>New and noteworthy in mycheckpoint (rev. 57) &middot; code.openark.org</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/blog/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/blog/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="/blog/img/favicon.ico" type="image/x-icon" />


  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <a class="pure-menu-heading brand" href="/blog">openark.org</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/page/about"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/shlomi-noach" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/ShlomiNoach" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/shlominoach" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    <li class="pure-menu-item">
      <a class="pure-menu-link avatar">
        
          <div class="avatar-container">
            <div class="avatar-img-border">
              <img class="avatar-img" src="/blog/images/shlomi-noach.png" alt="code.openark.org" />
            </div>
          </div>
        
        Shlomi Noach
      </a>
    </li>

  </ul>
</div>





  <div>
  <div class="small-print">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">

<div class="header-post">
  <div>code.openark.org</div>
</div>

<div class="header">
  <h1>New and noteworthy in mycheckpoint (rev. 57)</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>

    <time>16 Dec 2009</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/monitoring">Monitoring</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/mycheckpoint">mycheckpoint</a>
          
        </span>
      
    
  </div>

</div>


  <p>Rev. 57 of <a href="http://code.openark.org/forge/mycheckpoint">mycheckpoint</a> has been released and is available for <a href="http://code.google.com/p/mycheckpoint/">download</a>.</p>
<p>New and updated in this revision:</p>
<ul>
<li><a href="#Remote host monitoring">Remote host monitoring</a></li>
<li><a href="#Improved charting">Improved charting</a></li>
<li><a href="#Flexible charting">Flexible charting</a></li>
<li><a href="#Fix to questions vs. queries issues">Fix to questions vs. queries issues</a></li>
</ul>
<p><a name="Remote host monitoring"></a></p>
<h4>Remote host monitoring</h4>
<p>It is now possible to monitor one host, while writing into another. Either or both could be remote hosts:</p>
<blockquote>
<pre>mycheckpoint --host=localhost --monitored-host=192.168.10.178</pre>
</blockquote>
<p>The above monitors the MySQL server on 192.168.10.178, and writes down to localhost (to be queried later)</p>
<blockquote>
<pre>mycheckpoint --monitored-host=127.0.0.1 --host=192.168.10.178</pre>
</blockquote>
<p>The above monitors the MySQL server on 127.0.0.1, and writes down to 192.168.10.178.</p>
<p><!--more-->As result of the above addition, binary logging for monitoring statements are now enabled by default. The previous solution, in which binary logging were disabled by default and the same schema was utilized by different servers was far from being a clean solution. <em>[Read more on <a href="http://code.openark.org/forge/mycheckpoint/documentation/remote-multiple-hosts">Remote &amp; multiple hosts</a> monitoring]</em></p>
<p><a name="Improved charting"></a></p>
<h4>Improved charting</h4>
<p>The google charts reports have been improved significantly. Here's how:</p>
<blockquote><img class="size-full wp-image-1702" title="Before" src="/blog/assets/chart-old-sample11.png" alt="Before" width="400" height="200" /><img class="size-full wp-image-1703" title="After" src="/blog/assets/chart-new-sample1.png" alt="After" width="400" height="200" /><br />
<strong>Before</strong> on left (or above), <strong>After</strong> on right (or below)</blockquote>
<p>And</p>
<blockquote><img class="size-full wp-image-1708" title="Before" src="/blog/assets/chart-old-sample2.png" alt="Before" width="400" height="200" /><img class="size-full wp-image-1709" title="After" src="/blog/assets/chart-new-sample2.png" alt="After" width="400" height="200" /><br />
<strong>Before</strong> on left (or above), <strong>After</strong> on right (or below)</blockquote>
<p><em>Recap</em>: the charts are not stored anywhere; they are being calculated and generated by SQL queries &amp; views, based on the raw data. For example, to generate the above, I do:</p>
<blockquote>
<pre>SELECT innodb_estimated_log_mb_written_per_hour FROM sv_report_chart_sample\G
*************************** 1. row ***************************
innodb_estimated_log_mb_written_per_hour: http://chart.apis.google.com/chart?cht=lc&amp;chs=400x200&amp;chts=303030,12&amp;chtt=Latest+24+hours:+Dec+8,+08:20++-++Dec+9,+08:20&amp;chdl=innodb_estimated_log_mb_written_per_hour&amp;chdlp=b&amp;chco=ff8c00&amp;chd=s:OQOTSPPQPSROUQMTRSQTPSURQTQQPSOSRTRRUTRRTSRRRSRSTRRQSURSUVRRXQTVRUTTVUTOYTXSYTTSYUSUTWUPRRPQSQRQTPPSPQMPPQOQMQPMOMOLQORNNPNRNNOPQOOMQQPNRNMNORQMSTQQPTPRUQVQTTVSURUVVVSSSVWQVUSTVSWSSUURWRVRTWdotpQNROPQRPQQMPLRO9PWNRPNNNPXUMLNNPQQPSONPLLNWXZTQROSQMOONQPLJNOOQQKMPSMMPLfPSSSRTUQSORSSRSPNRSQSQ&amp;chxt=x,y&amp;chxr=1,0,2708.0&amp;chxl=0:|09:00||||13:00||||17:00||||21:00||||01:00||||05:00||||&amp;chxs=0,505050,10&amp;chg=4.17,25,1,3,2.78,0&amp;chxp=0,2.78,6.95,11.12,15.29,19.46,23.63,27.80,31.97,36.14,40.31,44.48,48.65,52.82,56.99,61.16,65.33,69.50,73.67,77.84,82.01,86.18,90.35,94.52,98.69</pre>
</blockquote>
<p>If you thought I was going over the edge in <a href="http://code.openark.org/blog/mysql/auto-scaling-scaled-sql-graphs-concluded">Auto scaling, scaled SQL graphs concluded</a> or <a href="http://code.openark.org/blog/mysql/sql-pie-chart">SQL pie chart</a>, allow me to assure you: generation of the above charts using SQL &amp; views is <em>SQL blasphemy</em>. While cool, the Google Charts API does not do too much on its own, and expects the caller to do the math for putting in the grids, scales and labels (and though all of them are tightly related, they must all be explicitly specified). I'll write a later post on this.</p>
<p><a name="Flexible charting"></a></p>
<h4>Flexible charting</h4>
<p>A new table, called <strong>charts_api</strong>, is introduced. It contains one row, which lists charting configuration.</p>
<blockquote>
<pre>SELECT * FROM charts_api;
+-------------+--------------+----------------------------------------------------------------+------------------------------------+
| chart_width | chart_height | simple_encoding                                                | service_url                        |
+-------------+--------------+----------------------------------------------------------------+------------------------------------+
|         400 |          200 | ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 | http://chart.apis.google.com/chart |
+-------------+--------------+----------------------------------------------------------------+------------------------------------+</pre>
</blockquote>
<p>To change generated charts dimensions, simply update <strong>chart_width</strong> or <strong>chart_height</strong>.</p>
<p>To use other chart APIs, update <strong>service_url</strong>. I've tried out <a href="http://www.jfree.org/eastwood/">Eastwood Charts</a>, a Java-based service, which implements the Google Charts API. There's still some stuff missing, such as the positioning of labels and grids; and it's slightly less polished (but configurable). But if you're concerned about sending requests to Google, it's a viable alternative.</p>
<p>So, drop the WAR file into your <a href="http://tomcat.apache.org/">Tomcat</a> / <a href="http://www.jboss.org/">JBoss</a> / other j2ee server, then follow <strong>http://127.0.0.1/eastwood/chart?</strong>...</p>
<p><a name="Fix to questions vs. queries issues"></a></p>
<h4>Fix to questions vs. queries issues</h4>
<p><em>mycheckpoint</em> now correctly identifies whether to use <a href="http://code.openark.org/blog/mysql/questions-or-queries">questions or queries</a> when analyzing DML queries. If you got some <strong>570%</strong> for <strong>com_update</strong> out of total queries and wondered about it, it should now be resolved to normal values.</p>
<h4>On upgrading your current installation</h4>
<ol>
<li>Download &amp; install via debian or python installers</li>
<li>Issue <em>mycheckpoint</em> once with "deploy" as argument</li>
<li>Done</li>
</ol>
<h4>Future plans</h4>
<p>I'm working on 24x7 charting; minimal operating system monitoring; auto-detection and auto-deploy on version upgrade; and more.</p>
<p>Stay tuned!</p>

  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="/blog/mysql/in-favour-of-a-milestone-based-release-model/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="/blog/mysql/in-favour-of-a-milestone-based-release-model/">In favour of a milestone based release model</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="/blog/mysql/passwords-which-are-bad-for-your-health/">Passwords which are bad for your health</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="/blog/mysql/passwords-which-are-bad-for-your-health/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'code-openark-org-blog';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

</div>
</div>
<script src="/blog/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'Your Google Analytics tracking ID', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

