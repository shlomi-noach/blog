<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Installation on code.openark.org</title>
    <link>/blog/tags/installation/</link>
    <description>Recent content in Installation on code.openark.org</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2016. All rights reserved.</copyright>
    <lastBuildDate>Tue, 11 Sep 2012 08:48:13 +0000</lastBuildDate>
    <atom:link href="/blog/tags/installation/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>How common_schema installs itself</title>
      <link>/blog/mysql/how-common_schema-installs-itself/</link>
      <pubDate>Tue, 11 Sep 2012 08:48:13 +0000</pubDate>
      
      <guid>/blog/mysql/how-common_schema-installs-itself/</guid>
      <description>&lt;p&gt;Up till &lt;a href=&#34;http://code.google.com/p/common-schema/&#34;&gt;common_schema&lt;/a&gt; version &lt;strong&gt;1.1&lt;/strong&gt;, the user would need to choose from distinct distribution files: an install compatible with MySQL &lt;strong&gt;5.1&lt;/strong&gt;, one compatible with InnoDB Plugin enabled servers, and one compatible with Percona Server. The difference between the three is the availability of certain &lt;strong&gt;INFORMATION_SCHEMA&lt;/strong&gt; tables.&lt;/p&gt;
&lt;p&gt;With &lt;strong&gt;1.1&lt;/strong&gt;, this is no longer the case: &lt;em&gt;common_schema&lt;/em&gt; auto-detects the server and available feature set, and installs accordingly.&lt;/p&gt;
&lt;h4&gt;Wait, isn&#39;t common_schema just a SQL file?&lt;/h4&gt;
&lt;p&gt;Yes. It&#39;s not like there&#39;s an installer like &lt;em&gt;InstallShield&lt;/em&gt; or anything. Nevertheless, &lt;em&gt;common&lt;/em&gt;&lt;em&gt;_schema&lt;/em&gt; offers a smart way of conditional handling, which is uses in itself. It&#39;s called &lt;a href=&#34;http://www.queryscript.com/&#34;&gt;QueryScript&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;common_schema&lt;/em&gt; is installed by importing the SQL file (via &lt;strong&gt;SOURCE&lt;/strong&gt; command; the &lt;em&gt;mysql&lt;/em&gt; client; your favorite GUI). This creates your usual tables, views and routines. But some of these routines make for an interpreter for &lt;em&gt;QueryScript&lt;/em&gt;. Somewhere along the installation process (remember - it&#39;s just a SQL import), &lt;em&gt;common_schema&lt;/em&gt; switches over to executing scripts to manage the installation. In particular, there are a few views which depend on optional tables, such as InnoDB Plugin&#39;s tables for &lt;strong&gt;INFORMATION_SCHEMA&lt;/strong&gt;.&lt;!--more--&gt;&lt;/p&gt;
&lt;p&gt;Consider the following &lt;strong&gt;CREATE VIEW&lt;/strong&gt; statement:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;CREATE OR REPLACE
ALGORITHM = UNDEFINED
SQL SECURITY INVOKER
VIEW innodb_transactions_summary AS
  SELECT 
    COUNT(*) AS count_transactions,
    IFNULL(SUM(trx_state = &#39;RUNNING&#39;), 0) AS running_transactions,
    IFNULL(SUM(trx_requested_lock_id IS NOT NULL), 0) AS locked_transactions,
    COUNT(DISTINCT trx_requested_lock_id) AS distinct_locks
  FROM 
    &lt;strong&gt;INFORMATION_SCHEMA.INNODB_TRX&lt;/strong&gt;
  WHERE 
    trx_mysql_thread_id != CONNECTION_ID()
;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;Such a statement would fail the import if the underlying tables (&lt;strong&gt;INFORMATION_SCHEMA.INNODB_TRX&lt;/strong&gt; in our example) do not actually exist. Which is why this &lt;strong&gt;CREATE&lt;/strong&gt; statement is not invoked just like that. It is wrapped within a script:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;set @script := &#34;
  set &lt;strong&gt;@common_schema_innodb_plugin_expected := 0&lt;/strong&gt;;
  &lt;strong&gt;try&lt;/strong&gt; {
    set &lt;strong&gt;@common_schema_innodb_plugin_expected&lt;/strong&gt; := @common_schema_innodb_plugin_expected + 1; 

    &lt;strong&gt;CREATE VIEW&lt;/strong&gt; ... (as above)

    set &lt;strong&gt;@common_schema_innodb_plugin_installed&lt;/strong&gt; := @common_schema_innodb_plugin_installed + 1;
  }
  &lt;strong&gt;catch&lt;/strong&gt; {
  }
&#34;;

call run(@script);&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;I really want to stress this: this is a &lt;a href=&#34;http://common-schema.googlecode.com/svn/trunk/common_schema/doc/html/query_script_try_catch.html&#34;&gt;&lt;strong&gt;try-catch&lt;/strong&gt;&lt;/a&gt; statement running from within your MySQL server. &lt;em&gt;QueryScript&lt;/em&gt; accepts this statement and behaves very similarly to the way you are used to with your favorite programming language.&lt;/p&gt;
&lt;p&gt;If the &lt;strong&gt;CREATE VIEW&lt;/strong&gt; cannot be fulfilled, an error is generated. But instead of failing the entire script, it is caught by the &lt;strong&gt;catch&lt;/strong&gt;clause; the &#34;&lt;strong&gt;set @common_schema_innodb_plugin_installed :=&lt;/strong&gt; ...&#34; line is never executed upon such error.&lt;/p&gt;
&lt;p&gt;Upon &lt;strong&gt;CREATE VIEW&lt;/strong&gt; failure, &lt;strong&gt;@common_schema_innodb_plugin_installed&lt;/strong&gt; falls short of &lt;strong&gt;@common_schema_innodb_plugin_expected&lt;/strong&gt; and&lt;strong&gt; &lt;/strong&gt;. By the end of installation process, the two are compared, so as to determine the install success:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;+-----------------------------------------------------------+
| complete                                                  |
+-----------------------------------------------------------+
| - Base components: &lt;strong&gt;installed&lt;/strong&gt;                              |
| - InnoDB Plugin components: &lt;strong&gt;installed&lt;/strong&gt;                     |
| - Percona Server components: &lt;strong&gt;not installed&lt;/strong&gt;                |
|                                                           |
| Installation complete. Thank you for using common_schema! |
+-----------------------------------------------------------+&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;h4&gt;Can&#39;t you just use &#34;mysql --force&#34;?&lt;/h4&gt;
&lt;p&gt;So, one can import a SQL file using &lt;strong&gt;mysql --force&lt;/strong&gt;, which does nto break down on first sight of error, but continues to next statements.&lt;/p&gt;
&lt;p&gt;True, but:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I don&#39;t want to ask that of the user.&lt;/li&gt;
&lt;li&gt;It won&#39;t give me a status on &lt;em&gt;what went wrong&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;By using &lt;em&gt;QueryScript&lt;/em&gt;&#39;s &lt;strong&gt;try-catch&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I can take alternate action on failure.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;common_schema&lt;/em&gt; can (and does) inform the user at the end of installation process which components are installed and which are not.&lt;/li&gt;
&lt;li&gt;It can (and does) write this info down to a &lt;em&gt;metadata&lt;/em&gt; table such that I can ask the user for that information when submitting a bug report.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Eat your own dog food!&lt;/em&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Installing MySQL from source/binary tarball as a Linux service</title>
      <link>/blog/mysql/installing-mysql-from-sourcebinary-tarball-as-a-linux-service/</link>
      <pubDate>Tue, 01 May 2012 10:10:10 +0000</pubDate>
      
      <guid>/blog/mysql/installing-mysql-from-sourcebinary-tarball-as-a-linux-service/</guid>
      <description>&lt;p&gt;I&#39;ve &lt;a href=&#34;http://code.openark.org/blog/mysql/to-not-yum-or-to-not-apt-get&#34;&gt;written before&lt;/a&gt; I prefer to do a manual install of MySQL over a repository one. I still do: I typically install from binary tarball or by compiling from source.&lt;/p&gt;
&lt;p&gt;I&#39;d like to share my setup procedure for Linux installation and service setup. I&#39;ve done this dozens of times, on different Linux flavors, and it works well for me.&lt;/p&gt;
&lt;h4&gt;Installing from source&lt;/h4&gt;
&lt;p&gt;To get this straight: you sometimes have to compile the source files. I, for example, happen to use the Sphinx MySQLSE extension. You can only use it if compiled with MySQL. You had to compile a &#34;vanilla&#34; &lt;strong&gt;5.1&lt;/strong&gt; version without query cache in order to completely remove the cache&#39;s mutex contention.&lt;/p&gt;
&lt;p&gt;Anyway, I find the easiest way is to install onto a path associated with the server version. For example, I would install a &lt;strong&gt;5.5&lt;/strong&gt; server onto &lt;strong&gt;/usr/local/mysql55&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This way, a new version gets its own path, and no ambiguity.&lt;/p&gt;
&lt;p&gt;To do that, use the &lt;strong&gt;prefix&lt;/strong&gt; option on configuration step:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;cd /path/to/extracted/source/tarball
sh BUILD/autorun.sh
./configure --prefix=/usr/local/mysql55
make
sudo make install&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;Once this is complete, you have &lt;em&gt;everything&lt;/em&gt; under &lt;strong&gt;/usr/local/mysql55&lt;/strong&gt;. This means binaries, libraries, scripts, etc.&lt;/p&gt;
&lt;p&gt;To install the MySQL server as a service, copy the mysql.server script to &lt;strong&gt;/etc/init.d&lt;/strong&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;sudo cp /usr/local/mysql55/support-files/mysql.server /etc/init.d/mysql55&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;Again, I&#39;m naming the script after the MySQL version. This avoids conflict with possible past or future installations of the MySQL server, which typically create a service named &lt;strong&gt;mysql&lt;/strong&gt; or &lt;strong&gt;mysqld&lt;/strong&gt;.&lt;!--more--&gt;&lt;/p&gt;
&lt;p&gt;A thing to note about the mysql.server script is that it allows you (at around line &lt;strong&gt;#45&lt;/strong&gt;) to set two variables:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;basedir&lt;/strong&gt;: path to your installation directory. When compiling from source this is already setup with the path provided to the &lt;strong&gt;configure&lt;/strong&gt; script. Thus, in our example, you can expect this variable to read &lt;strong&gt;/usr/local/mysql55&lt;/strong&gt;. So basically nothing to do here.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;datadir&lt;/strong&gt;: path to your data directory. If you&#39;re putting your &lt;strong&gt;my.cnf&lt;/strong&gt; file in &lt;strong&gt;/etc&lt;/strong&gt; or &lt;strong&gt;/etc/mysql&lt;/strong&gt;, then setting &lt;strong&gt;datadir&lt;/strong&gt; in &lt;strong&gt;my.cnf&lt;/strong&gt; suffices. However, if you&#39;re going to put &lt;strong&gt;my.cnf&lt;/strong&gt; itself on the data directory (e.g. so as to avoid collisions) then make sure to set the variable in the &lt;strong&gt;mysql.server&lt;/strong&gt; init script.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Depending on your &lt;strong&gt;$PATH&lt;/strong&gt; configuration, it is also a good idea to specify &lt;strong&gt;basedir&lt;/strong&gt; variable on your &lt;strong&gt;my.cnf&lt;/strong&gt;&#39;s &lt;strong&gt;[mysqld]&lt;/strong&gt; section.&lt;/p&gt;
&lt;p&gt;Which leads us to &lt;strong&gt;$PATH&lt;/strong&gt;: your linux system is still unaware of the many binaries you&#39;ve got in there. I typically add the following line at the end of &lt;strong&gt;/etc/bash.bashrc&lt;/strong&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;export PATH=/usr/local/mysql55:${PATH}&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is the most global PATH settings one can do. Alternatively, use &lt;strong&gt;/etc/profile&lt;/strong&gt;, &lt;strong&gt;~/.bashrc&lt;/strong&gt; etc. (you may have noticed by now I&#39;m working with &lt;strong&gt;bash&lt;/strong&gt;).&lt;/p&gt;
&lt;p&gt;Finally, need to setup the init script to run at startup and stop at shutdown.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;On Debian/Ubuntu/related I use &lt;strong&gt;rcconf&lt;/strong&gt; (I&#39;m too lazy to remember the command line setup).&lt;/li&gt;
&lt;li&gt;On RedHat/CentOS/related I use &lt;strong&gt;chkconfig --add mysql55&lt;/strong&gt;, or  &lt;strong&gt;linuxconf&lt;/strong&gt; (since I&#39;m lazy).&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Installing from binary tarball&lt;/h4&gt;
&lt;p&gt;The only difference is that the &lt;strong&gt;mysql.server&lt;/strong&gt; script is unaware of our deployment path. So the &lt;strong&gt;basedir&lt;/strong&gt; variable must be set in that file. Other than that, follow same steps as for source installation (oh, of course no need to &lt;strong&gt;configure&lt;/strong&gt; &amp;amp; &lt;strong&gt;make&lt;/strong&gt;...).&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Guide to MySQL installation files</title>
      <link>/blog/mysql/guide-to-mysql-installation-files/</link>
      <pubDate>Wed, 01 Dec 2010 12:27:14 +0000</pubDate>
      
      <guid>/blog/mysql/guide-to-mysql-installation-files/</guid>
      <description>&lt;p&gt;Even for DBAs already familiar with MySQL, the choice of installation methods and the variety of install/package files is overwhelming and confusing.&lt;/p&gt;
&lt;p&gt;I&#39;ll make a (very!) brief introduction to the various installation options, concentrating on the Linux operating system, and provide with a simple shopping list.&lt;/p&gt;
&lt;p&gt;For illustration, I&#39;ll refer to the MySQL &lt;strong&gt;5.1.52&lt;/strong&gt; community edition, the latest at the time of this writing. Downloads are available at &lt;a href=&#34;http://dev.mysql.com/downloads/mysql/5.1.html&#34;&gt;http://dev.mysql.com/downloads/mysql/5.1.html&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I will then refer to alternate distributions.&lt;/p&gt;
&lt;h4&gt;A note for Windows users&lt;/h4&gt;
&lt;p&gt;You are lucky: your choice is very clear. Download the Windows MSI package. Choose &lt;strong&gt;32&lt;/strong&gt; or &lt;strong&gt;64&lt;/strong&gt; bit architecture according to your OS. If you know about the other ways to install and setup MySQL under Windows, you don&#39;t need this post.&lt;/p&gt;
&lt;h4&gt;Linux: repositories&lt;/h4&gt;
&lt;p&gt;Easiest way to install MySQL on linux would be to use your distro&#39;s repository. Just:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;sudo apt-get install mysql-server-5.1&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;sudo yum install MySQL-Server-5.1&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;Your distro should resolve any package dependencies.&lt;/p&gt;
&lt;p&gt;I&#39;m in the opinion that if MySQL is the main application to be used on a server, distribution&#39;s default repositories are &lt;em&gt;not&lt;/em&gt; the way to go. Reasons include MySQL outdated version, incapability of installing multiple instance, danger of automatic upgrades or downgrades. Read &lt;a href=&#34;http://code.openark.org/blog/mysql/to-not-yum-or-to-not-apt-get&#34;&gt;this post and discussion&lt;/a&gt; that follows for more.&lt;/p&gt;
&lt;h4&gt;Linux: packages&lt;/h4&gt;
&lt;p&gt;If you&#39;re a RedHat/CentOS/SuSE user, you&#39;re in luck: MySQL provides pre-built RPM packages for your system. I vaguely remember MySQL announcing that Ubuntu is to be supported. That was a couple years ago; there is still no package for Debian/Ubuntu.&lt;/p&gt;
&lt;p&gt;&lt;!--more--&gt;So, assuming you&#39;re a RedHat/CentOs user, which packages should you download?&lt;/p&gt;
&lt;p&gt;There&#39;s over &lt;strong&gt;60&lt;/strong&gt; different RPMs available for download. I always need to stress my eyes to get it right. Here&#39;s the simple answer (again, if you know better, you don&#39;t need this post). Choose &lt;strong&gt;&#34;RedHat &amp;amp; Oracle Enterprise Linux&#34;&lt;/strong&gt;; download:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MySQL-client-community-5.1.52-1.rhel5.x86_64.rpm&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQL-server-community-5.1.52-1.rhel5.x86_64.rpm&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQL-shared-community-5.1.52-1.rhel5.x86_64.rpm&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQL-shared-compat-5.1.52-1.rhel5.x86_64.rpm&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The above assumes a RedHat/CentOS 5.x and a 64 bit Intel/AMD processor.&lt;/p&gt;
&lt;p&gt;The aforementioned post relays my opinion of using RPMs; these are still susceptible to &lt;strong&gt;yum&lt;/strong&gt;&#39;s whims. Be careful.&lt;/p&gt;
&lt;h4&gt;Linux: binary&lt;/h4&gt;
&lt;p&gt;Not afraid to install by hand? Want to avoid limitations introduced by pre-built packages? Download a binary distribution:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Choose &lt;strong&gt;&#34;Linux - Generic&#34;&lt;/strong&gt;. Downlaod &lt;strong&gt;mysql-5.1.52-linux-x86_64-glibc23.tar.gz&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This &lt;em&gt;tar.gz&lt;/em&gt; distribution includes server &amp;amp; client. It includes &lt;em&gt;glibc&lt;/em&gt; so it does not depend on your OS installed &lt;em&gt;glibc&lt;/em&gt; version (a pain to upgrade/downgrade as it is used by so many packages).&lt;/p&gt;
&lt;p&gt;You may still want to download and install the &lt;em&gt;shared-compat&lt;/em&gt; RPM package (see previous section) to have all possible libmysqlclientX.X packages installed.&lt;/p&gt;
&lt;h4&gt;Linux: source&lt;/h4&gt;
&lt;p&gt;If you got here, then you either know your way around (why do you keep reading?) or you have a good reason to use a source distribution.&lt;/p&gt;
&lt;p&gt;What good reason could that be?&lt;/p&gt;
&lt;p&gt;A more and more common reason is that you want to add something to MySQL. Sphinx search storage engine is such a common addition.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Choose &lt;strong&gt;&#34;Source Code&#34;&lt;/strong&gt;: download &lt;strong&gt;mysql-5.1.52.tar.gz&lt;/strong&gt; (Architecture Independent).&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Non MySQL downloads&lt;/h4&gt;
&lt;p&gt;You don&#39;t have to download the official MySQL distribution. Two good alternatives are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Percona Server; download from &lt;a href=&#34;http://www.percona.com/software/percona-server/&#34;&gt;http://www.percona.com/software/percona-server/&lt;/a&gt;. The Percona Server (a MySQL fork by &lt;a href=&#34;http://www.percona.com/&#34;&gt;Percona&lt;/a&gt;) is available in RPM, DEB, BSD, Binary, Source distributions. There are no Windows distributions.&lt;/li&gt;
&lt;li&gt;MariaDB, download from &lt;a href=&#34;http://askmonty.org/wiki/MariaDB:Download&#34;&gt;http://askmonty.org/wiki/MariaDB:Download&lt;/a&gt;. MariaDB is a MySQL fork by &lt;a href=&#34;http://mariadb.org/&#34;&gt;Montry Program AB&lt;/a&gt;, and is available for Windows, Linux, Solaris, in Source, Binary, RPM and DEB distributions.&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
    <item>
      <title>To not yum or to not apt-get?</title>
      <link>/blog/mysql/to-not-yum-or-to-not-apt-get/</link>
      <pubDate>Tue, 16 Feb 2010 13:44:25 +0000</pubDate>
      
      <guid>/blog/mysql/to-not-yum-or-to-not-apt-get/</guid>
      <description>&lt;p&gt;I&#39;ve &lt;a href=&#34;http://code.openark.org/blog/mysql/manually-installing-multiple-mysql-instances-on-linux-howto&#34;&gt;written&lt;/a&gt; shortly on this before. I like &lt;strong&gt;yum&lt;/strong&gt;; I love &lt;strong&gt;apt-get&lt;/strong&gt;; I prefer &lt;em&gt;not&lt;/em&gt; to use them for MySQL installations. I consider a binary tarball to be the best MySQL installation format (source installations being a different case altogether).&lt;/p&gt;
&lt;h4&gt;Why?&lt;/h4&gt;
&lt;p&gt;I use &lt;strong&gt;yum&lt;/strong&gt; and &lt;strong&gt;apt-get&lt;/strong&gt; whenever I can and for almost all needs (sometimes preferring CPAN for Perl installations). But on a MySQL machine, I avoid doing so. The reason is either dependency hell or dependency mismatch.&lt;/p&gt;
&lt;p&gt;Package managers are supposed to solve the dependency hell issue. But package managers will rarely have an up to date MySQL version.&lt;/p&gt;
&lt;p&gt;I&#39;ve had several experiences where a simple &lt;strong&gt;yum&lt;/strong&gt; installation re-installed the MySQL version. I&#39;ve had customers calling me up when, having installed something with &lt;strong&gt;yum&lt;/strong&gt;, MySQL would not work anymore.&lt;!--more--&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;yum install package-which-depends-on-mysql-server&lt;/strong&gt; will install MySQL server on your system if it hasn&#39;t been installed with &lt;strong&gt;yum&lt;/strong&gt;. Are you on CentOS &lt;strong&gt;5.0&lt;/strong&gt;? You&#39;ll get MySQL &lt;strong&gt;5.0.22&lt;/strong&gt;. Oh, did you already have a &lt;strong&gt;RPM&lt;/strong&gt; installation for MySQL &lt;strong&gt;5.0.81&lt;/strong&gt;? Sorry - it&#39;s just been &lt;em&gt;downgraded&lt;/em&gt;, plus &lt;em&gt;it won&#39;t work&lt;/em&gt; anymore since the error messages file has been changed since then.&lt;/p&gt;
&lt;p&gt;Don&#39;t press &#39;&lt;strong&gt;Y&lt;/strong&gt;&#39; too soon!&lt;/p&gt;
&lt;p&gt;Things are slightly better with &lt;strong&gt;apt-get&lt;/strong&gt;. I&#39;ve encountered less situations where &lt;strong&gt;mysql-server&lt;/strong&gt; was on the dependency list. Many times it&#39;s just the &lt;strong&gt;libmysqlclient&lt;/strong&gt; package or the &lt;strong&gt;mysql-common&lt;/strong&gt; one.&lt;/p&gt;
&lt;p&gt;But wait! Did you install &lt;strong&gt;mysql-common&lt;/strong&gt;? Bonus! You get the elusive &lt;strong&gt;/etc/mysql/my.cnf&lt;/strong&gt; file created, and there goes your server configuration. Future spawns of the MySQL server / clients will read from the wrong configuration file, and will probably fail to load.&lt;/p&gt;
&lt;p&gt;Not to mention neither will help you out with multiple instances installation.&lt;/p&gt;
&lt;h4&gt;My argument&lt;/h4&gt;
&lt;p&gt;A sys admin recently argued with me that it was wrong of me to have the entire machine set up with &lt;strong&gt;yum&lt;/strong&gt;, but have MySQL installed with binary tarball. He argued that it broke the entire setup. I expressed my opinion: &lt;em&gt;on a MySQL dedicated server, MySQL gets to be prioritized. It&#39;s special&lt;/em&gt;. It is the reason for the existence of the machine. I would imagine that same would hold for Apache on an Apache dedicated machine, for Sendmail on a Sendmail dedicated machine, etc. As a DBA, I want to have best control of the MySQL installation; I want to be able to upgrade minor versions quickly: I often find newer versions to solve bugs I was concerned with; I want to be able to install multiple instances; I want to be able to downgrade without having to remove and uninstall the previous version.&lt;/p&gt;
&lt;p&gt;I want to have control. World domination aside, that is.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>SphinxSE 0.9.9-RC2 bug workaround</title>
      <link>/blog/mysql/sphinxse-0-9-9-rc2-bug-workaround/</link>
      <pubDate>Mon, 07 Sep 2009 10:23:21 +0000</pubDate>
      
      <guid>/blog/mysql/sphinxse-0-9-9-rc2-bug-workaround/</guid>
      <description>&lt;p&gt;There is a serious bug with the sphinx storage engine, introduced in 0.9.9-RC2 (and which has not been fixed in latest revisions, as yet - last checked with rev 2006).&lt;/p&gt;
&lt;p&gt;I would usually just revert to an older version (0.9.9-RC1 does not contain this bug), but for the reason that RC2 introduces an important feature: the &lt;strong&gt;sphinx_snippets()&lt;/strong&gt; function, which allows for creation of snippets from within MySQL, and which makes the sphinx integration with MySQL complete, as far as the application is concerned.&lt;/p&gt;
&lt;h4&gt;The bug&lt;/h4&gt;
&lt;p&gt;The bug is described &lt;a href=&#34;http://sphinxsearch.com/forum/view.html?id=3589&#34;&gt;here&lt;/a&gt; and &lt;a href=&#34;http://sphinxsearch.com/forum/view.html?id=4081&#34;&gt;here&lt;/a&gt; (and see further discussions). Though it&#39;s claimed to have been fixed, it&#39;s been re-reported, and I&#39;ve tried quite a few revisions and verified it has not been fixed (tested on Debian/Ubuntu x64).  &lt;span&gt;Essentially, the bug does not allow you to set filters on a query issued from within the SphinxSE. For example, the following queries fail:&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;SELECT ... FROM ... WHERE query=&#39;python;mode=any;sort=relevance;limit=200;range=myUnixTimestamp,1249506000,1252184400;&#39;
SELECT ... FROM ... WHERE query=&#39;python;mode=any;sort=relevance;limit=200;filter=my_field,1;&#39;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;While the following query succeeds:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;SELECT ... FROM ... WHERE query=&#39;python;mode=any;sort=relevance;limit=200;&#39;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;The error message is this:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;span&gt;ERROR 1430 (HY000): There was a problem processing the query on the foreign data source. Data source error: searchd error: invalid or truncated request&lt;/span&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span&gt;I see this as a serious bug in the SphinxSE: it renders it useless; searching without the ability to filter is not something I can live with.&lt;!--more--&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h4&gt;&lt;span&gt;The motivation&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;&lt;span&gt;Sphinx does not store the actual text content. To get search results with snippets, you need to:&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span&gt;Ask sphinx for the documents ids&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;Get the content for those documents&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;Ask sphinx for snippets based on the provided content and search phrase.&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;With the introduction of the &lt;strong&gt;sphinx_snippets()&lt;/strong&gt; function, this can all be done with a single query, like this:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;SELECT my_docs.my_docs_id,  my_docs.publish_time,  CONVERT(sphinx_snippets(my_docs.id.content, &#39;my_docs_index&#39;, &#39;python&#39;) USING utf8) AS snippet  FROM tets.my_docs INNER JOIN test.my_docs_sphinx USING(my_docs_id) WHERE query=&#39;python;mode=any;sort=relevance;limit=200;range=publish_time_unix,1249506000,1252184400;&#39;;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span&gt;This is really a life saver; without this function, you need to get the resutls back to your application, then send the data again to MySQL, in which case you might altogether discard the SphinxSE and talk to sphinx directly. But with a single query you get to ask the results just as if you were asking for any result set from your database (with extra syntax).&lt;/span&gt;&lt;/p&gt;
&lt;h4&gt;&lt;span&gt;The workaround&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;&lt;span&gt;My setup is Percona&#39;s &lt;/span&gt;&lt;strong&gt;mysql-5.1.34-xtradb5&lt;/strong&gt; source, on Ubuntu server &lt;strong&gt;8.04 amd64&lt;/strong&gt;. The trick is to first compile MySQL with sphinx &lt;strong&gt;0.9.9-RC2&lt;/strong&gt;, in order to produce the &lt;strong&gt;sphinx.so&lt;/strong&gt; file (where the &lt;strong&gt;sphinx_snippets()&lt;/strong&gt; function is found), backup the &lt;strong&gt;sphinx.so&lt;/strong&gt; file, then recompile everything with &lt;strong&gt;sphinx 0.9.9-RC1&lt;/strong&gt;. The steps being:&lt;/p&gt;
&lt;p&gt;Compile MySQL with sphinx &lt;strong&gt;0.9.9-Rc2&lt;/strong&gt; (I choose to install MySQL on &lt;strong&gt;/usr/local/mysql51&lt;/strong&gt;):&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;tar xzfv mysql-5.1.34-xtradb5.tar.gz
cd mysql-5.1.34-xtradb5
cp -R /tmp/resources/sphinx-0.9.9-rc2/mysqlse storage/sphinx
sh BUILD/autorun.sh
./configure --with-plugins=innobase,sphinx --prefix=/usr/local/mysql51
make&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;This produces the &lt;strong&gt;sphinx.so&lt;/strong&gt;, &lt;strong&gt;sphinx.so.0&lt;/strong&gt;, &lt;strong&gt;sphinx.so.0.0.0&lt;/strong&gt; files. Back them up!&lt;/p&gt;
&lt;p&gt;Next, recompile with sphinx &lt;strong&gt;0.9.9-RC1&lt;/strong&gt;. I&#39;ve found that simple copying and recompiling doesn&#39;t work well. So just cleanup everything and start afresh:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;cd ..
rm -rf mysql-5.1.34-xtradb5
tar xzfv mysql-5.1.34-xtradb5.tar.gz
cd mysql-5.1.34-xtradb5
cp -R /tmp/resources/sphinx-0.9.9-rc1/mysqlse storage/sphinx
sh BUILD/autorun.sh
./configure --with-plugins=innobase,sphinx --prefix=/usr/local/mysql51
make
sudo make install&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;Copy the &lt;strong&gt;sphinx.so&lt;/strong&gt; files into the MySQL plugin directory (&lt;strong&gt;/usr/local/mysql51/lib/mysql/plugin&lt;/strong&gt; in our case).&lt;/p&gt;
&lt;p&gt;Then build sphinx (you must have MySQL includes for sphinx to compile, so this must be the second step):&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;cd /tmp/resources/sphinx-0.9.9-rc1/
./configure --prefix=/usr/local/sphinx --with-mysql=/usr/local/mysql51
make
sudo make install&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;Essentially, we&#39;re working now with &lt;strong&gt;0.9.9-RC1&lt;/strong&gt;, but the &lt;strong&gt;sphinx_snippets()&lt;/strong&gt; function is from the &lt;strong&gt;0.9.9-RC2&lt;/strong&gt; version, and happily no one bothers about this mix.&lt;/p&gt;
&lt;p&gt;I hope this helps.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Manually installing multiple MySQL instances on Linux: HOWTO</title>
      <link>/blog/mysql/manually-installing-multiple-mysql-instances-on-linux-howto/</link>
      <pubDate>Thu, 19 Feb 2009 08:02:00 +0000</pubDate>
      
      <guid>/blog/mysql/manually-installing-multiple-mysql-instances-on-linux-howto/</guid>
      <description>&lt;p&gt;Installing a single MySQL instance on a linux machine is a very simple operation. It may be as simple as:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;apt-get install mysql-server&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;But you cannot use this method to install another MySQL instance. Moreover, if you try to manually install another instance, you may find that some collisions occur.&lt;/p&gt;
&lt;p&gt;For example, when trying to install two 5.0 servers, apt-get or yum will just tell me &#34;package is already installed&#34;.&lt;/p&gt;
&lt;p&gt;When trying to install a new 5.1 server along with 5.0, an implicit upgrade is performed.&lt;/p&gt;
&lt;p&gt;But even if we try forcing the installation, there are collisions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A dpkg or rpm will install my.cnf under &lt;strong&gt;/etc&lt;/strong&gt;. Two installations will override one another. With RPM you may get a .rpmsave backup file, but that doesn&#39;t help too much.&lt;/li&gt;
&lt;li&gt;The daemon file: &lt;strong&gt;/etc/init.d/mysql(d)&lt;/strong&gt; is overwritten.&lt;/li&gt;
&lt;li&gt;The default data directory is used for both installations: &lt;strong&gt;/var/lib/mysql&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;The binaries are overwritten&lt;/li&gt;
&lt;li&gt;Both installations will use port 3306.&lt;/li&gt;
&lt;li&gt;In both installations, the same socket file (e.g. &lt;strong&gt;/var/run/mysql/mysql.sock&lt;/strong&gt;) is used.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;!--more--&gt;Interestingly, on Windows, multiple MySQL installations are by far easier:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Binaries are under &lt;strong&gt;Program Files\\MySQL\\MySQLX.X&lt;/strong&gt;. With two installations, you specify different directories.&lt;/li&gt;
&lt;li&gt;Data files are by default directly under the installations paths (MySQL 5.0) or under &#34;&lt;strong&gt;Documents And Settings...&lt;/strong&gt;&#34; (MySQL 5.1) with no collisions.&lt;/li&gt;
&lt;li&gt;The &lt;strong&gt;my.ini&lt;/strong&gt; files are located directly under the installation paths.&lt;/li&gt;
&lt;li&gt;The installer asks you for a service name, and notifies you if that name is already in use.&lt;/li&gt;
&lt;li&gt;The installer let&#39;s you know if port 3306 is already taken, and allows you to specify another one.&lt;/li&gt;
&lt;li&gt;Of course, there&#39;s no unix socket file.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I usually install MySQL on Linux using the binary tarball. When there&#39;s only one instance expected, I go with the standards: my.cnf is in &lt;strong&gt;/etc&lt;/strong&gt;, mysqld is under &lt;strong&gt;/etc/init.d&lt;/strong&gt;, etc. (no pun intended)&lt;/p&gt;
&lt;h4&gt;Steps for multiple installation on Linux&lt;/h4&gt;
&lt;p&gt;When more than one installation is expected, here&#39;s a safe way to ensure no collisions occur. We will assume a 5.0 and 5.1 installation (say we want to upgrade):&lt;/p&gt;
&lt;h4&gt;Install the MySQL binaries under /usr/local&lt;/h4&gt;
&lt;p&gt;Following the INSTALL document file, we make symbolic links to the full path in the names&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;ln -s /usr/local/your-mysql-5.0-full-installation-path /usr/local/mysql50
ln -s /usr/local/your-mysql-5.1-full-installation-path /usr/local/mysql51&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/p&gt;
&lt;h4&gt;Do not put my.cnf under /etc&lt;/h4&gt;
&lt;p&gt;Instead, put them directly in the installation path:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;touch /usr/local/mysql50/my.cnf
touch /usr/local/mysql51/my.cnf&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;h4&gt;Setup different port numbers in the my.cnf files&lt;/h4&gt;
&lt;p&gt;For example, in /usr/local/mysql50/my.cnf, use port 3350:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;[mysql]
port=3350

[mysqld]
port=3350&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;Choose another port (e.g. 3351) for the 5.1 installation, then have it written as above in the 5.1 my.cnf file.&lt;/p&gt;
&lt;h4&gt;Choose distinct socket files&lt;/h4&gt;
&lt;p&gt;For example,  in /usr/local/mysql50/my.cnf, add:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;[mysql]
port=3350
&lt;strong&gt;socket=/tmp/mysql50.sock&lt;/strong&gt;

[mysqld]
port=3350
&lt;strong&gt;socket=/tmp/mysql50.sock
&lt;/strong&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;Choose another socket and set it up in the second my.cnf file. You may also choose to put the socket files under the data paths or installation paths.&lt;/p&gt;
&lt;h4&gt;Choose distinct data paths&lt;/h4&gt;
&lt;p&gt;Either do not specify them at all, in which case they will reside under the installation path, or, if you want to enjoy another partition, use:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;[mysql]
port=3350
socket=/tmp/mysql50.sock

[mysqld]
port=3350
socket=/tmp/mysql50.sock
&lt;strong&gt;datadir=/my_raid_path/mysql50/&lt;/strong&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;h4&gt;Create distinct daemons&lt;/h4&gt;
&lt;p&gt;Manually copy support_files/mysql.server to /etc/init.d under distinct names. For example:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;cp /usr/local/mysql50/support_files/mysql.server /etc/init.d/mysqld50
cp /usr/local/mysql51/support_files/mysql.server /etc/init.d/mysqld51&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;h4&gt;Other settings&lt;/h4&gt;
&lt;p&gt;You may wish to set up a soft link for the client binaries, for example:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;ln -s /usr/local/mysql50/bin/mysql /usr/bin/mysql50&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;chkconfig (RedHat and derived) can be used to start/stop daemon as service:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;chkconfig --add mysqld50&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;h4&gt;Conclusion&lt;/h4&gt;
&lt;p&gt;I would prefer MySQL to come bundled in self-contained directory. The tarball is almost that, except it expects socket file to be on /tmp, and by default uses the 3306 port. I would further like to have a dpkg-reconfigure script to setup the above issues.&lt;/p&gt;
&lt;p&gt;Till then, it&#39;s manual configuration.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Do we need sql_mode?</title>
      <link>/blog/mysql/do-we-need-sql_mode/</link>
      <pubDate>Thu, 08 Jan 2009 08:14:38 +0000</pubDate>
      
      <guid>/blog/mysql/do-we-need-sql_mode/</guid>
      <description>&lt;p&gt;sql_mode must be one of the most elusive issues in setting up a MySQL database. It is also responsible for difficulties in migration, upgrading and securing of databases.&lt;/p&gt;
&lt;p&gt;MySQL usually has little issues with migrating database from one machine to another, one version to another, one OS to another, one architecture to another. If we&#39;re not sure, we can always migrate using mysqldump&#39;s logical dump, right?&lt;/p&gt;
&lt;p&gt;Not entirely right. The elusive sql_mode (empty by default) may affect out backup+restore, may affect our application behavior, may affect our data integrity.&lt;!--more--&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Did we remember to set NO_AUTO_CREATE_USER? Oh dear, we have some users without passwords.&lt;/li&gt;
&lt;li&gt;Did we remember to set NO_AUTO_VALUE_ON_ZERO? Oh dear, we&#39;ve dumped our database for backup, restored, but AUTO_INCREMENT values &lt;a title=&#34;Mind the SQL_MODE when running ALTER TABLE&#34; href=&#34;http://www.pythian.com/blogs/1422/draft-mind-the-sql_mode-when-running-alter-table&#34;&gt;have changed&lt;/a&gt;!&lt;/li&gt;
&lt;li&gt;Did we set STRICT_ALL_TABLES? How do we know if the 255 value in our TINYINT really stands for 255 or if it was a truncated 299?&lt;/li&gt;
&lt;li&gt;Do we allow selecting non aggregated columns in GROUP BY? Did we set ONLY_FULL_GROUP_BY? Will our application crash now?&lt;/li&gt;
&lt;li&gt;Our old database has zero for empty date values (columns are NOT NULL). But what settings do we have for NO_ZERO_IN_DATE on our new installation? Will import fail?&lt;/li&gt;
&lt;li&gt;And how did the NULL get in? Was it because we divided by zero, and forgot to set ERROR_FOR_DIVISION_BY_ZERO? How can we tell?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The fact is: two mysql instances, same version, same OS and architecture, with different sql modes - can be incompatible!&lt;/p&gt;
&lt;p&gt;As said, the sql_mode is empty by default. This is very non-strict. But more than that: it can be changed even while the database is running; even on a per connection basis.&lt;/p&gt;
&lt;p&gt;Setting sql_mode should be one of the first things to do after installation. The usual manuals talk about setting the innodb_buffer_pool_size and the query_cache_size, when sql_mode will dictate the nature of your database and application on an entirely grander scale.&lt;/p&gt;
&lt;p&gt;I think it would be best if MySQL chooses a desired set of sql modes (like &#39;TRADITIONAL&#39;), then make it the default. I further believe it would be best if MySQL would not allow changes to sql_mode. Not globally and certainly not per session. Choosing the stricter mode is better, I believe: errors such as overflow values should be reported to the application, not just swiped under the carpet.&lt;/p&gt;
&lt;p&gt;Backward compatibility? Indeed a problem (inherent to the very existence of sql_mode). Perhaps allow one setting per installation. Perhaps just &lt;a title=&#34;My advice to MySQL&#34; href=&#34;http://jpipes.com/index.php?/archives/276-My-advice-to-MySQL.html&#34;&gt;go for it&lt;/a&gt;.&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>MySQL parameters &amp; configuration sample file</title>
      <link>/blog/mysql/mysql-parameters-configuration-sample-file/</link>
      <pubDate>Fri, 17 Oct 2008 15:03:33 +0000</pubDate>
      
      <guid>/blog/mysql/mysql-parameters-configuration-sample-file/</guid>
      <description>&lt;p&gt;The following is a sample my.cnf configuration file. It includes some common and uncommon parameters, along with occasional comments.&lt;/p&gt;
&lt;p&gt;You can use this file, and tune as appropriate for your machine, operating system, and application needs.&lt;/p&gt;
&lt;p&gt;In particular, note the high values set for the InnoDB related parameters, below, and change them to match your system and application&#39;s requirements. You have been warned.&lt;!--more--&gt;&lt;/p&gt;
&lt;blockquote&gt;[client]&lt;br /&gt;
&lt;strong&gt; #password       = [your_password]&lt;br /&gt;
port            = 3306&lt;/strong&gt;&lt;br /&gt;
# The following location is not the default location for many&lt;br /&gt;
# pre-packaged utilities. For example, mytop or mysqlreport&lt;br /&gt;
# (or any Perl or Python based client, for that matter), will&lt;br /&gt;
# NOT look in the /tmp path for the mysql.sock file.&lt;br /&gt;
# The value is set to common location by your RPM or DEB&lt;br /&gt;
# package on GNU/Linux, yet defaults to the following in the&lt;br /&gt;
# .tgz mysql-server downlaod files.&lt;br /&gt;
&lt;strong&gt; socket          = /tmp/mysql.sock&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;default-character-set=utf8&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[mysqld]&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;# For a new installation, best to use a strict sql_mode:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;sql_mode=TRADITIONAL&lt;br /&gt;
datadir= [path to mysql data]&lt;br /&gt;
&lt;/strong&gt;# I prefer working case-sensitive. However, some 3rd party tools&lt;br /&gt;
# demand case insensitivity. If you&#39;re working with such a tool,&lt;br /&gt;
# uncomment the following line.&lt;br /&gt;
&lt;strong&gt;#lower_case_table_names=1&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;# 5-10 minutes timeout is usually more than required for idle&lt;br /&gt;
# connections. If a connection can be idle for so long, then&lt;br /&gt;
# creating a new connection is usually very cheap. This applies&lt;br /&gt;
# for many common web based applications. However, depending&lt;br /&gt;
# on your application, you may wish to set this parameter to a&lt;br /&gt;
# higher value.&lt;br /&gt;
&lt;strong&gt; wait_timeout=300&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;# The following is unfortunately still used on many instances. If&lt;br /&gt;
# you need backwards compatability, you may need to uncomment&lt;br /&gt;
# the following line.&lt;br /&gt;
&lt;strong&gt; #old_passwords=1&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;# generic configuration options&lt;br /&gt;
&lt;strong&gt; port            = 3306&lt;/strong&gt;&lt;br /&gt;
# Make sure this is the same location as in the [client] section&lt;br /&gt;
&lt;strong&gt; socket          = /tmp/mysql.sock&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;back_log = 50&lt;br /&gt;
max_connect_errors = 10&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;# Resources:&lt;br /&gt;
# The following values are liberal. You may reduce them&lt;br /&gt;
# according to your needs.&lt;br /&gt;
# NOTE: verify that your OS&#39;s open files limit is at least as&lt;br /&gt;
# specified here.&lt;br /&gt;
# I usually set &#39;ulimit -n&#39; to allow for 8192 files to mysql.&lt;br /&gt;
&lt;strong&gt;open_files_limit = 8000&lt;br /&gt;
&lt;/strong&gt;# The following is usually cheap, so go ahead and set a high value.&lt;br /&gt;
&lt;strong&gt;table_cache = 2048&lt;br /&gt;
&lt;/strong&gt;# Connections take memory, so don;t be too liberal here. A common,&lt;br /&gt;
# well tuned application, using proper connection pools, shouldn&#39;t&lt;br /&gt;
# require more than 1000 concurrent connections.&lt;br /&gt;
&lt;strong&gt;max_connections = 500&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;# Memory:&lt;br /&gt;
# When required, the following parameters will be used to allocate&lt;br /&gt;
# more memory. The value specified is always the amount of memory&lt;br /&gt;
# allocated, regardless of the real need.&lt;br /&gt;
&lt;strong&gt;binlog_cache_size = 1M&lt;br /&gt;
max_heap_table_size = 64M&lt;br /&gt;
sort_buffer_size = 8M&lt;br /&gt;
join_buffer_size = 8M&lt;br /&gt;
&lt;/strong&gt;# The following value sets an upper limit only: MySQL will only&lt;br /&gt;
# allocate as much as required. Setting this parameters to a high&lt;br /&gt;
# value may be required if you&#39;re handling very large statement,&lt;br /&gt;
# such as queries reading/writing BLOBs.&lt;br /&gt;
&lt;strong&gt;max_allowed_packet = 16M&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;# Even on a very busy server, a thread cache of 32 threads is&lt;br /&gt;
# usually enough to make for good thread recycling. I rarely go&lt;br /&gt;
# above this number.&lt;br /&gt;
&lt;strong&gt;thread_cache_size = 32&lt;br /&gt;
thread_concurrency = 8&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;# Query cache:&lt;br /&gt;
# Make sure you really need the query cache. I&#39;ve seen many&lt;br /&gt;
# applications where the query cache almost utterly unused&lt;br /&gt;
# (due to frequent invalidation). Check for your hit:insert ratio.&lt;br /&gt;
# A query cache type of value &#34;2&#34; (DEMAND) is a more programmatic&lt;br /&gt;
# oriented setting, where most queries are not cached, but a few,&lt;br /&gt;
# recognized to benefit from the query cache, are executed with&lt;br /&gt;
# the SQL_CACHE flag.&lt;br /&gt;
&lt;strong&gt;query_cache_type = 1&lt;br /&gt;
query_cache_size = 32M&lt;br /&gt;
query_cache_limit = 2M&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ft_min_word_len = 4&lt;br /&gt;
&lt;/strong&gt;# I usually go with InnoDB, which is ACID compliant and crash-safe.&lt;br /&gt;
&lt;strong&gt;default_table_type = InnoDB&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;thread_stack = 192K&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;transaction_isolation = REPEATABLE-READ&lt;br /&gt;
tmp_table_size = 64M&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;# Logs&lt;br /&gt;
# Having log-bin enabled allows for replication and for point in time&lt;br /&gt;
# recovery. It&#39;s a good idea to always have binary logs at hand.&lt;br /&gt;
# binary logs can also be reviewed to see what kind of modifications&lt;br /&gt;
# are made on your database (the general query log also logs&lt;br /&gt;
# SELECTs and other queries, which do not appear in the binary log)&lt;br /&gt;
# I usually name the logs after my host name. When dealing with&lt;br /&gt;
# replication, having master and slave logs named after the machines&lt;br /&gt;
# on which they are running makes for clearer distinction between&lt;br /&gt;
# them.&lt;br /&gt;
&lt;strong&gt;log-bin=mymachine-bin&lt;br /&gt;
relay-log = mymachine-relay-bin&lt;br /&gt;
relay-log-index = mymachine-relay-bin.index&lt;br /&gt;
&lt;/strong&gt;# Since a slave can suddenly be promoted to Master&#39;s role, I always&lt;br /&gt;
# take care that it also has the binary logs prepared.&lt;br /&gt;
&lt;strong&gt;log_slave_updates&lt;br /&gt;
log-error=mymachine-mysql-error.log&lt;br /&gt;
log_slow_queries&lt;br /&gt;
long_query_time = 2&lt;br /&gt;
log-queries-not-using-indexes&lt;br /&gt;
&lt;/strong&gt;# Automatically remove binary logs. Make sure this number is not too&lt;br /&gt;
# high and not too low for you, depending on your backups frequency&lt;br /&gt;
# and maximum slave lag.&lt;br /&gt;
&lt;strong&gt;expire_logs_days=7&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;# Replication related settings:&lt;br /&gt;
# Unique server identification number between 1 and 2^32-1.&lt;br /&gt;
&lt;strong&gt;server-id = [a unique number]&lt;br /&gt;
&lt;/strong&gt;# Setting the report_host allows for SHOW SLAVE HOSTS on the master&lt;br /&gt;
# to see which slaves are connected.&lt;br /&gt;
&lt;strong&gt;report_host=[machine&#39;s ip]&lt;br /&gt;
&lt;/strong&gt;# Limit the total size of the relay logs: set this value to a high enough&lt;br /&gt;
# value. When the slave can&#39;t keep up with the master, the relay logs&lt;br /&gt;
# fill up. If no limit is set, all disk space can be consumed.&lt;br /&gt;
# If a value too low is set, the master&#39;s binary logs cannot (shouldn&#39;t)&lt;br /&gt;
# be purged, and so the master gets to have a disk space problem. So&lt;br /&gt;
# provide a high enough value, and monitor your disk space!&lt;br /&gt;
&lt;strong&gt;relay_log_space_limit=10G&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;# MyISAM:&lt;br /&gt;
&lt;strong&gt;key_buffer_size = 32M&lt;br /&gt;
read_buffer_size = 2M&lt;br /&gt;
read_rnd_buffer_size = 16M&lt;br /&gt;
bulk_insert_buffer_size = 64M&lt;br /&gt;
myisam_sort_buffer_size = 128M&lt;br /&gt;
myisam_max_sort_file_size = 10G&lt;br /&gt;
myisam_max_extra_sort_file_size = 10G&lt;br /&gt;
myisam_repair_threads = 1&lt;br /&gt;
myisam_recover = force,backup&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;concurrent_insert=2&lt;br /&gt;
&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;# INNODB:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;innodb_file_per_table&lt;br /&gt;
&lt;/strong&gt;# Your machine&#39;s memory capacity dictates many of the following&lt;br /&gt;
# values. ***Do NOT take these values as they are. Change them***&lt;br /&gt;
&lt;strong&gt;innodb_buffer_pool_size = 10G&lt;br /&gt;
innodb_additional_mem_pool_size = 16M&lt;br /&gt;
innodb_data_file_path = ibdata1:50M:autoextend&lt;br /&gt;
innodb_file_io_threads = 4&lt;br /&gt;
&lt;/strong&gt;# Keep the following one commented, unless you need to recover&lt;br /&gt;
# from disaster.&lt;br /&gt;
&lt;strong&gt;#innodb_force_recovery=4&lt;br /&gt;
innodb_thread_concurrency = 8&lt;br /&gt;
&lt;/strong&gt;# Set &#34;1&#34; for full ACID compliance. Set &#34;2&#34; for IO performance gain&lt;br /&gt;
# (will only flush transaction log to disk once per second, instead&lt;br /&gt;
# of at each commit). If you have battery backed disk cache ,set&lt;br /&gt;
# to &#34;1&#34; and enjoy both worlds.&lt;br /&gt;
&lt;strong&gt;innodb_flush_log_at_trx_commit = 1&lt;br /&gt;
&lt;/strong&gt;# Keep the following one commented, unless you really have an&lt;br /&gt;
# emergency. Fast shutdown makes for slower start up time.&lt;br /&gt;
&lt;strong&gt;#innodb_fast_shutdown&lt;br /&gt;
innodb_log_buffer_size = 8M&lt;br /&gt;
&lt;/strong&gt;# The default here is 5M, which is really too low for our modern&lt;br /&gt;
# machines.&lt;br /&gt;
&lt;strong&gt;innodb_log_file_size = 128M&lt;br /&gt;
innodb_log_files_in_group = 2&lt;br /&gt;
innodb_max_dirty_pages_pct = 90&lt;br /&gt;
&lt;/strong&gt;# Consult The manual. The desired values for the following&lt;br /&gt;
# parameter change according to your OS type, OS version and&lt;br /&gt;
# hardware types. Benchmark after changing it!&lt;br /&gt;
&lt;strong&gt;#innodb_flush_method=O_DIRECT&lt;br /&gt;
innodb_lock_wait_timeout = 120&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[mysqldump]&lt;br /&gt;
quick&lt;br /&gt;
max_allowed_packet = 64M&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;default-character-set=utf8&lt;/strong&gt;&lt;/blockquote&gt;</description>
    </item>
    
  </channel>
</rss>