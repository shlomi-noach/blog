<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.16" />

  <title>Installation &middot; code.openark.org</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/blog/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/blog/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  
  <link rel="alternate" type="application/rss+xml" title="code.openark.org" href="/blog/tag/installation/index.xml" />
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="/blog/img/favicon.ico" type="image/x-icon" />


  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <a class="pure-menu-heading brand" href="/blog">openark.org</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/page/about"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
      <li class="pure-menu-item">
        <a class="pure-menu-link" href="/blog/tag/installation/index.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/shlomi-noach" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/ShlomiNoach" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/shlominoach" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    <li class="pure-menu-item">
      <a class="pure-menu-link avatar">
        
          <div class="avatar-container">
            <div class="avatar-img-border">
              <img class="avatar-img" src="/blog/images/shlomi-noach.png" alt="code.openark.org" />
            </div>
          </div>
        
        Shlomi Noach
      </a>
    </li>

  </ul>
</div>





  <div>
  <div class="small-print">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Installation</h1>
</div>

<div class="content">
  
    <article>
  <header class="index-header">
    <h2><a href="/blog/mysql/how-common_schema-installs-itself/">How common_schema installs itself</a></h2>

    <div class="post-meta">

  <div>

    <time>11 Sep 2012</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/common_schema">common_schema</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/installation">Installation</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/queryscript">QueryScript</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>Up till <a href="http://code.google.com/p/common-schema/">common_schema</a> version <strong>1.1</strong>, the user would need to choose from distinct distribution files: an install compatible with MySQL <strong>5.1</strong>, one compatible with InnoDB Plugin enabled servers, and one compatible with Percona Server. The difference between the three is the availability of certain <strong>INFORMATION_SCHEMA</strong> tables.</p>
<p>With <strong>1.1</strong>, this is no longer the case: <em>common_schema</em> auto-detects the server and available feature set, and installs accordingly.</p>
<h4>Wait, isn&rsquo;t common_schema just a SQL file?</h4>
<p>Yes. It&rsquo;s not like there&rsquo;s an installer like <em>InstallShield</em> or anything. Nevertheless, <em>common</em><em>_schema</em> offers a smart way of conditional handling, which is uses in itself. It&rsquo;s called <a href="http://www.queryscript.com/">QueryScript</a>.</p>
<p><em>common_schema</em> is installed by importing the SQL file (via <strong>SOURCE</strong> command; the <em>mysql</em> client; your favorite GUI). This creates your usual tables, views and routines. But some of these routines make for an interpreter for <em>QueryScript</em>. Somewhere along the installation process (remember - it&rsquo;s just a SQL import), <em>common_schema</em> switches over to executing scripts to manage the installation. In particular, there are a few views which depend on optional tables, such as InnoDB Plugin&rsquo;s tables for <strong>INFORMATION_SCHEMA</strong>.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/how-common_schema-installs-itself/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header class="index-header">
    <h2><a href="/blog/mysql/installing-mysql-from-sourcebinary-tarball-as-a-linux-service/">Installing MySQL from source/binary tarball as a Linux service</a></h2>

    <div class="post-meta">

  <div>

    <time>01 May 2012</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/installation">Installation</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/linux">Linux</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>I&rsquo;ve <a href="http://code.openark.org/blog/mysql/to-not-yum-or-to-not-apt-get">written before</a> I prefer to do a manual install of MySQL over a repository one. I still do: I typically install from binary tarball or by compiling from source.</p>
<p>I&rsquo;d like to share my setup procedure for Linux installation and service setup. I&rsquo;ve done this dozens of times, on different Linux flavors, and it works well for me.</p>
<h4>Installing from source</h4>
<p>To get this straight: you sometimes have to compile the source files. I, for example, happen to use the Sphinx MySQLSE extension. You can only use it if compiled with MySQL. You had to compile a &ldquo;vanilla&rdquo; <strong>5.1</strong> version without query cache in order to completely remove the cache&rsquo;s mutex contention.</p>
<p>Anyway, I find the easiest way is to install onto a path associated with the server version. For example, I would install a <strong>5.5</strong> server onto <strong>/usr/local/mysql55</strong></p>
<p>This way, a new version gets its own path, and no ambiguity.</p>
<p>To do that, use the <strong>prefix</strong> option on configuration step:</p>
<blockquote>
<pre>cd /path/to/extracted/source/tarball
sh BUILD/autorun.sh
./configure &ndash;prefix=/usr/local/mysql55
make
sudo make install</pre>
</blockquote>
<p>Once this is complete, you have <em>everything</em> under <strong>/usr/local/mysql55</strong>. This means binaries, libraries, scripts, etc.</p>
<p>To install the MySQL server as a service, copy the mysql.server script to <strong>/etc/init.d</strong>:</p>
<blockquote>
<pre>sudo cp /usr/local/mysql55/support-files/mysql.server /etc/init.d/mysql55</pre>
</blockquote>
<p>Again, I&rsquo;m naming the script after the MySQL version. This avoids conflict with possible past or future installations of the MySQL server, which typically create a service named <strong>mysql</strong> or <strong>mysqld</strong>.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/installing-mysql-from-sourcebinary-tarball-as-a-linux-service/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header class="index-header">
    <h2><a href="/blog/mysql/guide-to-mysql-installation-files/">Guide to MySQL installation files</a></h2>

    <div class="post-meta">

  <div>

    <time>01 Dec 2010</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/installation">Installation</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>Even for DBAs already familiar with MySQL, the choice of installation methods and the variety of install/package files is overwhelming and confusing.</p>
<p>I&rsquo;ll make a (very!) brief introduction to the various installation options, concentrating on the Linux operating system, and provide with a simple shopping list.</p>
<p>For illustration, I&rsquo;ll refer to the MySQL <strong>5.1.52</strong> community edition, the latest at the time of this writing. Downloads are available at <a href="http://dev.mysql.com/downloads/mysql/5.1.html">http://dev.mysql.com/downloads/mysql/5.1.html</a>.</p>
<p>I will then refer to alternate distributions.</p>
<h4>A note for Windows users</h4>
<p>You are lucky: your choice is very clear. Download the Windows MSI package. Choose <strong>32</strong> or <strong>64</strong> bit architecture according to your OS. If you know about the other ways to install and setup MySQL under Windows, you don&rsquo;t need this post.</p>
<h4>Linux: repositories</h4>
<p>Easiest way to install MySQL on linux would be to use your distro&rsquo;s repository. Just:</p>
<blockquote>
<pre>sudo apt-get install mysql-server-5.1</pre>
</blockquote>
<p>or</p>
<blockquote>
<pre>sudo yum install MySQL-Server-5.1</pre>
</blockquote>
<p>Your distro should resolve any package dependencies.</p>
<p>I&rsquo;m in the opinion that if MySQL is the main application to be used on a server, distribution&rsquo;s default repositories are <em>not</em> the way to go. Reasons include MySQL outdated version, incapability of installing multiple instance, danger of automatic upgrades or downgrades. Read <a href="http://code.openark.org/blog/mysql/to-not-yum-or-to-not-apt-get">this post and discussion</a> that follows for more.</p>
<h4>Linux: packages</h4>
<p>If you&rsquo;re a RedHat/CentOS/SuSE user, you&rsquo;re in luck: MySQL provides pre-built RPM packages for your system. I vaguely remember MySQL announcing that Ubuntu is to be supported. That was a couple years ago; there is still no package for Debian/Ubuntu.</p>
<p></p>

  </p>

  
  <footer>
    <a href="/blog/mysql/guide-to-mysql-installation-files/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header class="index-header">
    <h2><a href="/blog/mysql/to-not-yum-or-to-not-apt-get/">To not yum or to not apt-get?</a></h2>

    <div class="post-meta">

  <div>

    <time>16 Feb 2010</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/configuration">Configuration</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/installation">Installation</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/linux">Linux</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>I&rsquo;ve <a href="http://code.openark.org/blog/mysql/manually-installing-multiple-mysql-instances-on-linux-howto">written</a> shortly on this before. I like <strong>yum</strong>; I love <strong>apt-get</strong>; I prefer <em>not</em> to use them for MySQL installations. I consider a binary tarball to be the best MySQL installation format (source installations being a different case altogether).</p>
<h4>Why?</h4>
<p>I use <strong>yum</strong> and <strong>apt-get</strong> whenever I can and for almost all needs (sometimes preferring CPAN for Perl installations). But on a MySQL machine, I avoid doing so. The reason is either dependency hell or dependency mismatch.</p>
<p>Package managers are supposed to solve the dependency hell issue. But package managers will rarely have an up to date MySQL version.</p>
<p>I&rsquo;ve had several experiences where a simple <strong>yum</strong> installation re-installed the MySQL version. I&rsquo;ve had customers calling me up when, having installed something with <strong>yum</strong>, MySQL would not work anymore.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/to-not-yum-or-to-not-apt-get/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header class="index-header">
    <h2><a href="/blog/mysql/sphinxse-0-9-9-rc2-bug-workaround/">SphinxSE 0.9.9-RC2 bug workaround</a></h2>

    <div class="post-meta">

  <div>

    <time>07 Sep 2009</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/installation">Installation</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/sphinx">Sphinx</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>There is a serious bug with the sphinx storage engine, introduced in 0.9.9-RC2 (and which has not been fixed in latest revisions, as yet - last checked with rev 2006).</p>
<p>I would usually just revert to an older version (0.9.9-RC1 does not contain this bug), but for the reason that RC2 introduces an important feature: the <strong>sphinx_snippets()</strong> function, which allows for creation of snippets from within MySQL, and which makes the sphinx integration with MySQL complete, as far as the application is concerned.</p>
<h4>The bug</h4>
<p>The bug is described <a href="http://sphinxsearch.com/forum/view.html?id=3589">here</a> and <a href="http://sphinxsearch.com/forum/view.html?id=4081">here</a> (and see further discussions). Though it&rsquo;s claimed to have been fixed, it&rsquo;s been re-reported, and I&rsquo;ve tried quite a few revisions and verified it has not been fixed (tested on Debian/Ubuntu x64).  <span>Essentially, the bug does not allow you to set filters on a query issued from within the SphinxSE. For example, the following queries fail:</span></p>
<blockquote>
<pre>SELECT &hellip; FROM &hellip; WHERE query=&lsquo;python;mode=any;sort=relevance;limit=200;range=myUnixTimestamp,1249506000,1252184400;&rsquo;
SELECT &hellip; FROM &hellip; WHERE query=&lsquo;python;mode=any;sort=relevance;limit=200;filter=my_field,1;&rsquo;</pre>
</blockquote>
<p>While the following query succeeds:</p>
<blockquote>
<pre>SELECT &hellip; FROM &hellip; WHERE query=&lsquo;python;mode=any;sort=relevance;limit=200;&rsquo;</pre>
</blockquote>
<p>The error message is this:</p>
<blockquote>
<pre><span>ERROR 1430 (HY000): There was a problem processing the query on the foreign data source. Data source error: searchd error: invalid or truncated request</span></pre>
</blockquote>
<p><span>I see this as a serious bug in the SphinxSE: it renders it useless; searching without the ability to filter is not something I can live with.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/sphinxse-0-9-9-rc2-bug-workaround/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header class="index-header">
    <h2><a href="/blog/mysql/manually-installing-multiple-mysql-instances-on-linux-howto/">Manually installing multiple MySQL instances on Linux: HOWTO</a></h2>

    <div class="post-meta">

  <div>

    <time>19 Feb 2009</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/configuration">Configuration</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/installation">Installation</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/linux">Linux</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>Installing a single MySQL instance on a linux machine is a very simple operation. It may be as simple as:</p>
<blockquote>
<pre>apt-get install mysql-server</pre>
</blockquote>
<p>But you cannot use this method to install another MySQL instance. Moreover, if you try to manually install another instance, you may find that some collisions occur.</p>
<p>For example, when trying to install two 5.0 servers, apt-get or yum will just tell me &ldquo;package is already installed&rdquo;.</p>
<p>When trying to install a new 5.1 server along with 5.0, an implicit upgrade is performed.</p>
<p>But even if we try forcing the installation, there are collisions:</p>
<ul>
<li>A dpkg or rpm will install my.cnf under <strong>/etc</strong>. Two installations will override one another. With RPM you may get a .rpmsave backup file, but that doesn&rsquo;t help too much.</li>
<li>The daemon file: <strong>/etc/init.d/mysql(d)</strong> is overwritten.</li>
<li>The default data directory is used for both installations: <strong>/var/lib/mysql</strong></li>
<li>The binaries are overwritten</li>
<li>Both installations will use port 3306.</li>
<li>In both installations, the same socket file (e.g. <strong>/var/run/mysql/mysql.sock</strong>) is used.</li>
</ul>
<p></p>

  </p>

  
  <footer>
    <a href="/blog/mysql/manually-installing-multiple-mysql-instances-on-linux-howto/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header class="index-header">
    <h2><a href="/blog/mysql/do-we-need-sql_mode/">Do we need sql_mode?</a></h2>

    <div class="post-meta">

  <div>

    <time>08 Jan 2009</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/configuration">Configuration</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/installation">Installation</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/sql_mode">sql_mode</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>sql_mode must be one of the most elusive issues in setting up a MySQL database. It is also responsible for difficulties in migration, upgrading and securing of databases.</p>
<p>MySQL usually has little issues with migrating database from one machine to another, one version to another, one OS to another, one architecture to another. If we&rsquo;re not sure, we can always migrate using mysqldump&rsquo;s logical dump, right?</p>
<p>Not entirely right. The elusive sql_mode (empty by default) may affect out backup+restore, may affect our application behavior, may affect our data integrity.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/do-we-need-sql_mode/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header class="index-header">
    <h2><a href="/blog/mysql/mysql-parameters-configuration-sample-file/">MySQL parameters &amp; configuration sample file</a></h2>

    <div class="post-meta">

  <div>

    <time>17 Oct 2008</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/configuration">Configuration</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/installation">Installation</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>The following is a sample my.cnf configuration file. It includes some common and uncommon parameters, along with occasional comments.</p>
<p>You can use this file, and tune as appropriate for your machine, operating system, and application needs.</p>
<p>In particular, note the high values set for the InnoDB related parameters, below, and change them to match your system and application&rsquo;s requirements. You have been warned.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/mysql-parameters-configuration-sample-file/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
</div>

</div>
</div>
<script src="/blog/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'Your Google Analytics tracking ID', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>
