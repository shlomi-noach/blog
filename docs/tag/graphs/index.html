<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.16" />

  <title>Graphs &middot; code.openark.org</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/blog/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/blog/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  
  <link rel="alternate" type="application/rss+xml" title="code.openark.org" href="/blog/tag/graphs/index.xml" />
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="/blogimg/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <a class="pure-menu-heading brand" href="/blog">openark.org</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/blog/page/about"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
      <li class="pure-menu-item">
        <a class="pure-menu-link" href="/blog/tag/graphs/index.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">
    <li class="pure-menu-item">
      <a class="pure-menu-link">
        Shlomi Noach
        
          <div class="avatar-container">
        	  <div class="avatar-img-border">
                <img class="avatar-img" src="/blog/images/shlomi-noach.png" alt="code.openark.org" />
        	  </div>
        	</div>
        
      </a>
    </li>

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/shlomi-noach" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/ShlomiNoach" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/shlominoach" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>





  <div>
  <div class="small-print">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Graphs</h1>
</div>

<div class="content">
  
    <article>
  <header>
    <h2><a href="/blog/mysql/generating-google-line-charts-with-sql-part-ii/">Generating Google line charts with SQL, part II</a></h2>

    <div class="post-meta">

  <div>

    <time>03 Mar 2011</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/mycheckpoint">mycheckpoint</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/sql">SQL</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>This post continues <a href="http://code.openark.org/blog/mysql/generating-google-line-charts-with-sql-part-i">Generating Google line charts with SQL, part I</a>, in pursue of generating time series based image charts.</p>
<p>We ended last post with the following chart:</p>
<blockquote>
<pre /><img class="alignnone" title="Sample SQL Google Chart" src="/blog/assets/chart?cht=lc&amp;chs=400x200&amp;chtt=SQL%20chart&amp;chxt=x,y&amp;chxr=1,-4716.6,5340.0&amp;chd=s:dddddddddeeeeeefffffffffeeeedddcccbbaaZZZYYYXXXXXXXXXYYYZZabbcdeefghhijkkllmmmmmmmmllkkjihgfedcbZYXWVUTSRRQQPPPPQQQRSTUVWXZacdfgijlmnpqrssttuuuttssrqonmkigfdbZXVTSQONMLKJIIIIIIJKLMOPRTVXZbegilnprtvwyz01111110zyxvtrpnkifcaXUSPNLJHFECBBAAABBCEFHJLNQTWZcfilortwy1346789999876420yvspmjfcYVSOL" alt="" width="400" height="200" />
<a href="http://chart.apis.google.com/chart?cht=lc&amp;chs=400x200&amp;chtt=SQL%20chart&amp;chxt=x,y&amp;chxr=1,-4716.6,5340.0&amp;chd=s:dddddddddeeeeeefffffffffeeeedddcccbbaaZZZYYYXXXXXXXXXYYYZZabbcdeefghhijkkllmmmmmmmmllkkjihgfedcbZYXWVUTSRRQQPPPPQQQRSTUVWXZacdfgijlmnpqrssttuuuttssrqonmkigfdbZXVTSQONMLKJIIIIIIJKLMOPRTVXZbegilnprtvwyz01111110zyxvtrpnkifcaXUSPNLJHFECBBAAABBCEFHJLNQTWZcfilortwy1346789999876420yvspmjfcYVSOL">http://chart.apis.google.com/chart?cht=lc&amp;chs=400x200&amp;chtt=SQL%20chart&amp;chxt=x,y&amp;chxr=1,-4716.6,5340.0&amp;chd=s:dddddddddeeeeeefffffffffeeeedddcccbbaaZZZYYYXXXXXXXXXYYYZZabbcdeefghhijkkllmmmmmmmmllkkjihgfedcbZYXWVUTSRRQQPPPPQQQRSTUVWXZacdfgijlmnpqrssttuuuttssrqonmkigfdbZXVTSQONMLKJIIIIIIJKLMOPRTVXZbegilnprtvwyz01111110zyxvtrpnkifcaXUSPNLJHFECBBAAABBCEFHJLNQTWZcfilortwy1346789999876420yvspmjfcYVSOL</a></p>

<p></blockquote>
which has a nice curve, and a proper y-legend, but incorrect x-legend and no ticks nor grids.</p>

<p>To date, Google Image Charts do not support time-series charts. We can&rsquo;t just throw timestamp values and expect the chart to properly position them. We need to work these by hand.</p>

<p>This is not easily done; if our input consists of evenly spread timestamp values, we are in a reasonable position. If not, what do we do?</p>

<p>There are several solutions to this:
<ul>
    <li>We can present whatever points we have on the chart, making sure to position them properly. This makes for an uneven distribution of ticks on the x-axis, and is not pleasant to watch.</li>
    <li>We can extrapolate values for round hours (or otherwise round timestamp resolutions), and so show evenly spread timestamps. I don&rsquo;t like this solution one bit, since we&rsquo;re essentially inventing values here. Extrapolation is nice when you know you have nice curves, but not when you&rsquo;re doing database monitoring, for example. You must have the precise values.</li>
    <li>We can do <a href="http://en.wikipedia.org/wiki/Oversampling">oversampling</a>, then group together several measurements within round timestamp resolutions. For example, we can make a measurement every <strong>2</strong> minutes, yet present only <strong>6</strong> measurements per hour, each averaging up <strong>10</strong> round minutes. This is the approach I take with <a href="http://code.openark.org/forge/mycheckpoint">mycheckpoint</a>.</li>
</ul>
The latest approach goes even beyond that: what if we missed 30 minutes of sampling? Say the server was down. We then need to &ldquo;invent&rdquo; the missing timestamps. Note that we invent the timestamps, we do not invent values. We must present the chart with missing values on our invented timestamps.</p>

<p>I may show how to do this in a future post. Meanwhile, let&rsquo;s simplify and assume our values <em>are</em> evenly spread.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/generating-google-line-charts-with-sql-part-ii/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/generating-google-line-charts-with-sql-part-i/">Generating Google line charts with SQL, part I</a></h2>

    <div class="post-meta">

  <div>

    <time>01 Feb 2011</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/mycheckpoint">mycheckpoint</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/sql">SQL</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>In this series of posts I wish to show how <a href="http://code.google.com/apis/chart/image_charts.html">Google Charts</a> can be generated via SQL. We discuss the Google Charts limitations which must be challenged, and work towards a simple chart.</p>
<p>I&rsquo;m going to present the algorithm I use in <a href="http://code.openark.org/forge/mycheckpoint">mycheckpoint</a>, a MySQL monitoring utility, which generates Google charts by raw data using views. An example of such chart follows:</p>
<blockquote>
<pre /><img class="alignnone" title="Sample Google Chart" src="/blog/assets/chart?cht=lc&amp;chs=370x180&amp;chts=303030,12&amp;chtt=Latest+24+hours:+Nov+9,+05:50++-++Nov+10,+05:50&amp;chf=c,s,ffffff&amp;chdl=Rentals+rate:+custom_1_psec&amp;chdlp=b&amp;chco=ff8c00&amp;chd=s:GDGKGFLFGMJHRLMPPNULJRPLTOPRUMYPPVRNbQUSUSbSNWUOfSWTObVSUVWSVYVPbTPjfTbRTdXReUWhcTQRQZbTWYVYPaVZXdYYWPTabYUTbW99QLgLNIOIRNNMIKRJEHGFHGJGGFIFDFGDK&amp;chxt=x,y&amp;chxr=1,0,8.720000&amp;chxl=0:|+||08:00||+||12:00||+||16:00||+||20:00||+||00:00||+||04:00||&amp;chxs=0,505050,10,0,lt&amp;chg=4.17,25,1,2,0.69,0&amp;chxp=0,0.69,4.86,9.03,13.20,17.37,21.54,25.71,29.88,34.05,38.22,42.39,46.56,50.73,54.90,59.07,63.24,67.41,71.58,75.75,79.92,84.09,88.26,92.43,96.60&amp;tsstart=2010-11-09+05:50:00&amp;tsstep=600" alt="" width="370" height="180" />
<a href="http://chart.apis.google.com/chart?cht=lc&amp;chs=370x180&amp;chts=303030,12&amp;chtt=Latest+24+hours:+Nov+9,+05:50++-++Nov+10,+05:50&amp;chf=c,s,ffffff&amp;chdl=Rentals+rate:+custom_1_psec&amp;chdlp=b&amp;chco=ff8c00&amp;chd=s:GDGKGFLFGMJHRLMPPNULJRPLTOPRUMYPPVRNbQUSUSbSNWUOfSWTObVSUVWSVYVPbTPjfTbRTdXReUWhcTQRQZbTWYVYPaVZXdYYWPTabYUTbW99QLgLNIOIRNNMIKRJEHGFHGJGGFIFDFGDK&amp;chxt=x,y&amp;chxr=1,0,8.720000&amp;chxl=0:|+||08:00||+||12:00||+||16:00||+||20:00||+||00:00||+||04:00||&amp;chxs=0,505050,10,0,lt&amp;chg=4.17,25,1,2,0.69,0&amp;chxp=0,0.69,4.86,9.03,13.20,17.37,21.54,25.71,29.88,34.05,38.22,42.39,46.56,50.73,54.90,59.07,63.24,67.41,71.58,75.75,79.92,84.09,88.26,92.43,96.60&amp;tsstart=2010-11-09+05:50:00&amp;tsstep=600">http://chart.apis.google.com/chart?cht=lc&amp;chs=370x180&amp;chts=303030,12&amp;chtt=Latest+24+hours:+Nov+9,+05:50++-++Nov+10,+05:50&amp;chf=c,s,ffffff&amp;chdl=Rentals+rate:+custom_1_psec&amp;chdlp=b&amp;chco=ff8c00&amp;chd=s:GDGKGFLFGMJHRLMPPNULJRPLTOPRUMYPPVRNbQUSUSbSNWUOfSWTObVSUVWSVYVPbTPjfTbRTdXReUWhcTQRQZbTWYVYPaVZXdYYWPTabYUTbW99QLgLNIOIRNNMIKRJEHGFHGJGGFIFDFGDK&amp;chxt=x,y&amp;chxr=1,0,8.720000&amp;chxl=0:|+||08:00||+||12:00||+||16:00||+||20:00||+||00:00||+||04:00||&amp;chxs=0,505050,10,0,lt&amp;chg=4.17,25,1,2,0.69,0&amp;chxp=0,0.69,4.86,9.03,13.20,17.37,21.54,25.71,29.88,34.05,38.22,42.39,46.56,50.73,54.90,59.07,63.24,67.41,71.58,75.75,79.92,84.09,88.26,92.43,96.60&amp;tsstart=2010-11-09+05:50:00&amp;tsstep=600</a>
</blockquote>
<em>mycheckpoint</em> does not actually call on Google to do the chart rendering, but invokes its own JavaScript code to visualize the URL locally.</p>

<p>Here are some downsides for using Google charts:
<ul>
    <li>The URL cannot be as long as you like. 2048 characters is an upper bound you&rsquo;ll want to keep behind. <em>[Google charts POST method calls are available, which leads to 16K equivalent of URL length &ndash; this is still not too helpful due to the nature of POST calls]</em></li>
    <li>Features are inconsistent. To specify label or tick positions, one must specify exact positions. To specify grid positions, one must supply with step, offset, etc. There are more such inconsistencies.</li>
    <li>Google charts are not too friendly. Taking the ticks and grids example from above, there really shouldn&rsquo;t be a reason why grids would not be automatically generated according to ticks definitions. But we are required to specify positions for the ticks as well as for the grids.</li>
    <li>There is no support for time-series. One must translate time as x-axis values.</li>
    <li>Perhaps most intimidating to many people: to generate a Google chart, once must send data to Google. Which is the main reason I used local JavaScript rendering.</li>
</ul>
Anyway, let&rsquo;s build a very simple chart. Since I will not cover everything in this post, we make for some relaxed conditions.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/generating-google-line-charts-with-sql-part-i/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/mycheckpoint-rev-170-improved-custom-queries-local-charting-pageswap-io-monitoring-improved-html-reports/">mycheckpoint (rev. 170): improved custom queries; local charting; page/swap I/O monitoring; improved HTML reports</a></h2>

    <div class="post-meta">

  <div>

    <time>16 Jul 2010</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/linux">Linux</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/monitoring">Monitoring</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/mycheckpoint">mycheckpoint</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/open-source">Open Source</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>Revision <strong>170</strong> of <a href="../../forge/mycheckpoint">mycheckpoint</a>, a MySQL monitoring solution, has  been released. New and updated in this revision:</p>
<ul>
<li><strong>Improved custom queries</strong>: lifting of limitations from previous, introductory revision; better HTML presentation</li>
<li><strong>Local, inline charting</strong>: no rendering of Google Charts, unless explicitly requested. All charts are now rendered locally using JavaScript. No data is now sent over the network.</li>
<li><strong>Page/Swap I/O monitoring</strong>: now monitoring for page ins and outs, swap ins and outs (Linux only).</li>
<li><strong>Improved HTML reports</strong>: several improvements on presentation (see <a href="http://code.openark.org/forge/wp-content/uploads/2010/07/mycheckpoint-report-brief-169.html">sample</a>, more follow).</li>
</ul>
<h4>Improved custom queries</h4>
<p>Some limitations, introduced in revision <strong>132</strong>, are now lifted. New features are introduced.</p>
<ul>
<li>There is now no limit to the number of custom queries (well, an INT limit).</li>
<li>In fact, the data tables adjust themselves to the existing custom queries in the form of auto-deploy: once a new <a href="http://code.openark.org/forge/mycheckpoint/documentation/custom-monitoring">custom query is added</a> or an old one removed, mycheckpoint will add or remove the relevant columns from the data tables.</li>
<li>The <strong>chart_order</strong> column is now utilized: HTML reports which include custom query charts now order those charts according to <strong>chart_order</strong> values. This makes for nicer reports.</li>
<li>The standard <a href="http://code.openark.org/forge/wp-content/uploads/2010/07/mycheckpoint-report-brief-169.html">HTML brief report</a> (<strong>SELECT html FROM sv_report_html_brief</strong>) now automatically includes all custom charts. The HTML brief report is the report one usually wants to look at: it provides with the latest 24 hours metrics for selected values. It now becomes a centralized place for all that is interesting in the past 24 hours.</li>
<li>Custom queries are now allowed to return <strong>NULL</strong>, treated as a missing value. This is a bugfix from previous revisions.</li>
</ul>
<h4>Local charting</h4>
<p>Motivation for local charting is clear: no one likes having their data being sent over the network. And no one likes Google to know about their DML values.</p>
<p>I&rsquo;ve been playing around with quite a few charting solutions, and have gone into depths with two of them, adding and rewriting quite a lot of code. Eventually, I settled on my very own rendering. Here&rsquo;s what I&rsquo;ve seen &amp; tested:</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/mycheckpoint-rev-170-improved-custom-queries-local-charting-pageswap-io-monitoring-improved-html-reports/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/mycheckpoint-rev-132-custom-monitoring-custom-charts-process-list-dump/">mycheckpoint (rev. 132): custom monitoring, custom charts, process list dump</a></h2>

    <div class="post-meta">

  <div>

    <time>04 Jun 2010</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/monitoring">Monitoring</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/mycheckpoint">mycheckpoint</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/python">python</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/scripts">scripts</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>Revision <strong>132</strong> of <a href="../../forge/mycheckpoint">mycheckpoint</a> has been released. New and updated in this revision:</p>
<ul>
<li>Custom monitoring: monitoring &amp; charting for user defined queries</li>
<li>HTML reports for custom monitoring</li>
<li>Process list dump upon alert notifications</li>
</ul>
<h4>Custom monitoring &amp; charts</h4>
<p>Custom monitoring allows the user to supply with a query, the results of which will be monitored.</p>
<p>That is, <em>mycheckpoint</em> monitors the status variables, replication status, OS metrics. But it cannot by itself monitor one&rsquo;s <em>application</em>. Which is why a user may supply with such query as:</p>
<blockquote><pre>
SELECT COUNT(*) FROM shopping_cart WHERE is_pending=1
</pre></blockquote>
<p>Such a query will tell an online store how many customers are in the midst of shopping. There is no argument that this number is worth monitoring for. Given the above query, <em>mycheckpoint</em> will execute it per sample, and store the query&rsquo;s result along with all sampled data, to be then aggregated by complex views to answer for:</p>
<ul>
<li>What was the value per given sample?</li>
<li>What is the value difference for each sample?</li>
<li>What is the change per second, i.e. the rate?</li>
</ul>
<p>mycheckpoint goes one step forward, and explicity records another metric:</p>
<ul>
<li>How much time did it take to take that sample?</li>
</ul>
<p></p>

  </p>

  
  <footer>
    <a href="/blog/mysql/mycheckpoint-rev-132-custom-monitoring-custom-charts-process-list-dump/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/static-charts-vs-interactive-charts/">Static charts vs. interactive charts</a></h2>

    <div class="post-meta">

  <div>

    <time>02 Mar 2010</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/analysis">Analysis</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/monitoring">Monitoring</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/mycheckpoint">mycheckpoint</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/web">Web</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>I&rsquo;m having my usual fun with charts. Working on <a href="http://code.openark.org/forge/mycheckpoint">mycheckpoint</a>, I&rsquo;ve generated monitoring charts using the <a href="http://code.google.com/apis/chart/image_charts.html">Google Chars API</a>. But I&rsquo;ve also had chance to experiment and deploy interactive charts, JavaScript based. In particular, I used and tweaked <a href="http://www.danvk.org/dygraphs/">dygraphs</a>.</p>
<p>I&rsquo;d like to note some differences in using charts of both kinds. And I think it makes a very big difference.</p>
<h4>Static charts</h4>
<p>I&rsquo;ll call any image-based chart by &ldquo;static chart&rdquo;. It&rsquo;s just a static image. Example of such charts are those generated by Google Image Charts (they now also have new, interactive charts), or <a href="http://oss.oetiker.ch/rrdtool/index.en.html">RRDtool</a>. Show below is an example of a static chart; in this example, generated by Google:</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/static-charts-vs-interactive-charts/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/mycheckpoint-rev-88-mount-points-monitoring-improved-charting-enhanced-auto-deploy/">mycheckpoint (rev. 88): mount points monitoring, improved charting, enhanced auto-deploy</a></h2>

    <div class="post-meta">

  <div>

    <time>10 Feb 2010</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/monitoring">Monitoring</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/mycheckpoint">mycheckpoint</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>Revision <a href="http://code.google.com/p/mycheckpoint/">#88</a> of <a href="http://code.openark.org/forge/mycheckpoint">mycheckpoint</a> is released. In this revision:</p>
<ul>
<li>Disk space monitoring</li>
<li>Improved charting</li>
<li>Enhanced auto-deploy</li>
<li>And more&hellip;</li>
</ul>
<h4>Disk space monitoring</h4>
<p><em>mycheckpoint</em> now monitors (on Linux only) three mount points:</p>
<ol>
<li>The &ldquo;<strong>/</strong>&rdquo; (root) mount point</li>
<li>The <strong>datadir</strong> mount point</li>
<li>The <strong>tmpdir</strong> mount point</li>
</ol>
<p>It may well be the case that two of the above (or perhaps all three of them) share the same mount point. For example, if there isn&rsquo;t any particular partition for &ldquo;<strong>/tmp</strong>&rdquo;, it is possible that the <strong>tmpdir</strong> (by default &ldquo;<strong>/tmp</strong>&rdquo;) is on the same mount point as &ldquo;<strong>/</strong>&rdquo;. <em>mycheckpoint</em> does not care.</p>
<p><em>mycheckpoint</em> monitors and reports the mount point&rsquo;s used percent, in a similar algorithm <strong>df</strong> uses.</p>
<p>Disk space monitoring is only possible when monitoring the local machine (i.e. <em>mycheckpoint</em> runs on the same machine as the monitored MySQL server). In the future <em>mycheckpoint</em> may also monitor additional mount points, such as the various logs mount points.</p>
<h4></p>

  </p>

  
  <footer>
    <a href="/blog/mysql/mycheckpoint-rev-88-mount-points-monitoring-improved-charting-enhanced-auto-deploy/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/mycheckpoint-rev-76-os-monitoring-auto-deploy-brief-html-and-247-reports/">mycheckpoint rev. 76: OS monitoring, auto deploy, brief HTML and 24/7 reports</a></h2>

    <div class="post-meta">

  <div>

    <time>05 Jan 2010</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/linux">Linux</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/monitoring">Monitoring</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/mycheckpoint">mycheckpoint</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/python">python</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/scripts">scripts</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>Revision <strong>76</strong> of <a href="http://code.openark.org/forge/mycheckpoint">mycheckpoint</a> comes with quite a few improvements, including:</p>
<ul>
<li>OS monitoring (CPU, load average, memory)</li>
<li>Auto-deploy</li>
<li>Improved charting</li>
<li>Brief HTML reports</li>
<li><sup>24</sup>&frasl;<sub>7</sub> charts</li>
</ul>
<h4>OS Monitoring</h4>
<p>When monitoring the local machine, <em>mycheckpoint</em> now monitors CPU utilization, load average, memory and swap space.</p>
<p>This only applies to the Linux operating system; there is currently no plan to work this out for other operating systems.</p>
<p>Examples:</p>
<blockquote>
<pre>mysql&gt; SELECT <strong>os_cpu_utilization_percent</strong> FROM sv_report_chart_sample;</p>

<p></pre>
<img class="size-full wp-image-1794 alignnone" title="mycheckpoint-chart-cpu-sample" src="/blog/assets/mycheckpoint-chart-cpu-sample.png" alt="mycheckpoint-chart-cpu-sample" width="400" height="200" />
</blockquote>
<blockquote>
<pre>mysql&gt; SELECT ts, <strong>os_loadavg</strong> FROM mycheckpoint.sv_report_sample;
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;+
| 2009-12-27 11:45:01 |       1.78 |
| 2009-12-27 11:50:01 |       2.48 |
| 2009-12-27 11:55:01 |       2.35 |
&hellip;
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;+</pre>
</blockquote>
<blockquote>
<pre>mysql&gt; SELECT report FROM mycheckpoint.sv_report_human_sample ORDER BY id DESC LIMIT 1 \G
*************************** 1. row ***************************
report:
Report period: 2009-12-27 13:20:01 to 2009-12-27 13:25:01. Period is 5 minutes (0.08 hours)
Uptime: 100.0% (Up: 334 days, 06:37:28 hours)</p>

<p><strong>OS:
 Load average: 1.67
 CPU utilization: 25.2%
 Memory: 7486.4MB used out of 7985.6484MB (Active: 6685.8906MB)
 Swap: 3835.2MB used out of 8189.3750MB</strong>
&hellip;</pre>
</blockquote>
<h4>Auto-deploy</h4>
<p><em>mycheckpoint</em> now has a version recognition mechanism. There is no need to call <em>mycheckpoint</em> with the &ldquo;<strong>deploy</strong>&rdquo; argument on first install or after upgrade. <em>mycheckpoint</em> will recognize a change of version and will auto-deploy before moving on to monitoring your system.</p>
<p></p>

  </p>

  
  <footer>
    <a href="/blog/mysql/mycheckpoint-rev-76-os-monitoring-auto-deploy-brief-html-and-247-reports/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/new-and-noteworthy-in-mycheckpoint-rev-57/">New and noteworthy in mycheckpoint (rev. 57)</a></h2>

    <div class="post-meta">

  <div>

    <time>16 Dec 2009</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/monitoring">Monitoring</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/mycheckpoint">mycheckpoint</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>Rev. 57 of <a href="http://code.openark.org/forge/mycheckpoint">mycheckpoint</a> has been released and is available for <a href="http://code.google.com/p/mycheckpoint/">download</a>.</p>
<p>New and updated in this revision:</p>
<ul>
<li><a href="#Remote host monitoring">Remote host monitoring</a></li>
<li><a href="#Improved charting">Improved charting</a></li>
<li><a href="#Flexible charting">Flexible charting</a></li>
<li><a href="#Fix to questions vs. queries issues">Fix to questions vs. queries issues</a></li>
</ul>
<p><a name="Remote host monitoring"></a></p>
<h4>Remote host monitoring</h4>
<p>It is now possible to monitor one host, while writing into another. Either or both could be remote hosts:</p>
<blockquote>
<pre>mycheckpoint &ndash;host=localhost &ndash;monitored-host=192.168.10.178</pre>
</blockquote>
<p>The above monitors the MySQL server on 192.168.10.178, and writes down to localhost (to be queried later)</p>
<blockquote>
<pre>mycheckpoint &ndash;monitored-host=127.0.0.1 &ndash;host=192.168.10.178</pre>
</blockquote>
<p>The above monitors the MySQL server on 127.0.0.1, and writes down to 192.168.10.178.</p>
<p></p>

  </p>

  
  <footer>
    <a href="/blog/mysql/new-and-noteworthy-in-mycheckpoint-rev-57/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/sql-multi-line-chart/">SQL multi line chart</a></h2>

    <div class="post-meta">

  <div>

    <time>03 Nov 2009</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/sql">SQL</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>Time for another charting SQL query. I wish to present a single-query generated multi-line/area chart. I&rsquo;ll walk through some of the steps towards making this happen. By the end of this post I&rsquo;ll present some real-data charts, area charts and colored charts.</p>
<blockquote>
<pre>+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| y_scale | chart                                                                             |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| 1       | *<strong><em>&mdash;&mdash;&mdash;#######&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-</em></strong>*<strong><em>&mdash;&mdash;&ndash;###### |
| 0.88    | &mdash;-</em></strong>&mdash;###&mdash;&mdash;-##&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;<strong><em>&mdash;&mdash;-</em></strong>&mdash;##&mdash;&mdash; |
| 0.75    | &mdash;&mdash;-<strong>#&mdash;&mdash;&mdash;&mdash;##&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-</strong>&mdash;&mdash;&mdash;&mdash;-<em>##&mdash;&mdash;&ndash; |
| 0.63    | &mdash;&mdash;##-</em>&mdash;&mdash;&mdash;&mdash;&ndash;##&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-*&mdash;&mdash;&mdash;&mdash;&ndash;##<strong>&mdash;&mdash;&ndash; |
| 0.5     | -@@@@@@@@@@@@@@@&mdash;&mdash;&mdash;-#&mdash;&ndash;@@@@@@@@@@@@@@@@&mdash;-</strong>&mdash;&mdash;&mdash;@@@@@@@@@@@@@@@@&ndash; |
| 0.38    | &mdash;-#&mdash;&mdash;-<em>&mdash;&mdash;&mdash;&mdash;&ndash;##&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-</em>&mdash;&mdash;&mdash;&mdash;&mdash;#&mdash;&mdash;-<em>&mdash;&ndash; |
| 0.25    | &ndash;##&mdash;&mdash;&mdash;</em>&mdash;&mdash;&mdash;&mdash;&mdash;#&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;<em>&mdash;&mdash;&mdash;&mdash;&ndash;##&mdash;&mdash;&mdash;</em>&mdash;- |
| 0.13    | -#&mdash;&mdash;&mdash;&mdash;<strong>&mdash;&mdash;&mdash;&mdash;&ndash;#&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</strong>&mdash;&mdash;&mdash;&mdash;&ndash;#&mdash;&mdash;&mdash;&mdash;<em>&mdash; |
| 0       | @&mdash;&mdash;&mdash;&mdash;&mdash;</em>&mdash;&mdash;&mdash;&mdash;&ndash;##&mdash;&mdash;&mdash;&mdash;&ndash;*&mdash;&mdash;&mdash;&mdash;&mdash;#&mdash;&mdash;&mdash;&mdash;&ndash;<strong>- |
| -0.12   | &mdash;&mdash;&mdash;&mdash;&mdash;&ndash;<em>&mdash;&mdash;&mdash;&mdash;&mdash;#&mdash;&mdash;&mdash;&mdash;</em>&mdash;&mdash;&mdash;&mdash;&ndash;##&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;* |
| -0.25   | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;*&mdash;&mdash;&mdash;&mdash;&mdash;#&mdash;&mdash;&mdash;</strong>&mdash;&mdash;&mdash;&mdash;&ndash;#&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; |
| -0.37   | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-<strong>&mdash;&mdash;&mdash;&mdash;&ndash;#&mdash;&mdash;-<em>&mdash;&mdash;&mdash;&mdash;&mdash;#&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash; |
| -0.5    | &mdash;&mdash;&mdash;&mdash;&mdash;-@@@@@@@@@@@@@@@@&mdash;-##&mdash;-</em>&mdash;&ndash;@@@@@@@@@@@@@@@&mdash;&mdash;&mdash;&mdash;&mdash;-@@ |
| -0.62   | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-</strong>&mdash;&mdash;&mdash;&mdash;&ndash;#-<strong>&mdash;&mdash;&mdash;&mdash;&ndash;#&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash; |
| -0.75   | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</strong>&mdash;&mdash;&mdash;&mdash;<strong>#&mdash;&mdash;&mdash;&mdash;-##&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- |
| -0.87   | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</strong>&mdash;&mdash;-<strong><em>&mdash;###&mdash;&mdash;-###&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash; |
| -1      | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-</em></strong>****&mdash;&mdash;&mdash;#######&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash; |
|         | v:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::v |
|         | 0                                                                               8 |
|         |     # sin(x)                                                                      |
|         |     * cos(x)                                                                      |
|         |     @ sign(tan(x))/2                                                              |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+</pre>
</blockquote>
<h4></p>

  </p>

  
  <footer>
    <a href="/blog/mysql/sql-multi-line-chart/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/sql-pie-chart/">SQL pie chart</a></h2>

    <div class="post-meta">

  <div>

    <time>12 Aug 2009</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/sql">SQL</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>My other half says I&rsquo;m losing it. But I think that as an enthusiast kernel developer she doesn&rsquo;t have the right to criticize people. (&ldquo;I like user space better!&rdquo; - she exclaims upon reading this).</p>
<p>Shown below is a (single query) SQL-generated pie chart. I will walk through the steps towards making this happen, and conclude with what, I hope you&rsquo;ll agree, are real-world, useful usage samples.</p>
<blockquote>
<pre>+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| pie_chart                                                            |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
|                                                                      |
|                         ;;;;;;;;;;;;;;;;;;;;;                        |
|                  oooooooo;;;;;;;;;;;;;;;;;;;;;;;;;;;                 |
|             oooooooooooooo;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;            |
|          ooooooooooooooooo                 ;;;;;;;;;;;;#####         |
|        oooooooooooooo                           ;#############       |
|       oooooooooooo                                 ############      |
|      oooooooooooo                                   ############     |
|      ooooooooooo                                     ###########     |
|      oooooooooooo                                   ::::::::::::     |
|       oooooooooooo                                 ::::::::::::      |
|        ooooooooo:::::                           ::::::::::::::       |
|          o::::::::::::::::                 :::::::::::::::::         |
|             :::::::::::::::::::::::::::::::::::::::::::::            |
|                  :::::::::::::::::::::::::::::::::::                 |
|                         :::::::::::::::::::::                        |
|                                                                      |
| ##  red: 1 (10%)                                                     |
| ;;  blue: 2 (20%)                                                    |
| oo  orange: 3 (30%)                                                  |
| ::  white: 4 (40%)                                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+</pre>
</blockquote>
<h4>Requirements</h4>
<p>We need a generic query, which returns at least these two columns: <strong>name_column</strong> and <strong>value_column</strong>. For example, the following query will do:</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/sql-pie-chart/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/auto-scaling-scaled-sql-graphs-concluded/">Auto scaling, scaled SQL graphs concluded</a></h2>

    <div class="post-meta">

  <div>

    <time>28 Jul 2009</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/sql">SQL</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>I wasn&rsquo;t sure I was to go this far. After catching breath the following have been added to <a href="http://code.openark.org/blog/mysql/generic-auto-scaling-scaled-sql-graphs">Generic, auto scaling, scaled SQL graphs</a>, and these will conclude my current hacks:</p>
<ul>
<li>Displaying X-axis min/max values.</li>
<li>Support for Y-axis values precision.</li>
<li>Support for pre-defined scale range.</li>
</ul>
<p>The addition of the above makes for presentable, usable graphs. See also sample graphs at the end of this post.</p>
<h4>Step 8: adding X-axis values</h4>
<p>I add minimum/maximum X-scale values to the graph. What was just <strong>ordering_column</strong> before, now turns to be the <strong>x</strong> in the <strong>y = f(x)</strong> function.</p>

  </p>

  
  <footer>
    <a href="/blog/mysql/auto-scaling-scaled-sql-graphs-concluded/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/generic-auto-scaling-scaled-sql-graphs/">Generic, auto scaling, scaled SQL graphs</a></h2>

    <div class="post-meta">

  <div>

    <time>27 Jul 2009</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/sql">SQL</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>In <a href="http://code.openark.org/blog/mysql/rotating-sql-graphs-horizontally">Rotating SQL graphs horizontally</a>, I have shown how to rotate an ASCII SQL graph into horizontal position.</p>
<p>I was dissatisfied with some parts of the solution, which I will show now how to fix:</p>
<ul>
<li>I had to manually scale the graph values so as to fit nicely into screen.</li>
<li>I had to rely on hard coded scaling schemes.</li>
<li>I had to rely on hard coded column names.</li>
<li>I had no y-axis legend.</li>
</ul>
<p>I will now present an SQL query which allows for <em>pluggable queries</em>, which creates self, <em>auto scaling graphs</em>, along with <em>y-axis scales</em>.</p>
<p>Using deeply nested subqueries, we will evolve a simple SELECT query into an elaborate graph. I will present the many steps required, followed by explanations and sample results. But in the end - the steps are unimportant. I&rsquo;ll present a <em>generic query</em>, into which your own SELECT can be embedded, and which will provide you with the graph.</p>
<p>We&rsquo;ll use the same example, found in <a href="http://code.openark.org/blog/wp-content/uploads/2009/07/graph2.sql">graph.sql</a>.</p>
<h4></p>

  </p>

  
  <footer>
    <a href="/blog/mysql/generic-auto-scaling-scaled-sql-graphs/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
    <article>
  <header>
    <h2><a href="/blog/mysql/rotating-sql-graphs-horizontally/">Rotating SQL graphs horizontally</a></h2>

    <div class="post-meta">

  <div>

    <time>24 Jul 2009</time>
  </div>

  

  

  <div>
    
      
      
        <span>
          
            <a class="post-taxonomy-category" href="/blog/category/mysql">MySQL</a>
          
        </span>
      
    

    
      
      
        <span>
          <i class="fa fa-tags fa-fw"></i>
          
            <a class="post-taxonomy-tag" href="/blog/tag/graphs">Graphs</a>&nbsp;&#47;
          
            <a class="post-taxonomy-tag" href="/blog/tag/sql">SQL</a>
          
        </span>
      
    
  </div>

</div>


  </header>

  <p>
  <p><p>We all love graphs. We all love SQL hacks. We all know the SQL hack which displays a character-based graph (example follows for those unfamiliar).</p>
<p>But we all love <em>horizontal</em> graphs, not vertical ones. We are used to the X axis being horizontal, Y being vertical. Not vice versa.</p>
<p>In this post I&rsquo;ll present a SQL hack which rotates a vertical graph to horizontal. In fact, the technique shown will rotate any &lsquo;textual image&rsquo;; but graphs are a nice example.</p>
<h4>A vertical graph example</h4>
<p>What&rsquo;s prettier than a sinus curve? I have prepared a simple table that will serve nicely, and can be found in <a href="http://code.openark.org/blog/wp-content/uploads/2009/07/graph.sql">graph_tables.sql</a>.</p>
<p></p>

  </p>

  
  <footer>
    <a href="/blog/mysql/rotating-sql-graphs-horizontally/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
  </footer>
  
</article>

  
</div>

</div>
</div>
<script src="/blog/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'Your Google Analytics tracking ID', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>
